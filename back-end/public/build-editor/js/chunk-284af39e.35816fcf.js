(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-284af39e"],{"0b1f":function(e,t,n){},"0cb2":function(e,t,n){var a=n("7b0b"),i=Math.floor,o="".replace,l=/\$([$&'`]|\d\d?|<[^>]*>)/g,r=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,u,c,s){var d=n+e.length,p=u.length,f=r;return void 0!==c&&(c=a(c),f=l),o.call(s,f,(function(a,o){var l;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":l=c[o.slice(1,-1)];break;default:var r=+o;if(0===r)return a;if(r>p){var s=i(r/10);return 0===s?a:s<=p?void 0===u[s-1]?o.charAt(1):u[s-1]+o.charAt(1):a}l=u[r-1]}return void 0===l?"":l}))}},1276:function(e,t,n){"use strict";var a=n("d784"),i=n("44e7"),o=n("825a"),l=n("1d80"),r=n("4840"),u=n("8aa5"),c=n("50c4"),s=n("14c3"),d=n("9263"),p=n("d039"),f=[].push,h=Math.min,m=4294967295,v=!p((function(){return!RegExp(m,"y")}));a("split",2,(function(e,t,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var a=String(l(this)),o=void 0===n?m:n>>>0;if(0===o)return[];if(void 0===e)return[a];if(!i(e))return t.call(a,e,o);var r,u,c,s=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,v=new RegExp(e.source,p+"g");while(r=d.call(v,a)){if(u=v.lastIndex,u>h&&(s.push(a.slice(h,r.index)),r.length>1&&r.index<a.length&&f.apply(s,r.slice(1)),c=r[0].length,h=u,s.length>=o))break;v.lastIndex===r.index&&v.lastIndex++}return h===a.length?!c&&v.test("")||s.push(""):s.push(a.slice(h)),s.length>o?s.slice(0,o):s}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=l(this),o=void 0==t?void 0:t[e];return void 0!==o?o.call(t,i,n):a.call(String(i),t,n)},function(e,i){var l=n(a,e,this,i,a!==t);if(l.done)return l.value;var d=o(e),p=String(this),f=r(d,RegExp),b=d.unicode,g=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),y=new f(v?d:"^(?:"+d.source+")",g),w=void 0===i?m:i>>>0;if(0===w)return[];if(0===p.length)return null===s(y,p)?[p]:[];var k=0,x=0,E=[];while(x<p.length){y.lastIndex=v?x:0;var O,j=s(y,v?p:p.slice(x));if(null===j||(O=h(c(y.lastIndex+(v?0:x)),p.length))===k)x=u(p,x,b);else{if(E.push(p.slice(k,x)),E.length===w)return E;for(var P=1;P<=j.length-1;P++)if(E.push(j[P]),E.length===w)return E;x=k=O}}return E.push(p.slice(k)),E}]}),!v)},"13d5":function(e,t,n){"use strict";var a=n("23e7"),i=n("d58f").left,o=n("a640"),l=n("ae40"),r=n("2d00"),u=n("605d"),c=o("reduce"),s=l("reduce",{1:0}),d=!u&&r>79&&r<83;a({target:"Array",proto:!0,forced:!c||!s||d},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"25f0":function(e,t,n){"use strict";var a=n("6eeb"),i=n("825a"),o=n("d039"),l=n("ad6d"),r="toString",u=RegExp.prototype,c=u[r],s=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=r;(s||d)&&a(RegExp.prototype,r,(function(){var e=i(this),t=String(e.source),n=e.flags,a=String(void 0===n&&e instanceof RegExp&&!("flags"in u)?l.call(e):n);return"/"+t+"/"+a}),{unsafe:!0})},"44e7":function(e,t,n){var a=n("861d"),i=n("c6b6"),o=n("b622"),l=o("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==i(e))}},"4df4":function(e,t,n){"use strict";var a=n("0366"),i=n("7b0b"),o=n("9bdd"),l=n("e95a"),r=n("50c4"),u=n("8418"),c=n("35a1");e.exports=function(e){var t,n,s,d,p,f,h=i(e),m="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,g=void 0!==b,y=c(h),w=0;if(g&&(b=a(b,v>2?arguments[2]:void 0,2)),void 0==y||m==Array&&l(y))for(t=r(h.length),n=new m(t);t>w;w++)f=g?b(h[w],w):h[w],u(n,w,f);else for(d=y.call(h),p=d.next,n=new m;!(s=p.call(d)).done;w++)f=g?o(d,b,[s.value,w],!0):s.value,u(n,w,f);return n.length=w,n}},"4fad":function(e,t,n){var a=n("23e7"),i=n("6f53").entries;a({target:"Object",stat:!0},{entries:function(e){return i(e)}})},5319:function(e,t,n){"use strict";var a=n("d784"),i=n("825a"),o=n("50c4"),l=n("a691"),r=n("1d80"),u=n("8aa5"),c=n("0cb2"),s=n("14c3"),d=Math.max,p=Math.min,f=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,n,a){var h=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=a.REPLACE_KEEPS_$0,v=h?"$":"$0";return[function(n,a){var i=r(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i,a):t.call(String(i),n,a)},function(e,a){if(!h&&m||"string"===typeof a&&-1===a.indexOf(v)){var r=n(t,e,this,a);if(r.done)return r.value}var b=i(e),g=String(this),y="function"===typeof a;y||(a=String(a));var w=b.global;if(w){var k=b.unicode;b.lastIndex=0}var x=[];while(1){var E=s(b,g);if(null===E)break;if(x.push(E),!w)break;var O=String(E[0]);""===O&&(b.lastIndex=u(g,o(b.lastIndex),k))}for(var j="",P=0,S=0;S<x.length;S++){E=x[S];for(var C=String(E[0]),_=d(p(l(E.index),g.length),0),I=[],A=1;A<E.length;A++)I.push(f(E[A]));var R=E.groups;if(y){var $=[C].concat(I,_,g);void 0!==R&&$.push(R);var L=String(a.apply(void 0,$))}else L=c(C,g,_,I,R,a);_>=P&&(j+=g.slice(P,_)+L,P=_+C.length)}return j+g.slice(P)}]}))},"6f53":function(e,t,n){var a=n("83ab"),i=n("df75"),o=n("fc6a"),l=n("d1e7").f,r=function(e){return function(t){var n,r=o(t),u=i(r),c=u.length,s=0,d=[];while(c>s)n=u[s++],a&&!l.call(r,n)||d.push(e?[n,r[n]]:r[n]);return d}};e.exports={entries:r(!0),values:r(!1)}},"77ed":function(e,t,n){},"7c15":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return u}));var a=n("41cb"),i=n("84b1"),o=n("a27e");function l(){o["a"].post("/work/insert",new i["a"]).then((function(e){var t=e.data,n=a["a"].resolve({name:"editor",params:{workId:t.data.id}});window.open(n.href,"_blank")}))}function r(e){return o["a"].get("/work/query",{id:e})}function u(e){return o["a"].post("/work/update",e)}},"7db0":function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").find,o=n("44d2"),l=n("ae40"),r="find",u=!0,c=l(r);r in[]&&Array(1)[r]((function(){u=!1})),a({target:"Array",proto:!0,forced:u||!c},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(r)},8407:function(e,t,n){e.exports=n.p+"img/iphone.b989282b.png"},"99af":function(e,t,n){"use strict";var a=n("23e7"),i=n("d039"),o=n("e8b5"),l=n("861d"),r=n("7b0b"),u=n("50c4"),c=n("8418"),s=n("65f0"),d=n("1dde"),p=n("b622"),f=n("2d00"),h=p("isConcatSpreadable"),m=9007199254740991,v="Maximum allowed index exceeded",b=f>=51||!i((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),g=d("concat"),y=function(e){if(!l(e))return!1;var t=e[h];return void 0!==t?!!t:o(e)},w=!b||!g;a({target:"Array",proto:!0,forced:w},{concat:function(e){var t,n,a,i,o,l=r(this),d=s(l,0),p=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?l:arguments[t],y(o)){if(i=u(o.length),p+i>m)throw TypeError(v);for(n=0;n<i;n++,p++)n in o&&c(d,p,o[n])}else{if(p>=m)throw TypeError(v);c(d,p++,o)}return d.length=p,d}})},"9bdd":function(e,t,n){var a=n("825a"),i=n("2a62");e.exports=function(e,t,n,o){try{return o?t(a(n)[0],n[1]):t(n)}catch(l){throw i(e),l}}},"9e07":function(e,t,n){},a630:function(e,t,n){var a=n("23e7"),i=n("4df4"),o=n("1c7e"),l=!o((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:l},{from:i})},d58f:function(e,t,n){var a=n("1c0b"),i=n("7b0b"),o=n("44ad"),l=n("50c4"),r=function(e){return function(t,n,r,u){a(n);var c=i(t),s=o(c),d=l(c.length),p=e?d-1:0,f=e?-1:1;if(r<2)while(1){if(p in s){u=s[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in s&&(u=n(u,s[p],p,c));return u}};e.exports={left:r(!1),right:r(!0)}},eaaf:function(e,t,n){"use strict";n.r(t);n("d81d"),n("b0c0"),n("a9e3");var a=n("5530"),i=n("2b0e"),o=n("2f62"),l=n("e725"),r={name:"HeaderMenu",render:function(){var e=this,t=arguments[0];return t("div",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(){e.$emit("preview")}}},[this.$t("editor.header.preview")]),t("el-button",{attrs:{size:"mini"},on:{click:function(){e.$emit("save")}}},[this.$t("editor.header.save")]),t("el-button",{attrs:{size:"mini"}},[this.$t("editor.header.publish")])])}},u=(n("9e07"),n("0b1f"),n("77ed"),n("ac1f"),n("1276"),{name:"k-upload",props:{value:String,default:""},data:function(){return{fileReader:{}}},mounted:function(){this.fileReader=new FileReader},methods:{httpRequest:function(e){var t=this,n=e.file;n&&this.fileReader.readAsDataURL(n),this.fileReader.onload=function(){var a=t.fileReader.result;e.onSuccess(a.split(",")[1],n)}},success:function(e){e="data:image/gif;base64,"+e,this.$emit("change",e)},removeFile:function(){this.$refs.imgUpload.clearFiles(),this.$emit("change","")}},render:function(){var e=this,t=arguments[0];return t("div",[t("div",{directives:[{name:"show",value:this.value}],class:"k-upload",on:{click:this.removeFile}},[t("div",{class:"el-upload"},[t("img",{attrs:{src:this.value,alt:""}}),t("div",{class:"k-upload_del"},[t("em",{class:"el-icon-delete"})])])]),t("el-upload",{directives:[{name:"show",value:!this.value}],ref:"imgUpload",class:"k-upload",attrs:{action:"",limit:1,showFileList:!1,httpRequest:function(t){return e.httpRequest(t)},onSuccess:function(t){return e.success(t)}}},[t("em",{class:"el-icon-plus avatar-uploader-icon"})])])}}),c={name:"k-select",props:{options:{type:Array,default:function(){return[]}},value:{type:String,default:""}},render:function(){var e=this,t=arguments[0];return t("el-select",{attrs:{value:this.value},on:{change:function(t){return e.$emit("change",t)}}},[this.options.map((function(e){return t("el-option",{attrs:{label:e.label,value:e.value}})}))])}},s={name:"k-radio",props:{options:{type:Array,default:function(){return[]}},value:{type:String,default:""}},data:function(){return{model:""}},mounted:function(){this.model=this.value},render:function(){var e=this,t=arguments[0];return t("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){return e.$emit("change",t)}},model:{value:e.model,callback:function(t){e.model=t}}},[this.options.map((function(e){return t("el-radio-button",{attrs:{label:e.value}},[e.label])}))])}};i["default"].component(u.name,u),i["default"].component(c.name,c),i["default"].component(s.name,s);n("ed2c");var d=n("7c15"),p=n("a545"),f=n("a32b"),h=n("70c0"),m=(n("4de4"),n("4160"),n("159b"),n("e1dc")),v=n("33cb"),b=[{label:"短边缩放",value:"contain"},{label:"长边缩放",value:"cover"},{label:"拉伸",value:"fill"},{label:"原始",value:"none"},{label:"弹性缩放",value:"scale-down"}],g={name:"k-picture",props:{imgSrc:v["a"].upload({label:"图片"}),fitType:v["a"].select({defaultValue:"contain",label:"填充方式",options:b})},data:function(){return{}},render:function(){var e=arguments[0];return e("img",{attrs:{src:this.imgSrc},style:{objectFit:this.fitType}})}},y=n("ed08"),w=[{label:"左对齐",value:"left"},{label:"居中对齐",value:"center"},{label:"右对齐",value:"right"}],k={name:"k-button",props:{interface:v["a"].input({defaultValue:"/form/submit",label:"提交接口"}),formName:v["a"].input({defaultValue:"formName",label:"formName"}),text:v["a"].input({defaultValue:"按钮",label:"按钮文字"}),disabled:v["a"].boolean({label:"disabled"}),color:v["a"].color({label:"字体颜色",defaultValue:"#000"}),backgroundColor:v["a"].color({label:"背景色",defaultValue:"#ffffff"}),backgroundImg:v["a"].upload({label:"背景图"}),fontSize:v["a"].number({label:"字号(px)"}),borderWidth:v["a"].number({label:"边框宽度(px)",defaultValue:1}),borderRadius:v["a"].number({label:"圆角(px)",defaultValue:5}),borderColor:v["a"].color({label:"边框颜色",defaultValue:"#ced4da"}),textAlign:v["a"].radio({defaultValue:"center",label:"文字对齐",options:w}),submitText:v["a"].input({defaultValue:"提交成功",label:"提交文字"})},methods:{handleClick:function(){var e=this;if(!this.disabled){var t=document.querySelectorAll("[form-name^='".concat(this.formName,"']")),n={};t.forEach((function(e){return n[e.name]=e.value})),Object(y["g"])({interfaceName:this.interface,formData:n}).then((function(t){var n=t.data;200===n.code?e.$message({message:e.submitText,type:"success"}):e.$message({message:n.msg,type:"error"})}))}}},render:function(){var e=arguments[0],t={color:this.color,textAlign:this.textAlign,fontSize:this.fontSize+"px",borderColor:this.borderColor,borderRadius:this.borderRadius+"px",borderWidth:this.borderWidth+"px"};return t=this.backgroundImg?Object(a["a"])(Object(a["a"])({},t),{},{"background-size":"cover","background-position":"50% 50%","background-origin":"content-box","background-image":"url(".concat(this.backgroundImg,")")}):Object(a["a"])(Object(a["a"])({},t),{},{backgroundColor:this.backgroundColor}),e("button",{style:t,on:{click:this.handleClick}},[this.text])}},x=[{label:"文字",value:"text"},{label:"密码",value:"password"},{label:"日期",value:"date"},{label:"邮箱",value:"email"},{label:"手机号",value:"tel"}],E=[{label:"左对齐",value:"left"},{label:"居中对齐",value:"center"},{label:"右对齐",value:"right"}],O={name:"k-input",props:{type:v["a"].select({defaultValue:"text",label:"类型",options:x}),name:v["a"].input({defaultValue:"name",label:"name"}),formName:v["a"].input({defaultValue:"formName",label:"formName"}),placeholder:v["a"].input({defaultValue:"请输入",label:"提示信息"}),disabled:v["a"].boolean({label:"disabled"}),color:v["a"].color({label:"字体颜色",defaultValue:"#000"}),backgroundColor:v["a"].color({label:"背景色",defaultValue:"#ffffff"}),fontSize:v["a"].number({label:"字号(px)"}),borderWidth:v["a"].number({label:"边框宽度(px)",defaultValue:1}),borderRadius:v["a"].number({label:"圆角(px)",defaultValue:5}),borderColor:v["a"].color({label:"边框颜色",defaultValue:"#ced4da"}),textAlign:v["a"].radio({defaultValue:"left",label:"文字对齐",options:E})},render:function(){var e=arguments[0],t={color:this.color,textAlign:this.textAlign,backgroundColor:this.backgroundColor,fontSize:this.fontSize+"px",borderColor:this.borderColor,borderRadius:this.borderRadius+"px",borderWidth:this.borderWidth+"px"};return e("input",{class:"k-input",style:t,attrs:{type:this.type,placeholder:this.placeholder,disabled:this.disabled,name:this.name,"form-name":this.formName}})}},j=(n("99af"),[{label:"外阴影",value:""},{label:"内阴影",value:"inset"}]),P=[{label:"无",value:""},{label:"跳转",value:"jump"},{label:"弹窗",value:"dialog"}],S={name:"k-div",props:{backgroundColor:v["a"].color({label:"背景色",defaultValue:"#ffffff"}),backgroundImg:v["a"].upload({label:"背景图"}),borderWidth:v["a"].number({label:"边框宽度(px)",defaultValue:1}),borderRadius:v["a"].number({label:"圆角(px)",defaultValue:5}),borderColor:v["a"].color({label:"边框颜色",defaultValue:"#ced4da"}),boxShadowColor:v["a"].color({label:"阴影色",defaultValue:"#000"}),boxShadow:v["a"].radio({defaultValue:"",label:"阴影",options:j}),boxShadowX:v["a"].number({label:"X轴阴影(px)",defaultValue:5}),boxShadowY:v["a"].number({label:"Y轴阴影(px)",defaultValue:5}),boxShadowWidth:v["a"].number({label:"阴影模糊值(px)",defaultValue:10}),onClickFn:v["a"].select({label:"点击交互",defaultValue:"",options:P}),jumpUrl:v["a"].input({label:"跳转链接",defaultValue:""}),dialogNumber:v["a"].number({label:"弹窗",defaultValue:1})},methods:{onClick:function(){if(this.onClickFn&&("jump"===this.onClickFn&&(window.location.href=this.jumpUrl),"dialog"===this.onClickFn)){var e=document.getElementsByClassName("k-dialog");e.length&&(e[this.dialogNumber-1].style.display="block")}}},render:function(){var e=this,t=arguments[0],n={boxShadow:"".concat(this.boxShadowX,"px ").concat(this.boxShadowY,"px ").concat(this.boxShadowWidth,"px ").concat(this.boxShadowColor," ").concat(this.boxShadow),borderColor:this.borderColor,borderRadius:this.borderRadius+"px",borderWidth:this.borderWidth+"px"};return n=this.backgroundImg?Object(a["a"])(Object(a["a"])({},n),{},{"background-size":"cover","background-position":"50% 50%","background-origin":"content-box","background-image":"url(".concat(this.backgroundImg,")")}):Object(a["a"])(Object(a["a"])({},n),{},{backgroundColor:this.backgroundColor}),t("div",{style:n,on:{click:function(){return e.onClick()}}})}},C={name:"k-video",props:{videoImg:v["a"].input({defaultValue:"name",label:"name"})},render:function(){var e=arguments[0];return e("div",{class:"videodiv"},[e("video",{attrs:{"x5-video-player-type":"h5",controls:"controls",src:"http://domhttp.kksmg.com/2018/06/19/h264_450k_mp4_SHDongFangHD30000002018061928793150091_aac.mp4"},class:"video",style:"width:100%;height:100%;"})])}},_=[{i18nTitle:{"en-US":"Background","zh-CN":"背景"},title:"背景",icon:"el-icon-thumb",component:m["a"],visible:!1,name:m["a"].name},{title:"按钮",i18nTitle:{"en-US":"Button","zh-CN":"按钮"},icon:"Kbutton",component:k,visible:!0,name:k.name},{title:"图片",i18nTitle:{"en-US":"Picture","zh-CN":"图片"},icon:"Ktupian",component:g,visible:!0,name:g.name},{title:"输入框",i18nTitle:{"en-US":"Picture","zh-CN":"输入框"},icon:"Kshurukuang",component:O,visible:!0,name:O.name},{title:"容器",i18nTitle:{"en-US":"div","zh-CN":"容器"},icon:"Kdiv",component:S,visible:!0,name:S.name},{title:"视频",i18nTitle:{"en-US":"video","zh-CN":"视频"},icon:"Kdiv",component:C,visible:!0,name:C.name}],I={data:function(){return{pluginsList:_}},methods:{mixinPlugins2Editor:function(){_.forEach((function(e){i["default"].component(e.name,e.component)}))}},created:function(){this.mixinPlugins2Editor()}},A=n("558a"),R={computed:Object(a["a"])({},Object(o["c"])("editor",["work"])),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])("editor",["addElement"])),{},{handleDragStartFromMixin:function(e,t){var n=this,i=t.currentTarget.cloneNode(!0);document.body.appendChild(i),i.classList.add("drag_plugin_button"),i.style.left=t.clientX-t.layerX+"px",i.style.top=t.clientY-t.layerY+"px";var o=function(e){i.style.left=e.clientX-t.layerX+"px",i.style.top=e.clientY-t.layerY+"px"},l=function l(r){document.body.removeChild(i),document.removeEventListener("mousemove",o,!0),document.removeEventListener("mouseup",l,!0);var u=document.querySelector(".canvas_wrapper_view").getBoundingClientRect();u.left<r.clientX&&r.clientX<u.left+375&&u.top<r.clientY&&r.clientY<u.top+n.work.height&&n.addElement(Object(a["a"])(Object(a["a"])({},e),{},{dragStyle:{left:r.clientX-t.layerX-u.left,top:r.clientY-t.layerY-u.top}}))};document.addEventListener("mousemove",o,!0),document.addEventListener("mouseup",l,!0)}})},$={functional:!0,name:"PluginButton",props:{pluginIcon:{required:!0,type:String},title:{required:!0,type:String},clickFn:{required:!1,type:Function,default:function(){}},mousedownFn:{required:!1,type:Function,default:function(){}},disabled:{type:Boolean,default:!1}},render:function(e,t){var n=t.props;return e("button",{class:"pluginButton",on:{click:n.clickFn,mousedown:n.mousedownFn},attrs:{disabled:n.disabled}},[e("em",{class:["iconfont",n.pluginIcon]}),e("span",[n.title])])}},L={mixins:[A["a"],R,I],name:"PluginList",data:function(){return{}},render:function(){var e=this,t=arguments[0];return t("el-row",{attrs:{gutter:20},style:"height: calc(100vh - 135px);overflow: scroll;"},[this.pluginsList.filter((function(e){return e.visible})).map((function(n){return t("el-col",{attrs:{span:12},style:"margin-top: 10px;"},[t($,{attrs:{mousedownFn:e.handleDragStartFromMixin.bind(e,n),title:n.i18nTitle[e.currentLang]||n.title,pluginIcon:n.icon,disabled:n.disabled}})])}))])}};n("c975"),n("466d"),n("5319");function N(e){var t="";for(var n in e)t+="".concat(n.replace(/[A-Z]+/g,(function(e){return"-".concat(e.toLowerCase())})),":").concat(e[n],";");return t}var T={created:function(){var e=this;window.EditorApp&&window.EditorApp.$on("RUN_ANIMATIONS",(function(){e.runAnimations()}))},methods:{runAnimations:function(){var e=this.element.animations||[],t=e.length;if(0!==t){var n=this,a=this.$el,i=0,o=Object(y["d"])({position:"absolute"},n.element);l(),a.addEventListener("animationend",l,!1)}function l(){if(i<t){var n=e[i],l={animationName:n.type,animationDuration:"".concat(n.duration,"s"),animationIterationCount:n.infinite?"infinite":n.interationCount,animationDelay:"".concat(n.delay,"s"),animationFillMode:"both"};a.style.cssText=N(l)+N(o),i++}else a.style.cssText=N(o)}}}},z={name:"ElementItem",mixins:[T],props:["element"],mounted:function(){this.runAnimations()},render:function(){var e=arguments[0];return e("div",[this.$slots.default])}},D={name:"Preview",props:["elements","height"],render:function(e){var t=navigator.userAgent,n=!1;(t.match(/AppleWebKit.*Mobile.*/)||t.indexOf("iPad")>-1)&&(n=!0);var a="100%";this.height&&(a=Object(y["f"])(this.height,n));var i={height:a,position:"relative"};return e("div",{style:i},[this.elements.map((function(t){return e(z,{attrs:{element:t},style:Object(y["d"])({position:"absolute"},t)},[e(t.name,Object(y["b"])({position:"static"},t))])}))])}},V={name:"pageView",props:["page"],render:function(){var e=arguments[0];return e("div",{class:"page_view",style:{height:.5*this.page.height+"px"}},[e("div",{class:"page_view_main",style:{height:this.page.height+"px",top:.25*-this.page.height+"px"}},[e(D,{attrs:{elements:this.page.elements}})]),e("div",{class:"page_view_main",style:{height:this.page.height+"px",top:.25*-this.page.height+"px"}})])}},M={name:"pageList",props:["name","pages","addPage","setEditingPage"],methods:{setEditingPageFn:function(e,t){e.preventDefault(),e.stopPropagation(),this.hoverIndex=t,this.setEditingPage(t)},updatePage:function(){}},data:function(){return{activeName:0,hoverIndex:0}},render:function(){var e=this,t=arguments[0];return t("div",{class:"page_manager"},[t("el-collapse",{model:{value:e.activeName,callback:function(t){e.activeName=t}}},[this.pages.map((function(n,a){return t("el-collapse-item",{attrs:{name:a}},[t("template",{slot:"title"},[t("div",{class:["page_card_title",e.hoverIndex===a&&"activeTitle"],on:{click:function(t){return e.setEditingPageFn(t,a)}}},[t("div",{class:"page_card_title_text"},["".concat(e.name).concat(a+1)]),t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.updatePage(t,a)}}})])]),t("div",[t(V,{attrs:{page:n}})])])}))]),t("el-button",{class:"addPage",attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(){return e.addPage()}}},["添加",this.name])])}},K={name:"page-manager",computed:Object(a["a"])({},Object(o["c"])("editor",{pages:function(e){return e.work.pages}})),methods:Object(a["a"])({},Object(o["b"])("editor",["setEditingPage","addPage"])),render:function(){var e=arguments[0];return e(M,{attrs:{name:"页面",pages:this.pages,addPage:this.addPage,setEditingPage:this.setEditingPage}})}},U={name:"dialogManager",computed:Object(a["a"])({},Object(o["c"])("editor",{dialog:function(e){return e.work.dialog}})),methods:Object(a["a"])({},Object(o["b"])("editor",["setEditingDialog","addDialog"])),render:function(){var e=arguments[0];return e(M,{attrs:{name:"弹窗",pages:this.dialog,addPage:this.addDialog,setEditingPage:this.setEditingDialog}})}},F={name:"EditorLeftPanel",data:function(){return{activeName:"plugin-list"}},render:function(){var e=this,t=arguments[0];return t("el-aside",{attrs:{width:"260px"},style:"background: #fff;padding: 10px;"},[t("el-tabs",{class:"left_tab",model:{value:e.activeName,callback:function(t){e.activeName=t}}},[t("el-tab-pane",{attrs:{label:this.$t("editor.sidebar.components"),name:"plugin-list"}},[t(L)]),t("el-tab-pane",{attrs:{label:this.$t("editor.sidebar.pages"),name:"page-manager"}},[t(K)]),t("el-tab-pane",{attrs:{label:this.$t("editor.sidebar.dialog"),name:"page-dialog"}},[t(U)])])])}};n("4fad");function B(e){if(Array.isArray(e))return e}n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function X(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,o=void 0;try{for(var l,r=e[Symbol.iterator]();!(a=(l=r.next()).done);a=!0)if(n.push(l.value),t&&n.length===t)break}catch(u){i=!0,o=u}finally{try{a||null==r["return"]||r["return"]()}finally{if(i)throw o}}return n}}n("a630"),n("fb6a"),n("25f0");function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function W(e,t){if(e){if("string"===typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}function q(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function H(e,t){return B(e)||X(e,t)||W(e,t)||q()}var Z={name:"PropEditor",props:{realEditingElement:{type:Object,default:function(){return null}}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])("editor",{stateEditingElement:function(e){return e.editingElement}})),{},{editingElement:function(){return this.realEditingElement||this.stateEditingElement}}),render:function(e){var t=this;if(!this.editingElement)return e("div",["请选择一个元素"]);var n=Object(y["e"])(this.editingElement.name),i=n.$options.props;return e("el-form",{class:"right_prop_form",attrs:{size:"mini",inline:!1}},[Object.entries(i).map((function(n){var i=H(n,2),o=i[0],l=i[1],r=l.editor,u={props:Object(a["a"])(Object(a["a"])({},r.props),{},{value:t.editingElement.pluginProps[o]}),on:{input:function(e){t.editingElement.pluginProps[o]=e.target?e.target.value:e},change:function(e){t.editingElement.pluginProps[o]=e.target?e.target.value:e}}};return e("el-form-item",{attrs:{label:r.label+":"}},[e(r.type,u)])}))])}},G=(n("13d5"),[{label:"进入",value:/进/},{label:"退出",value:/退/},{label:"强调",value:/强调|特殊/}]),J=[{label:"",value:"空",children:[{label:"无",value:""}]},{label:"强调",value:"Attention Seekers",children:[{label:"旋转",value:"justRotate"},{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"跳动",value:"pulse"},{label:"抖动",value:"shake"},{label:"摇摆",value:"swing"},{label:"橡皮圈",value:"rubberBand"},{label:"果冻",value:"jello"},{label:"",value:"tada"},{label:"",value:"wobble"}]},{label:"弹跳进入",value:"Bouncing Entrances",children:[{label:"弹跳进入",value:"bounceIn"},{label:"向下弹跳进入",value:"bounceInDown"},{label:"向右弹跳进入",value:"bounceInLeft"},{label:"向左弹跳进入",value:"bounceInRight"},{label:"向上弹跳进入",value:"bounceInUp"}]},{label:"弹跳退出",value:"Bouncing Exits",children:[{label:"弹跳退出",value:"bounceOut"},{label:"向下弹跳退出",value:"bounceOutDown"},{label:"向左弹跳退出",value:"bounceOutLeft"},{label:"向右弹跳退出",value:"bounceOutRight"},{label:"向上弹跳退出",value:"bounceOutUp"}]},{label:"渐显进入",value:"Fading Entrances",children:[{label:"渐显进入",value:"fadeIn"},{label:"向下渐显进入",value:"fadeInDown"},{label:"由屏幕外向下渐显进入",value:"fadeInDownBig"},{label:"向右显进入",value:"fadeInLeft"},{label:"由屏幕外向右渐显进入",value:"fadeInLeftBig"},{label:"向左渐显进入",value:"fadeInRight"},{label:"由屏幕外向左渐显进入",value:"fadeInRightBig"},{label:"向上渐显进入",value:"fadeInUp"},{label:"由屏幕外向上渐显进入",value:"fadeInUpBig"}]},{label:"渐隐退出",value:"Fading Exits",children:[{label:"渐隐退出",value:"fadeOut"},{label:"向下渐隐退出",value:"fadeOutDown"},{label:"向下渐隐退出屏幕外",value:"fadeOutDownBig"},{label:"向左渐隐退出",value:"fadeOutLeft"},{label:"向左渐隐退出屏幕外",value:"fadeOutLeftBig"},{label:"向右渐隐退出",value:"fadeOutRight"},{label:"向右渐隐退出屏幕外",value:"fadeOutRightBig"},{label:"向上渐隐退出",value:"fadeOutUp"},{label:"向上渐隐退出屏幕外",value:"fadeOutUpBig"}]},{label:"翻动",value:"Flippers",children:[{label:"翻动",value:"flip"},{label:"纵向翻动",value:"flipInX"},{label:"横向翻动",value:"flipInY"},{label:"立体纵向翻动",value:"flipOutX"},{label:"立体横向翻动",value:"flipOutY"}]},{label:"加速进出",value:"Lightspeed",children:[{label:"加速进入",value:"lightSpeedIn"},{label:"加速退出",value:"lightSpeedOut"}]},{label:"旋转渐显",value:"Rotating Entrances",children:[{label:"旋转渐显",value:"rotateIn"},{label:"左下角旋转渐显",value:"rotateInDownLeft"},{label:"旋转渐显",value:"右下角rotateInDownRight"},{label:"左上角旋转渐显",value:"rotateInUpLeft"},{label:"右上角旋转渐显",value:"rotateInUpRight"}]},{label:"旋转渐隐",value:"Rotating Exits",children:[{label:"旋转渐隐",value:"rotateOut"},{label:"左下角旋转渐隐",value:"rotateOutDownLeft"},{label:"左下角旋转渐隐",value:"rotateOutDownRight"},{label:"左上角旋转渐隐",value:"rotateOutUpLeft"},{label:"右上角旋转渐隐",value:"rotateOutUpRight"}]},{label:"平移进入",value:"Sliding Entrances",children:[{label:"向上平移进入",value:"slideInUp"},{label:"向下平移进入",value:"slideInDown"},{label:"向右平移进入",value:"slideInLeft"},{label:"向左平移进入",value:"slideInRight"}]},{label:"平移退出",value:"Sliding Exits",children:[{label:"向上平移退出",value:"slideOutUp"},{label:"向下平移退出",value:"slideOutDown"},{label:"向左平移退出",value:"slideOutLeft"},{label:"向右平移退出",value:"slideOutRight"}]},{label:"放大进入",value:"Zoom Entrances",children:[{label:"放大进入",value:"zoomIn"},{label:"向下放大进入",value:"zoomInDown"},{label:"向右放大进入",value:"zoomInLeft"},{label:"向左放大进入",value:"zoomInRight"},{label:"向上放大进入",value:"zoomInUp"}]},{label:"缩小退出",value:"Zoom Exits",children:[{label:"缩小退出",value:"zoomOut"},{label:"向下缩小退出",value:"zoomOutDown"},{label:"向左缩小退出",value:"zoomOutLeft"},{label:"向右缩小退出",value:"zoomOutRight"},{label:"向上缩小退出",value:"zoomOutUp"}]},{label:"特殊效果",value:"Specials",children:[{label:"悬挂",value:"hinge"},{label:"滚动进入",value:"rollIn"},{label:"滚动退出",value:"rollOut"}]}],Q={data:function(){return{activeNameTop:G[0].label,activeNameLeft:"",activePreviewAnimation:""}},methods:{animationValueName:function(e){var t=J.reduce((function(e,t){var n=t.children;return n.forEach((function(t){e[t.value]=t.label})),e}),{});return t[e]},renderAnimationOptions:function(e){var t=this,n=this.$createElement;return n("el-form",{attrs:{size:"mini"}},[n("el-form-item",{attrs:{label:this.$t("editor.editPanel.animation.type")+"："}},[n("el-button",{attrs:{type:"text"},on:{click:function(){t.drawer=!0}}},[this.$t("editor.editPanel.animation.list")])]),n("el-form-item",{class:"animation_slider",attrs:{label:this.$t("editor.editPanel.animation.duration")+"(s)："}},[n("el-slider",{attrs:{min:0,max:20,inputSize:"mini",showInput:!0},on:{change:function(t){e.duration=t}},model:{value:e.duration,callback:function(n){t.$set(e,"duration",n)}}})]),n("el-form-item",{class:"animation_slider",attrs:{label:this.$t("editor.editPanel.animation.delay")+"(s)："}},[n("el-slider",{attrs:{min:0,max:20,inputSize:"mini",showInput:!0},on:{change:function(t){e.delay=t}},model:{value:e.delay,callback:function(n){t.$set(e,"delay",n)}}})]),n("el-form-item",{class:"animation_slider",attrs:{label:this.$t("editor.editPanel.animation.iteration")+"(s)："}},[n("el-slider",{attrs:{min:0,max:20,inputSize:"mini",showInput:!0},on:{change:function(t){e.iterationCount=t}},model:{value:e.iterationCount,callback:function(n){t.$set(e,"iterationCount",n)}}})]),n("el-form-item",{attrs:{label:this.$t("editor.editPanel.animation.infinite")+"(s)："}},[n("el-switch",{on:{change:function(t){e.infinite=t}},model:{value:e.infinite,callback:function(n){t.$set(e,"infinite",n)}}})])])},renderAnimationstTabs:function(){var e=this,t=this.$createElement;return t("el-tabs",[G.map((function(n){return t("el-tab-pane",{attrs:{label:n.label},key:n.label},[e.renderSecondAnimationTabs(J.filter((function(e){return!!e.label.match(n.value)})))])}))])},renderSecondAnimationTabs:function(e){var t=this,n=this.$createElement;return n("el-tabs",{attrs:{tabPosition:"left"}},[e.map((function(e){return n("el-tab-pane",{attrs:{label:e.label},key:e.label},[n("el-row",{attrs:{gutter:20},style:"line-height: 1.5;"},[e.children.map((function(e){return n("el-col",{attrs:{span:12}},[n("div",{class:[t.activePreviewAnimation===e.value&&"animate__"+e.value+" animated","animation_item_card"],on:{mouseenter:function(){t.activePreviewAnimation=e.value},click:function(){t.drawer=!1,t.editingElement.animations[t.activeName].type=e.value}}},[e.label])])}))])])}))])}}},ee={name:"AnimationEditor",mixins:[Q],computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])("editor",["editingElement"])),{},{animationQueue:function(){return this.editingElement&&this.editingElement.animations||[]}}),data:function(){return{activeName:0,drawer:!1}},methods:{addAnimation:function(){this.editingElement.animations.push({type:"",duration:1,delay:0,iterationCount:1,infinite:!1}),this.activeName=this.editingElement.animations.length-1},runAnimate:function(){window.EditorApp.$emit("RUN_ANIMATIONS")}},render:function(){var e=this,t=arguments[0],n=this.editingElement;return n?t("div",[t("el-button-group",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:this.addAnimation}},[t("em",{class:"el-icon-circle-plus-outline"})," ",this.$t("editor.editPanel.animation.add")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:this.runAnimate}},[this.$t("editor.editPanel.animation.run"),t("em",{class:"el-icon-video-play"})])]),t("div",[!!this.editingElement.animations.length&&t("el-collapse",{attrs:{accordion:!0},model:{value:e.activeName,callback:function(t){e.activeName=t}}},[this.editingElement.animations.map((function(n,a){return t("el-collapse-item",{attrs:{name:a}},[t("template",{slot:"title"},["动画".concat(a+1," ").concat(e.animationValueName(n.type))]),e.renderAnimationOptions(n)])}))]),t("el-drawer",{attrs:{visible:this.drawer,direction:"ltr"},on:Object(a["a"])({},{"update:visible":function(t){e.drawer=t}})},[t("div",{style:"padding: 10px;"},[this.renderAnimationstTabs()])])])]):t("span",[this.$t("editor.editPanel.common.empty")])}},te=(n("7db0"),{name:"PageEditor",computed:Object(a["a"])({},Object(o["c"])("editor",["editingPage"])),render:function(){var e=arguments[0],t=this.editingPage.elements.find((function(e){return"k-background"===e.name}));return e("div",[e(Z,{attrs:{realEditingElement:t}})])}}),ne={name:"EditorRightPanel",props:{width:{type:Number,default:320}},data:function(){return{activeName:"prop"}},render:function(){var e=this,t=arguments[0];return t("el-aside",{attrs:{width:this.width+"px"},style:"background: #fff;padding: 0 12px"},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t}}},[t("el-tab-pane",{attrs:{label:this.$t("editor.editPanel.tab.prop"),name:"prop"}},[t(Z)]),t("el-tab-pane",{attrs:{label:this.$t("editor.editPanel.tab.animation"),name:"animation"}},[t(ee)]),t("el-tab-pane",{attrs:{label:this.$t("editor.editPanel.tab.page"),name:"page"}},[t(te)])])])}},ae=["nw","ne","sw","se","w","e","n","s"],ie={name:"Shape",props:["active","element"],mixins:[T],methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])("editor",["setEditingElement","setElementCommonStyle","recordRect"])),{},{getPointStyle:function(e){var t=this.element.commonStyle.height,n=this.element.commonStyle.width,a=/n/.test(e),i=/s/.test(e),o=/w/.test(e),l=/e/.test(e),r=0,u=0;return 2===e.length?(r=o?0:n,u=a?0:t):((a||i)&&(r=n/2,u=a?0:t),(o||l)&&(r=o?0:n,u=t/2)),{left:"".concat(r,"px"),top:"".concat(u,"px"),cursor:e+"-resize"}},pointHandleMouseDown:function(e,t){var n=this;e.stopPropagation(),e.preventDefault();var i=Object(a["a"])({},this.element.commonStyle),o=e.clientX,l=e.clientY,r=function(e){var a=e.clientX,r=e.clientY,u=r-l,c=a-o,s=/n/.test(t),d=/s/.test(t),p=/w/.test(t),f=/e/.test(t),h=+i.height+(s?-u:d?u:0),m=+i.width+(p?-c:f?c:0);i.height=h>0?h:0,i.width=m>0?m:0,i.left=+i.left+(p?c:0),i.top=+i.top+(s?u:0),o=a,l=r,n.setElementCommonStyle(i)},u=function e(){n.recordRect(),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",u)},handleMousedown:function(e){var t=this;e.stopPropagation(),e.preventDefault(),this.setEditingElement(this.element);var n=Object(a["a"])({},this.element.commonStyle),i=e.clientY,o=e.clientX,l=n.top,r=n.left,u=function(e){e.stopPropagation(),e.preventDefault();var a=e.clientX,u=e.clientY;n.top=u-i+l,n.left=a-o+r,t.setElementCommonStyle(n)},c=function e(){t.recordRect(),document.removeEventListener("mousemove",u,!0),document.removeEventListener("mouseup",e,!0)};document.addEventListener("mousemove",u,!0),document.addEventListener("mouseup",c,!0)},divClick:function(e){e.stopPropagation(),e.preventDefault(),this.$emit("clearMenu",e)}}),render:function(){var e=this,t=arguments[0];return t("div",{on:{click:this.divClick,mousedown:this.handleMousedown},style:Object(y["d"])({position:"absolute"},this.element),class:{shape_active:this.active}},[this.active&&ae.map((function(n){return t("div",{attrs:{point:n},style:e.getPointStyle(n),on:{mousedown:function(t){return e.pointHandleMouseDown(t,n)}},class:"shape_point"})})),this.$slots.default])}},oe={name:"ContextMenu",methods:Object(a["a"])({},Object(o["b"])("editor",["copyElement","deleteElement"])),render:function(){var e=arguments[0];return e("el-card",{class:"context_menu"},[e("el-menu",[e("el-menu-item",{on:{click:this.copyElement}},[this.$t("editor.centerPanel.contextMenu.copy")]),e("el-menu-item",{on:{click:this.deleteElement}},[this.$t("editor.centerPanel.contextMenu.delete")])])])}},le={name:"edit",data:function(){return{contextmenu:[]}},computed:Object(a["a"])({},Object(o["c"])("editor",{elements:function(e){return e.editingPage.elements},editingElement:function(e){return e.editingElement}})),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])("editor",["setEditingElement"])),{},{handleClickCanvas:function(e){e.target.classList.contains("shape_active")||this.setEditingElement(null),this.contextmenu=[]},bindContextMenu:function(e){e.preventDefault(),e.stopPropagation();var t=this.$el.getBoundingClientRect(),n=t.x,a=t.y;this.contextmenu=[e.clientX-n,e.clientY-a]},clearMenu:function(e){e.preventDefault(),e.stopPropagation(),this.contextmenu=[]}}),render:function(e){var t=this;return e("div",{style:"width:100%;height:100%;position: relative;overflow: hidden;",on:{contextmenu:this.clearMenu,click:function(e){t.handleClickCanvas(e)}}},[this.elements.map((function(n){if("k-background"===n.name)return e("k-background",{props:Object(a["a"])({},Object(y["c"])({},n))});var i=Object(y["c"])({},n),o={props:i,style:{width:"100%",height:"100%"}};return e(ie,{nativeOn:{contextmenu:function(e){t.bindContextMenu(e)}},on:{clearMenu:t.clearMenu},attrs:{element:n,active:t.editingElement===n}},[e(n.name,o)])})),this.contextmenu.length?e(oe,{style:{left:this.contextmenu[0]+"px",top:this.contextmenu[1]+"px"}}):null])}},re={name:"dragLine",props:{type:{required:!0,type:String}},methods:{onMousedown:function(e){var t=this,n=e.clientX,a=e.clientY,i=function(e){e.preventDefault(),e.stopPropagation();var i=n-e.clientX,o=e.clientY-a;"ns"===t.$props.type?t.$emit("lineMove",o):t.$emit("lineMove",i),n-=i,a+=o},o=function e(){document.removeEventListener("mousemove",i,!0),document.removeEventListener("mouseup",e,!0)};document.addEventListener("mousemove",i,!0),document.addEventListener("mouseup",o,!0)}},render:function(){var e=arguments[0];return e("div",{class:"ns"===this.$props.type?"dragLine dragLine_ns":"dragLine dragLine_ew",on:{mousedown:this.onMousedown}},[e("div",{class:"dragLine_button"},[e("div",{class:"dragLine_button_icon"})])])}},ue={name:"EditorCanvas",data:function(){return{isPreviewMode:!0}},computed:Object(a["a"])(Object(a["a"])({},Object(o["c"])("editor",["work","editingPage","scaleRate"])),Object(o["c"])("editor",{elements:function(e){return e.editingPage.elements}})),methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])("editor",["updateWork","updateEditingPageHeight","setEditingElement"])),{},{radioChange:function(e){e||this.setEditingElement()}}),render:function(){var e=this,t=arguments[0];return t("el-container",{style:"background: #f1f3f5"},[t("el-main",{attrs:{id:"canvas_main"},style:"min-width: 400px;"},[t("div",{class:"canvas_group"},[t("el-radio-group",{attrs:{size:"mini"},on:{change:this.radioChange},model:{value:e.isPreviewMode,callback:function(t){e.isPreviewMode=t}}},[t("el-radio-button",{attrs:{label:!0}},[this.$t("editor.centerPanel.mode.edit")]),t("el-radio-button",{attrs:{label:!1}},[this.$t("editor.centerPanel.mode.preview")])])]),t("div",{class:"canvas_wrapper"},[t("div",{style:{transform:"scale(".concat(this.scaleRate,")"),"transform-origin":"center top","padding-top":"50px"}},[t("div",{class:"canvas_wrapper_view",style:{height:"".concat(this.editingPage.height,"px")}},[this.isPreviewMode?t(le):t(D,{attrs:{elements:this.elements,height:this.editingPage.height}})]),t("div",{class:"canvas_wrapper_height",style:{top:"".concat(1*this.editingPage.height+50,"px")}},[t("div",{class:"canvas_wrapper_height_drag"},[t(re,{attrs:{type:"ns"},on:{lineMove:function(t){e.updateEditingPageHeight({height:e.editingPage.height+t})}}})]),t("div",{class:"canvas_wrapper_height_input"},[t("span",["375 x"]),t("el-input",{attrs:{type:"number",size:"mini"},style:"width:80px;margin:0 4px;",on:{change:function(t){e.updateEditingPageHeight({height:t})}},model:{value:e.editingPage.height,callback:function(t){e.$set(e.editingPage,"height",t)}}}),t("span",["px"])])])])])])])}},ce="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function se(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on".concat(t),(function(){n(window.event)}))}function de(e,t){for(var n=t.slice(0,t.length-1),a=0;a<n.length;a++)n[a]=e[n[a].toLowerCase()];return n}function pe(e){"string"!==typeof e&&(e=""),e=e.replace(/\s/g,"");for(var t=e.split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}function fe(e,t){for(var n=e.length>=t.length?e:t,a=e.length>=t.length?t:e,i=!0,o=0;o<n.length;o++)-1===a.indexOf(n[o])&&(i=!1);return i}for(var he={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,"⇪":20,",":188,".":190,"/":191,"`":192,"-":ce?173:189,"=":ce?61:187,";":ce?59:186,"'":222,"[":219,"]":221,"\\":220},me={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},ve={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},be={16:!1,18:!1,17:!1,91:!1},ge={},ye=1;ye<20;ye++)he["f".concat(ye)]=111+ye;var we=[],ke="all",xe=[],Ee=function(e){return he[e.toLowerCase()]||me[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function Oe(e){ke=e||"all"}function je(){return ke||"all"}function Pe(){return we.slice(0)}function Se(e){var t=e.target||e.srcElement,n=t.tagName,a=!0;return!t.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||t.readOnly)||(a=!1),a}function Ce(e){return"string"===typeof e&&(e=Ee(e)),-1!==we.indexOf(e)}function _e(e,t){var n,a;for(var i in e||(e=je()),ge)if(Object.prototype.hasOwnProperty.call(ge,i))for(n=ge[i],a=0;a<n.length;)n[a].scope===e?n.splice(a,1):a++;je()===e&&Oe(t||"all")}function Ie(e){var t=e.keyCode||e.which||e.charCode,n=we.indexOf(t);if(n>=0&&we.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&we.splice(0,we.length),93!==t&&224!==t||(t=91),t in be)for(var a in be[t]=!1,me)me[a]===t&&(Te[a]=!1)}function Ae(e){if(e){if(Array.isArray(e))e.forEach((function(e){e.key&&Re(e)}));else if("object"===typeof e)e.key&&Re(e);else if("string"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i=n[0],o=n[1];"function"===typeof i&&(o=i,i=""),Re({key:e,scope:i,method:o,splitKey:"+"})}}else Object.keys(ge).forEach((function(e){return delete ge[e]}))}var Re=function(e){var t=e.key,n=e.scope,a=e.method,i=e.splitKey,o=void 0===i?"+":i,l=pe(t);l.forEach((function(e){var t=e.split(o),i=t.length,l=t[i-1],r="*"===l?"*":Ee(l);if(ge[r]){n||(n=je());var u=i>1?de(me,t):[];ge[r]=ge[r].map((function(e){var t=!a||e.method===a;return t&&e.scope===n&&fe(e.mods,u)?{}:e}))}}))};function $e(e,t,n){var a;if(t.scope===n||"all"===t.scope){for(var i in a=t.mods.length>0,be)Object.prototype.hasOwnProperty.call(be,i)&&(!be[i]&&t.mods.indexOf(+i)>-1||be[i]&&-1===t.mods.indexOf(+i))&&(a=!1);(0!==t.mods.length||be[16]||be[18]||be[17]||be[91])&&!a&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function Le(e){var t=ge["*"],n=e.keyCode||e.which||e.charCode;if(Te.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===we.indexOf(n)&&229!==n&&we.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var n=ve[t];e[t]&&-1===we.indexOf(n)?we.push(n):!e[t]&&we.indexOf(n)>-1?we.splice(we.indexOf(n),1):"metaKey"===t&&e[t]&&3===we.length&&(e.ctrlKey||e.shiftKey||e.altKey||(we=we.slice(we.indexOf(n))))})),n in be){for(var a in be[n]=!0,me)me[a]===n&&(Te[a]=!0);if(!t)return}for(var i in be)Object.prototype.hasOwnProperty.call(be,i)&&(be[i]=e[ve[i]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===we.indexOf(17)&&we.push(17),-1===we.indexOf(18)&&we.push(18),be[17]=!0,be[18]=!0);var o=je();if(t)for(var l=0;l<t.length;l++)t[l].scope===o&&("keydown"===e.type&&t[l].keydown||"keyup"===e.type&&t[l].keyup)&&$e(e,t[l],o);if(n in ge)for(var r=0;r<ge[n].length;r++)if(("keydown"===e.type&&ge[n][r].keydown||"keyup"===e.type&&ge[n][r].keyup)&&ge[n][r].key){for(var u=ge[n][r],c=u.splitKey,s=u.key.split(c),d=[],p=0;p<s.length;p++)d.push(Ee(s[p]));d.sort().join("")===we.sort().join("")&&$e(e,u,o)}}}function Ne(e){return xe.indexOf(e)>-1}function Te(e,t,n){we=[];var a=pe(e),i=[],o="all",l=document,r=0,u=!1,c=!0,s="+";for(void 0===n&&"function"===typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(o=t.scope),t.element&&(l=t.element),t.keyup&&(u=t.keyup),void 0!==t.keydown&&(c=t.keydown),"string"===typeof t.splitKey&&(s=t.splitKey)),"string"===typeof t&&(o=t);r<a.length;r++)e=a[r].split(s),i=[],e.length>1&&(i=de(me,e)),e=e[e.length-1],e="*"===e?"*":Ee(e),e in ge||(ge[e]=[]),ge[e].push({keyup:u,keydown:c,scope:o,mods:i,shortcut:a[r],method:n,key:a[r],splitKey:s});"undefined"!==typeof l&&!Ne(l)&&window&&(xe.push(l),se(l,"keydown",(function(e){Le(e)})),se(window,"focus",(function(){we=[]})),se(l,"keyup",(function(e){Le(e),Ie(e)})))}var ze={setScope:Oe,getScope:je,deleteScope:_e,getPressedKeyCodes:Pe,isPressed:Ce,filter:Se,unbind:Ae};for(var De in ze)Object.prototype.hasOwnProperty.call(ze,De)&&(Te[De]=ze[De]);if("undefined"!==typeof window){var Ve=window.hotkeys;Te.noConflict=function(e){return e&&window.hotkeys===Te&&(window.hotkeys=Ve),Te},window.hotkeys=Te}var Me=Te,Ke=[{icon:"Kchexiao",i18nTooltip:"editor.fixedTool.undo",hotkeyTooltip:"(ctrl+z)",hotkey:"ctrl&z,⌘&z",disabled:"canUndo",onClick:function(){y["h"].undo()}},{icon:"Kzhongzuo",i18nTooltip:"editor.fixedTool.redo",hotkeyTooltip:"(ctrl+y)",hotkey:"ctrl&y,⌘&y",disabled:"canRedo",onClick:function(){y["h"].redo()}},{icon:"Kfangda",i18nTooltip:"editor.fixedTool.zoomOut",hotkeyTooltip:"(ctrl +)",hotkey:"ctrl&=,⌘&=",onClick:function(){this.updateScaleRate(.25)}},{icon:"Ksuoxiao",i18nTooltip:"editor.fixedTool.zoomIn",hotkeyTooltip:"(ctrl -)",hotkey:"ctrl&-,⌘&-",onClick:function(){this.updateScaleRate(-.25)}}],Ue={name:"FixedTools",computed:Object(a["a"])({},Object(o["c"])("editor",{scaleRate:function(e){return e.scaleRate}})),methods:Object(a["a"])({},Object(o["b"])("editor",["updateScaleRate"])),data:function(){return{undoRedoHistory:y["h"]}},mounted:function(){var e=this;Ke.map((function(t){t.hotkey&&Me(t.hotkey,{splitKey:"&"},(function(n){n.preventDefault(),n.stopPropagation(),t.onClick&&t.onClick.call(e)}))}))},render:function(){var e=this,t=arguments[0];return t("el-aside",{attrs:{width:"40px"},style:"background: #fff; border: 1px solid #eee"},[t("el-button-group",{class:"tools_button_group"},[Ke.map((function(n){return t("el-tooltip",{attrs:{effect:"dark",placement:"top",content:e.$t(n.i18nTooltip,{hotkey:n.hotkeyTooltip})}},[t("el-button",{attrs:{type:"text",disabled:!!n.disabled&&!e.undoRedoHistory[n.disabled]},on:{click:function(){return n.onClick.call(e)}}},[t("em",{class:["iconfont",n.icon]})])])}))]),t("div",{style:"font-size: 14px;text-align: center;"},[100*this.scaleRate,"%"])])}},Fe={name:"PreviewDialog",props:["visible","work"],computed:{releaseUrl:function(){return"http://localhost:3000/v1/work/preview?id=".concat(this.work.id,"&view_mode=preview")}},render:function(){var e=this,t=arguments[0];return t("div",{class:"k_dialog",directives:[{name:"show",value:this.visible}]},[t("div",{class:"k_dialog__bg"}),t("div",{class:"k_dialog__wrap"},[t("div",{class:"k_dialog__wrap__main"},[t("em",{class:"k_dialog__wrap__close el-icon-circle-close",on:{click:function(){e.$emit("update:visible",!1)}}}),t("div",{class:"iphone"},[t("div",{class:"iphone__top"}),t("div",{class:"iphone__main"},[this.visible&&t("iframe",{attrs:{id:"iframe-for-preview",src:this.releaseUrl,frameBorder:"0"},style:"height: 100%;width: 100%;"})]),t("img",{attrs:{src:n("8407"),alt:"iphone"},class:"iphone__bg"})])])])])}};window.EditorApp=new i["default"];var Be={name:"CoreEditor",components:{Header:l["a"]},computed:Object(a["a"])({},Object(o["c"])("editor",["work"])),props:{workId:{type:[Number,String]}},data:function(){return{width:320,previewDialogVisible:!1}},created:function(){var e=this;this.workId?Object(d["b"])(this.workId).then((function(t){var n=t.data,a=n.data.work;a.pages=a.pages.map((function(e){return e.elements=e.elements.map((function(e){return new p["a"](e)})),new f["a"](e)})),a.dialog=a.dialog.map((function(e){return e.elements=e.elements.map((function(e){return new p["a"](e)})),new h["a"](e)})),e.updateWork(a),e.setEditingPage()})):this.$message.error("no work id!")},methods:Object(a["a"])(Object(a["a"])({},Object(o["b"])("editor",["updateWork","setEditingPage"])),{},{handlePreview:function(){this.previewDialogVisible=!0},save:function(){var e=this;Object(d["c"])(this.work).then((function(t){var n=t.data;200===n.code&&e.$message({message:"保存成功",type:"success"})}))}}),render:function(){var e=this,t=arguments[0];return t("el-container",{style:{height:"100vh"}},[t("el-header",{style:"background-color: #031529;"},[t(l["a"],[t(r,{slot:"headr_menu",on:{preview:this.handlePreview,save:this.save}})])]),t("el-container",[t(F),t(ue),t("el-aside",{attrs:{width:"3px"},style:"overflow: visible;"},[t(re,{attrs:{type:"ew"},on:{lineMove:function(t){e.width+=t}}})]),t(Ue),t(ne,{attrs:{width:this.width}})]),t(Fe,{attrs:{visible:this.previewDialogVisible,work:this.work},on:Object(a["a"])({},{"update:visible":function(t){e.previewDialogVisible=t}})})])},install:function(e){e.component(Be.name,Be)}};"undefined"!==typeof window&&window.Vue&&Be.install(window.Vue);var Xe,Ye,We=Be,qe={components:{CoreEditor:We},render:function(){var e=arguments[0];return e(We,{attrs:{workId:this.$route.params.workId}})}},He=qe,Ze=n("2877"),Ge=Object(Ze["a"])(He,Xe,Ye,!1,null,null,null);t["default"]=Ge.exports},ed2c:function(e,t,n){},fb6a:function(e,t,n){"use strict";var a=n("23e7"),i=n("861d"),o=n("e8b5"),l=n("23cb"),r=n("50c4"),u=n("fc6a"),c=n("8418"),s=n("b622"),d=n("1dde"),p=n("ae40"),f=d("slice"),h=p("slice",{ACCESSORS:!0,0:0,1:2}),m=s("species"),v=[].slice,b=Math.max;a({target:"Array",proto:!0,forced:!f||!h},{slice:function(e,t){var n,a,s,d=u(this),p=r(d.length),f=l(e,p),h=l(void 0===t?p:t,p);if(o(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?i(n)&&(n=n[m],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(d,f,h);for(a=new(void 0===n?Array:n)(b(h-f,0)),s=0;f<h;f++,s++)f in d&&c(a,s,d[f]);return a.length=s,a}})}}]);