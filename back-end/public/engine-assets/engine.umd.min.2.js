(("undefined"!==typeof self?self:this)["webpackJsonpengine"]=("undefined"!==typeof self?self:this)["webpackJsonpengine"]||[]).push([[2],{"0767":function(e,t,n){"use strict";n("fea5")},7386:function(e,t,n){"use strict";var i=n("1b39");t["a"]={name:"pageView",props:["page"],render:function(){var e=arguments[0];return e("div",{class:"page_view",style:{height:.5*this.page.height+"px"}},[e("div",{class:"page_view_main",style:{height:this.page.height+"px",top:.25*-this.page.height+"px"}},[e(i["a"],{attrs:{elements:this.page.elements}})]),e("div",{class:"page_view_main",style:{height:this.page.height+"px",top:.25*-this.page.height+"px"}})])}}},8407:function(e,t,n){e.exports=n.p+"img/iphone.b989282b.png"},"91b7":function(e,t,n){"use strict";n("9d19")},"9d19":function(e,t,n){},eaaf:function(e,t,n){"use strict";n.r(t);var i=n("5530"),a=(n("a9e3"),n("d81d"),n("b0c0"),n("8bbf")),l=n.n(a),o=n("2f62"),r=n("f05e"),s=n.n(r),c=n("e725"),u={name:"HeaderMenu",render:function(){var e=this,t=arguments[0];return t("div",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(){e.$emit("preview")}}},[this.$t("editor.header.preview")]),t("el-button",{attrs:{size:"mini"},on:{click:function(){e.$emit("save")}}},[this.$t("editor.header.save")]),t("el-button",{attrs:{size:"mini"}},[this.$t("editor.header.publish")])])}},d=(n("9e07"),n("0b1f"),n("77ed"),n("ac1f"),n("1276"),{name:"k-upload-editor",props:{value:String,default:""},data:function(){return{fileReader:{}}},mounted:function(){this.fileReader=new FileReader},methods:{httpRequest:function(e){var t=this,n=e.file;n&&this.fileReader.readAsDataURL(n),this.fileReader.onload=function(){var i=t.fileReader.result;e.onSuccess(i.split(",")[1],n)}},success:function(e){e="data:image/gif;base64,"+e,this.$emit("change",e)},removeFile:function(){this.$refs.imgUpload.clearFiles(),this.$emit("change","")}},render:function(){var e=this,t=arguments[0];return t("div",[t("div",{directives:[{name:"show",value:this.value}],class:"k-upload",on:{click:this.removeFile}},[t("div",{class:"el-upload"},[t("img",{attrs:{src:this.value,alt:""}}),t("div",{class:"k-upload_del"},[t("em",{class:"el-icon-delete"})])])]),t("el-upload",{directives:[{name:"show",value:!this.value}],ref:"imgUpload",class:"k-upload",attrs:{action:"",limit:1,showFileList:!1,httpRequest:function(t){return e.httpRequest(t)},onSuccess:function(t){return e.success(t)}}},[t("em",{class:"el-icon-plus avatar-uploader-icon"})])])}}),m={name:"k-select-editor",props:{options:{type:Array,default:function(){return[]}},value:{type:String,default:""}},render:function(){var e=this,t=arguments[0];return t("el-select",{attrs:{value:this.value},on:{change:function(t){return e.$emit("change",t)}}},[this.options.map((function(e){return t("el-option",{attrs:{label:e.label,value:e.value}})}))])}},h={name:"k-radio-editor",props:{options:{type:Array,default:function(){return[]}},value:{type:String,default:""}},data:function(){return{model:""}},mounted:function(){this.model=this.value},render:function(){var e=this,t=arguments[0];return t("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){return e.$emit("change",t)}},model:{value:e.model,callback:function(t){e.model=t}}},[this.options.map((function(e){return t("el-radio-button",{attrs:{label:e.value}},[e.label])}))])}},p=(n("fb6a"),{name:"k-colors-panel-editor",props:{value:{type:Array,default:function(){return[]}}},render:function(){var e=this,t=arguments[0];return t("div",[this.value.map((function(n,i){return t("el-color-picker",{attrs:{size:"small",value:n},on:{change:function(t){var n=e.value.slice(0);n[i]=t,e.$emit("change",n)}}})}))])}}),f=n("53ca"),v=(n("4de4"),n("d3b7"),n("07ac"),n("159b"),n("8d4a")),b=n("369b"),g=n.n(b),y=["text/csv","text/x-csv","application/vnd.ms-excel","text/plain"],x={name:"k-csv-import-editor",methods:{checkMimeType:function(e){return y.indexOf(e)>-1},validFileMimeType:function(e){e.preventDefault();var t=this.$refs.csv.files[0],n=this.checkMimeType(t.type);n&&this.loadFile()},loadFile:function(){var e=this;this.readFile((function(t){var n=g.a.parse(t,{skipEmptyLines:!0});e.$emit("parse",n),e.$refs.input.value=""}))},readFile:function(e){var t=this.$refs.csv.files[0];if(t){var n=new FileReader;n.readAsText(t,"UTF-8"),n.onload=function(t){e(t.target.result)},n.onerror=function(){}}}},render:function(){var e=arguments[0],t=+new Date;return e("div",{style:"height: 24px;"},[e("label",{attrs:{for:t},class:"el-button el-button--primary el-button--mini"},["选择导入 csv 文件"]),e("input",{ref:"csv",attrs:{id:t,type:"file",name:"csv"},on:{change:this.validFileMimeType},style:"visibility:hidden;"},["xxxx"])])}};function k(e){var t=Object.values(e.rows).filter((function(e){return"object"===Object(f["a"])(e)})),n=t.map((function(e){var t=Object.values(e.cells).map((function(e){return e.text}));return t}));return console.log("dataset",n),n}function w(e){var t=e.map((function(e){var t={};return e.forEach((function(e,n){t[n]={text:e}})),{cells:t}}));return t}var E={name:"k-excel-editor",props:{value:{type:Array,default:function(){return[]}},formatter:{type:Function,default:k}},computed:{innerItems:{get:function(){return w(this.value)},set:function(e){this.$emit("input",e)}}},watch:{value:function(){this.refreshSheet({rows:this.innerItems})}},methods:{binaryMatrix2excel:function(e){var t=e.map((function(e){var t={};return e.forEach((function(e,n){t[n]={text:e}})),{cells:t}}));return t},parseCSV:function(e){var t=this.binaryMatrix2excel(e.data);this.$emit("change",e.data),this.refreshSheet({rows:t})},refreshSheet:function(e){this.sheet.loadData(e),this.sheet.reRender()},initSheet:function(){var e=this,t=this.$refs.excel;return this.sheet||new v["a"](t,{showToolbar:!1,showGrid:!0,showContextmenu:!0}).change((function(t){e.$emit("change",e.formatter(t))}))}},mounted:function(){this.sheet=this.initSheet(),this.refreshSheet({rows:this.innerItems})},render:function(){var e=arguments[0];return e("div",{style:"max-height: 320px;overflow:scroll;"},[e("div",{style:"line-height:2;"},[e("span",["方案1: ",e(x,{on:{parse:this.parseCSV}})]),e("span",["方案2: 直接编辑 Excel"]),e("div",{ref:"excel",style:"margin-right: 12px;width: 100%;overflow: scroll"})])])}},O={name:"k-color-picker",props:{value:{type:String,default:function(){return""}}},data:function(){return{inputVal:""}},mounted:function(){this.inputVal=this.value},render:function(){var e=this,t=arguments[0];return t("div",{style:"display: flex;"},[t("el-color-picker",{attrs:{size:"small",showAlpha:!0,value:this.value},on:{change:function(t){e.inputVal=t,e.$emit("change",t)}}}),t("el-input",{attrs:{type:"text",size:"small"},style:"flex: 1; margin-left: 15px;",on:{change:function(t){e.$emit("change",t)}},model:{value:e.inputVal,callback:function(t){e.inputVal=t}}})])}},P=n("8f94"),S=n.n(P);n("f9d4"),n("8c2e"),n("a7be");l.a.use(S.a,{options:{tabSize:2,mode:"text/javascript",theme:"base16-dark",lineNumbers:!0,line:!0},events:["scroll"]}),l.a.component(d.name,d),l.a.component(m.name,m),l.a.component(h.name,h),l.a.component(p.name,p),l.a.component(E.name,E),l.a.component(O.name,O);n("ed2c");var _=n("7c15"),j=n("a545"),C=n("a32b"),$=n("70c0"),D=(n("99af"),n("9481")),M=n("558a"),I={computed:Object(i["a"])({},Object(o["c"])("editor",["work","editingPage"])),methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])("editor",["addElement"])),{},{handleDragStartFromMixin:function(e,t){var n=this,a=t.currentTarget.cloneNode(!0);document.body.appendChild(a),a.classList.add("drag_plugin_button"),a.style.left=t.clientX-t.layerX+"px",a.style.top=t.clientY-t.layerY+"px";var l=function(e){a.style.left=e.clientX-t.layerX+"px",a.style.top=e.clientY-t.layerY+"px"},o=function o(r){document.body.removeChild(a),document.removeEventListener("mousemove",l,!0),document.removeEventListener("mouseup",o,!0);var s=document.querySelector(".canvas_wrapper_view").getBoundingClientRect();s.left<r.clientX&&r.clientX<s.left+n.editingPage.width&&s.top<r.clientY&&r.clientY<s.top+n.work.height&&n.addElement(Object(i["a"])(Object(i["a"])({},e),{},{dragStyle:{left:r.clientX-t.layerX-s.left,top:r.clientY-t.layerY-s.top}}))};document.addEventListener("mousemove",l,!0),document.addEventListener("mouseup",o,!0)}})},L={name:"plugin-options",data:function(){return{visible:!1,isIndeterminate:!1,checkAll:!0,checkedData:[],pluginArr:[]}},mounted:function(){this.checkedData=this.pluginArr,this.$emit("setPlugin",this.checkedData)},methods:{handleCheckAllChange:function(e){this.checkedData=e?this.pluginArr:[],this.isIndeterminate=!1},handleCheckedChange:function(e){this.checkAll=e.length===this.pluginArr.length,this.isIndeterminate=e.length>0&&e.length<this.pluginArr.length},setPlugin:function(){this.$emit("setPlugin",this.checkedData),this.visible=!1}},render:function(){var e=this,t=arguments[0];return t("div",[t("el-button",{class:"plugin-options_button",attrs:{size:"mini"},on:{click:function(){return e.visible=!0}}},["配置组件列表"]),t("el-dialog",{attrs:{title:"组件列表",visible:this.visible},on:Object(i["a"])({},{"update:visible":function(t){e.visible=t}})},[t("el-checkbox",{style:"margin-bottom: 20px;",attrs:{indeterminate:this.isIndeterminate},on:{change:this.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t}}},["全选"]),t("el-checkbox-group",{on:{change:this.handleCheckedChange},model:{value:e.checkedData,callback:function(t){e.checkedData=t}}},[this.pluginArr.map((function(e){return t("el-checkbox",{attrs:{label:e}},[e.title])}))]),t("div",{style:"text-align: right;"},[t("el-button",{attrs:{size:"small"},on:{click:function(){return e.visible=!1}}},["取 消"]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:this.setPlugin}},["确 定"])])])])}},T={functional:!0,name:"PluginButton",props:{pluginIcon:{required:!0,type:String},title:{required:!0,type:String},clickFn:{required:!1,type:Function,default:function(){}},mousedownFn:{required:!1,type:Function,default:function(){}},disabled:{type:Boolean,default:!1}},render:function(e,t){var n=t.props;return e("button",{class:"pluginButton",on:{click:n.clickFn,mousedown:n.mousedownFn},attrs:{disabled:n.disabled}},[e("em",{class:["iconfont",n.pluginIcon]}),e("span",[n.title])])}},z={mixins:[M["a"],I,D["a"]],name:"PluginList",data:function(){return{pluginOptionArr:[]}},methods:{setPlugin:function(e){this.pluginOptionArr=e}},render:function(){var e=this,t=arguments[0];return t("div",{style:"position: relative;"},[t("el-row",{attrs:{gutter:20},style:"height: calc(100vh - 120px);overflow-y: scroll;"},[[].concat(this.pluginsList,this.pluginOptionArr).filter((function(e){return e.visible})).map((function(n){return t("el-col",{attrs:{span:12},style:"margin-top: 10px;"},[t(T,{attrs:{mousedownFn:e.handleDragStartFromMixin.bind(e,n),title:n.i18nTitle[e.currentLang]||n.title,pluginIcon:n.icon,disabled:n.disabled}})])}))]),t(L,{on:{setPlugin:this.setPlugin}})])}},A=n("7386"),R={name:"pageList",props:["name","pages","addPage","setEditingPage"],methods:{setEditingPageFn:function(e,t){e.preventDefault(),e.stopPropagation(),this.hoverIndex=t,this.setEditingPage(t)},updatePage:function(){}},data:function(){return{activeName:0,hoverIndex:0}},render:function(){var e=this,t=arguments[0];return t("div",{class:"page_manager"},[t("el-collapse",{model:{value:e.activeName,callback:function(t){e.activeName=t}}},[this.pages.map((function(n,i){return t("el-collapse-item",{attrs:{name:i}},[t("template",{slot:"title"},[t("div",{class:["page_card_title",e.hoverIndex===i&&"activeTitle"],on:{click:function(t){return e.setEditingPageFn(t,i)}}},[t("div",{class:"page_card_title_text"},["".concat(e.name).concat(i+1)]),t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.updatePage(t,i)}}})])]),t("div",[t(A["a"],{attrs:{page:n}})])])}))]),t("el-button",{class:"addPage",attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(){return e.addPage()}}},["添加",this.name])])}},F={name:"page-manager",computed:Object(i["a"])({},Object(o["c"])("editor",{pages:function(e){return e.work.pages}})),methods:Object(i["a"])({},Object(o["b"])("editor",["setEditingPage","addPage"])),render:function(){var e=arguments[0];return e(R,{attrs:{name:"页面",pages:this.pages,addPage:this.addPage,setEditingPage:this.setEditingPage}})}},N={name:"dialogManager",computed:Object(i["a"])({},Object(o["c"])("editor",{dialog:function(e){return e.work.dialog}})),methods:Object(i["a"])({},Object(o["b"])("editor",["setEditingDialog","addDialog"])),render:function(){var e=arguments[0];return e(R,{attrs:{name:"弹窗",pages:this.dialog,addPage:this.addDialog,setEditingPage:this.setEditingDialog}})}},B=(n("e9c4"),n("5319"),n("7db0"),n("890e")),U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"数据地址",prop:"url"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),n("el-form-item",{attrs:{label:"触发方式"}},[n("el-radio-group",{model:{value:e.form.refreshType,callback:function(t){e.$set(e.form,"refreshType",t)},expression:"form.refreshType"}},e._l(e.refreshType,(function(t,i){return n("el-radio",{key:i,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1),n("el-input-number",{staticStyle:{"margin-left":"20px"},attrs:{disabled:"fixed"!==e.form.refreshType},model:{value:e.form.refreshInterval,callback:function(t){e.$set(e.form,"refreshInterval",t)},expression:"form.refreshInterval"}})],1),n("el-collapse",{attrs:{accordion:""}},[n("el-collapse-item",{attrs:{title:"更多配置",name:"0"}},[n("el-form-item",{attrs:{label:"数据处理"}},[n("codemirror",{ref:"codeEditor",model:{value:e.form.handler,callback:function(t){e.$set(e.form,"handler",t)},expression:"form.handler"}})],1)],1)],1)],1)},V=[],X=(n("498a"),n("e6cf"),n("7aeb")),Y={name:"http",props:{dataSource:{type:Object,default:function(){return{}}}},data:function(){return{form:Object(i["a"])({name:"",url:"",refreshType:"once",refreshInterval:"",handler:"function handler(deps) {\nreturn deps.data\n}"},this.dataSource),refreshType:X["b"].options,rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],url:[{required:!0,message:"请输入地址",trigger:"blur"}]}}},methods:{getForm:function(){return Object(i["a"])(Object(i["a"])({},this.form),{},{url:this.form.url.trim(),handler:this.$refs.codeEditor.codemirror.getValue()})},checkForm:function(){var e=this;return new Promise((function(t,n){e.$refs.ruleForm.validate((function(i){i?t(e.getForm()):(console.log("error submit!!"),n(i))}))}))}}},q=Y,H=n("2877"),K=Object(H["a"])(q,U,V,!1,null,"14167fc0",null),W=K.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-collapse",{attrs:{accordion:""}},[n("el-collapse-item",{attrs:{title:"更多配置",name:"0"}},[n("el-form-item",{attrs:{label:"数据处理"}},[n("codemirror",{ref:"codeEditor",model:{value:e.form.handler,callback:function(t){e.$set(e.form,"handler",t)},expression:"form.handler"}})],1)],1)],1),n("div",[e._v(e._s(e.form.name))])],1)},Z=[],G={name:"static",props:{dataSource:{type:Object,default:function(){return{}}}},data:function(){return{form:Object(i["a"])({name:"",handler:"function handler(deps) {\nreturn deps.data\n}"},this.dataSource),rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},methods:{getForm:function(){return Object(i["a"])({},this.form)},checkForm:function(){var e=this;return new Promise((function(t,n){e.$refs.ruleForm.validate((function(i){i?t(e.getForm()):(console.log("error submit!!"),n(i))}))}))}}},Q=G,ee=Object(H["a"])(Q,J,Z,!1,null,"4fb29339",null),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},ie=[],ae={name:"csv"},le=ae,oe=Object(H["a"])(le,ne,ie,!1,null,"4171e414",null),re=oe.exports,se={name:"dataSourceManager",data:function(){return{activeName:0,dialog:!1,activeDataSource:{type:X["c"].code2value.HTTP_API}}},computed:Object(i["a"])({},Object(o["c"])("editor",["work"])),methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])("editor",["dataSourceManager"])),{},{handleSelectDataSourceType:function(e){this.activeDataSource={},this.activeDataSource.type=e.value,this.dialog=!this.dialog},renderAddAction:function(){var e=this.$createElement;return e("el-dropdown",{attrs:{trigger:"click"},style:"right: 25px; position: absolute;",on:{command:this.handleSelectDataSourceType}},[e("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(e){return e.stopPropagation()}}}),e("el-dropdown-menu",{slot:"dropdown"},[X["c"].options.map((function(t){return e("el-dropdown-item",{attrs:{command:t}},[t.label])}))])])},renderDataSourceList:function(){var e=this,t=this.$createElement;return this.work.datasources.length?this.work.datasources.map((function(n){return t("el-card",{class:"dataSource__card"},[t("div",{slot:"header",style:"display: flex"},[t("div",{style:"flex: 1"}),t("div",[t("el-button",{style:"padding: 3px 0",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(){return e.manageDataSource("delete",n)}}}),t("el-button",{style:"padding: 3px 0",attrs:{type:"text",icon:"el-icon-setting"},on:{click:function(){return e.manageDataSource("edit",n)}}}),t("el-button",{style:"padding: 3px 0",attrs:{type:"text",icon:"el-icon-refresh",disabled:n.type!==X["c"].code2value.HTTP_API},on:{click:function(){return e.updateDs(n)}}})])]),n.name?t("div",["名称：",n.name]):"",n.type===X["c"].code2value.HTTP_API?t("div",[n.url?t("div",["地址：",n.url]):"",n.refreshType?t("div",["触发方式：","once"===n.refreshType?"单次触发":"定时更新"]):""]):t("div")])})):t("el-empty",{attrs:{description:"无数据源"}})},updateDs:function(e){var t=this;e.request().then((function(){t.$message.success("数据源: ".concat(e.name," 更新成功"))}))},viewDataCenter:function(){var e=this.$createElement;return e("el-popover",{attrs:{trigger:"click",title:"数据中心预览"}},[e("el-button",{slot:"reference",attrs:{icon:"el-icon-view",type:"text"},style:"float: right"}),e("codemirror",{attrs:{value:JSON.stringify(B["a"],null,2)},on:{blur:function(e){B["a"].DS=JSON.parse(e.getValue().replace(/[\r\n\s+]/g,"")).DS}},style:"min-width: 500px;"})])},renderDialog:function(){var e=this,t=this.$createElement;return t("el-dialog",{attrs:{title:"".concat(this.$t("editor.sidebar.dataSource")," - ").concat(this.activeDataSource.type?X["c"].options.find((function(t){return t.value===e.activeDataSource.type})).label:""),visible:this.dialog,width:"600"},on:Object(i["a"])({},{"update:visible":function(t){e.dialog=t}})},[this.renderForm(),t("div",{style:"text-align: right;margin-top: 10px"},[t("el-button",{attrs:{type:"primary"},on:{click:this.submitForm}},["确认"]),t("el-button",{on:{click:function(){return e.dialog=!1}}},["取消"])])])},renderForm:function(){var e=this.$createElement;if(!this.dialog)return"";switch(this.activeDataSource.type){case X["c"].code2value.HTTP_API:return e(W,{ref:"form",attrs:{dataSource:this.activeDataSource,type:this.activeDataSource.type}});case X["c"].code2value.STATIC:return e(te,{ref:"form",attrs:{dataSource:this.activeDataSource,type:this.activeDataSource.type}});case X["c"].code2value.CSV:return e(re,{ref:"form",attrs:{dataSource:this.activeDataSource,type:this.activeDataSource.type}})}},submitForm:function(){var e=this;this.$refs.form.checkForm().then((function(t){var n=t.id?"edit":"add";e.manageDataSource(n,t),e.activeDataSource={}}))},manageDataSource:function(e,t){this.dataSourceManager({type:e,value:Object(i["a"])({},t)}),"add"!==e&&"edit"!==e||(this.activeDataSource=Object(i["a"])({},t),this.dialog=!this.dialog)}}),render:function(){var e=this,t=arguments[0];return t("div",[t("el-collapse",{attrs:{accordion:!0},model:{value:e.activeName,callback:function(t){e.activeName=t}}},[t("el-collapse-item",{attrs:{name:0}},[t("template",{slot:"title"},[t("span",[this.$t("editor.sidebar.dataSource")]),this.renderAddAction()]),this.renderDataSourceList(),this.viewDataCenter()])]),this.renderDialog()])}},ce={name:"EditorLeftPanel",data:function(){return{activeName:"plugin-list"}},render:function(){var e=this,t=arguments[0];return t("el-aside",{attrs:{width:"260px"},style:"background: #fff;padding: 10px;"},[t("el-tabs",{attrs:{tabPosition:"left"},class:"left_tab",model:{value:e.activeName,callback:function(t){e.activeName=t}}},[t("el-tab-pane",{attrs:{label:this.$t("editor.sidebar.components"),name:"plugin-list"}},[t(z)]),t("el-tab-pane",{attrs:{label:this.$t("editor.sidebar.pages"),name:"page-manager"}},["page-manager"===this.activeName?t(F):""]),t("el-tab-pane",{attrs:{label:this.$t("editor.sidebar.dialog"),name:"page-dialog"}},[t(N)]),t("el-tab-pane",{attrs:{label:this.$t("editor.sidebar.dataSource"),name:"data-source"}},[t(se)])])])}},ue=n("3835"),de=n("ade3"),me=(n("4fad"),n("ed08")),he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.editingElement?n("div",{staticClass:"box-model"},[e.boxModelPart?n("div",{staticClass:"prompt"},[e._v("设置 "+e._s(e.boxModelPart))]):n("div",[e._v("选择 margin/border/padding 进行设置")]),n("PositionCheckbox",{attrs:{label:"上","label-key":"top"}}),n("div",{staticClass:"middle"},[n("PositionCheckbox",{attrs:{label:"左","label-key":"left"}}),n("div",{ref:"margin",staticClass:"margin",class:{"margin-select":"margin"===e.boxModelPart},attrs:{"data-type":"margin"},on:{click:e.onBoxModelClick}},[e._v(" margin "),n("div",{ref:"border",staticClass:"border",class:{"border-select":"border"===e.boxModelPart},attrs:{"data-type":"border"}},[e._v(" border "),n("div",{ref:"padding",staticClass:"padding",class:{"padding-select":"padding"===e.boxModelPart},attrs:{"data-type":"padding"}},[e._v(" padding "),n("div",{staticClass:"content",attrs:{"data-type":"padding"}},[e._v(" "+e._s(e._f("digit")(e.commonStyle.width))+" x "+e._s(e._f("digit")(e.commonStyle.height))+" ")])])])]),n("PositionCheckbox",{attrs:{label:"右","label-key":"right"}})],1),n("PositionCheckbox",{attrs:{label:"下","label-key":"bottom"}}),e.isEditingBorder?n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{"line-height":"32px",display:"flex","margin-right":"4px"}},[n("span",[e._v("边框颜色：")]),n("el-color-picker",{attrs:{size:"mini",value:e.borderColor},on:{change:e.onColorChange}})],1),n("div",{staticStyle:{"line-height":"32px",display:"flex",flex:"1"}},[n("span",[e._v("边框样式：")]),n("el-select",{staticStyle:{flex:"1"},attrs:{value:e.borderStyle,size:"mini"},on:{change:e.onStyleChange}},e._l(e.borderStyleOptions,(function(t,i){return n("el-option",{key:i,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)]):e._e(),e.isEditingBorder?n("div",{staticStyle:{display:"flex","line-height":"32px"}},[n("span",[e._v("圆角：")]),e._l(e.borderRadius,(function(t,i){return n("el-input",{key:i,staticStyle:{width:"60px"},attrs:{value:t,type:"number",size:"mini",min:0},on:{input:function(t){e.onRadiusChange(t,i)}}})}))],2):e._e()],1):e._e()},pe=[],fe=(n("b680"),n("cca6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"position-checkbox"},[e.boxModelPart?[n("div",{staticClass:"flex"},[n("el-checkbox",{attrs:{checked:e.isChecked,size:"small"},on:{change:e.onCheckboxChange}}),n("div",{staticClass:"label"},[e._v(e._s(e.label))])],1)]:e._e(),e.boxModelPart&&e.isChecked?[n("el-input",{staticStyle:{width:"60px"},attrs:{type:"number",value:e.value,min:0,size:"mini"},on:{input:e.onInputNumberChange}}),n("el-select",{staticStyle:{width:"60px"},attrs:{value:e.unit,size:"mini"},on:{change:e.onUnitChange}},e._l(e.unitList,(function(t,i){return n("el-option",{key:i,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)]:e._e()],2)}),ve=[],be={name:"PositionCheckbox",props:{label:{type:String,default:""},labelKey:{type:String,default:""}},data:function(){return{isChecked:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])("editor",{editingElement:function(e){return e.editingElement}})),{},{boxModelPart:function(){return this.editingElement&&this.editingElement.commonStyle.boxModelPart},value:function(){var e=this.editingElement,t=this.labelKey,n=this.boxModelPart;return this.boxModelPart?e.commonStyle[n][t].value:""},unit:function(){var e=this.editingElement,t=this.labelKey,n=this.boxModelPart;return this.boxModelPart?e.commonStyle[n][t].unit:""},unitList:function(){return"border"===this.boxModelPart?["px","em"]:["px","%","em"]}}),methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])("editor",["setElementPosition"])),{},{onUnitChange:function(e){this.changeCommonStyle(e,"unit")},onCheckboxChange:function(e){this.isChecked=e},onInputNumberChange:function(e){this.changeCommonStyle(e)},changeCommonStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",n=this.boxModelPart,i=this.editingElement.commonStyle[n];Object.assign(i[this.labelKey],Object(de["a"])({},t,e)),this.setElementPosition(Object(de["a"])({},n,i))}}),watch:{value:{immediate:!0,handler:function(e){e&&(this.isChecked=!0)}}}},ge=be,ye=(n("0767"),Object(H["a"])(ge,fe,ve,!1,null,"0dbd0170",null)),xe=ye.exports,ke={name:"BoxModelEditor",components:{PositionCheckbox:xe},data:function(){return{borderStyleOptions:[{label:"无",value:"none"},{label:"实线",value:"solid"},{label:"双线",value:"double"},{label:"虚线",value:"dashed"},{label:"点状边框",value:"dotted"},{label:"3D 凹槽边框",value:"groove"}]}},computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])("editor",{editingElement:function(e){return e.editingElement}})),{},{boxModelPart:function(){var e;return null===(e=this.editingElement)||void 0===e?void 0:e.commonStyle.boxModelPart},commonStyle:function(){var e;return(null===(e=this.editingElement)||void 0===e?void 0:e.commonStyle)||{}},borderColor:function(){var e;return(null===(e=this.commonStyle)||void 0===e?void 0:e.border.color.value)||""},borderStyle:function(){var e;return(null===(e=this.commonStyle)||void 0===e?void 0:e.border.style.value)||""},borderRadius:function(){var e;return(null===(e=this.commonStyle)||void 0===e?void 0:e.border.radius)||[]},isEditingBorder:function(){return"border"===this.boxModelPart}}),filters:{digit:function(e){return e.toFixed(0)}},methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])("editor",["setElementPosition"])),{},{onBoxModelClick:function(e){var t=e.target.dataset.type;this.setElementPosition({boxModelPart:t})},onStyleChange:function(e){var t=this.boxModelPart,n=this.editingElement.commonStyle[t];Object.assign(n.style,{value:e}),this.setElementPosition(Object(de["a"])({},t,n))},onRadiusChange:function(e,t){console.log(e);var n=this.boxModelPart,i=this.editingElement.commonStyle[n];i.radius[t]=e,this.setElementPosition(Object(de["a"])({},n,i))},onColorChange:function(e){var t=this.boxModelPart,n=this.editingElement.commonStyle[t];Object.assign(n.color,{value:e}),"border"===t&&(this.editingElement.pluginProps.borderColor=e),this.setElementPosition(Object(de["a"])({},t,n))}})},we=ke,Ee=(n("91b7"),Object(H["a"])(we,he,pe,!1,null,"6bc05240",null)),Oe=Ee.exports,Pe={name:"PropEditor",props:{realEditingElement:{type:Object,default:function(){return null}}},data:function(){return{collapseActive:[1],loadCustomEditorFlag:!1,editorPositionConfig:[{type:"el-input",label:"上",key:"top"},{type:"el-input",label:"左",key:"left"},{type:"el-input",label:"宽",key:"width"},{type:"el-input",label:"高",key:"height"}]}},components:{BoxModelEditor:Oe},computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])("editor",{stateEditingElement:function(e){return e.editingElement}})),{},{editingElement:function(){return this.realEditingElement||this.stateEditingElement}}),methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])("editor",["setEditingElement","setElementPosition"])),{},{renderEditorPositionConfig:function(e){var t=this,n=this.editingElement.commonStyle;return e("el-form",{attrs:{inline:!0,size:"mini"}},[this.editorPositionConfig.map((function(i){var a=i.type,l=i.label,o=i.key,r={style:{width:"100px"},props:{type:"number",value:n[o],placeholder:"请输入".concat(o),formatter:function(e){return"".concat(l," ").concat(e)}},on:{input:function(e){var n=e;t.onPositionChange(o,n)}}};return e("el-form-item",{attrs:{label:l}},[e(a,r)])}))])},onPositionChange:function(e,t){this.setElementPosition(Object(de["a"])({},e,Number(t)))}}),render:function(e){var t=this;if(!this.editingElement)return e("div",["请选择一个元素"]);var n=Object(me["d"])(this.editingElement.name),a=n.$options.props;return e("el-collapse",{class:"right_prop_collapse",model:{value:t.collapseActive,callback:function(e){t.collapseActive=e}}},[e("el-collapse-item",{attrs:{name:0,title:"通用样式"}},[this.stateEditingElement?this.renderEditorPositionConfig(e):"",e(Oe)]),e("el-collapse-item",{attrs:{name:1,title:"属性设置"}},[e("el-form",{attrs:{className:"right_prop_form",size:"mini",inline:!1}},[Object.entries(a).filter((function(e){var t=Object(ue["a"])(e,2),n=(t[0],t[1]),i=!Object.prototype.hasOwnProperty.call(n,"visible")||n.visible;return i&&n.editor&&!n.editor.custom})).map((function(n){var a=Object(ue["a"])(n,2),l=a[0],o=a[1],r=o.editor,s={props:Object(i["a"])(Object(i["a"])({},r.props),{},{value:t.editingElement.pluginProps[l]}),on:{input:function(e){t.editingElement.pluginProps[l]=e.target?e.target.value:e},change:function(e){t.editingElement.pluginProps[l]=e.target?e.target.value:e}}};return e("el-form-item",{attrs:{label:r.label+":"}},[e(r.type,s)])}))])])])}},Se=(n("466d"),[{label:"进入",value:/进/},{label:"退出",value:/退/},{label:"强调",value:/强调|特殊/}]),_e=[{label:"",value:"空",children:[{label:"无",value:""}]},{label:"强调",value:"Attention Seekers",children:[{label:"旋转",value:"justRotate"},{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"跳动",value:"pulse"},{label:"抖动",value:"shake"},{label:"摇摆",value:"swing"},{label:"橡皮圈",value:"rubberBand"},{label:"果冻",value:"jello"},{label:"",value:"tada"},{label:"",value:"wobble"}]},{label:"弹跳进入",value:"Bouncing Entrances",children:[{label:"弹跳进入",value:"bounceIn"},{label:"向下弹跳进入",value:"bounceInDown"},{label:"向右弹跳进入",value:"bounceInLeft"},{label:"向左弹跳进入",value:"bounceInRight"},{label:"向上弹跳进入",value:"bounceInUp"}]},{label:"弹跳退出",value:"Bouncing Exits",children:[{label:"弹跳退出",value:"bounceOut"},{label:"向下弹跳退出",value:"bounceOutDown"},{label:"向左弹跳退出",value:"bounceOutLeft"},{label:"向右弹跳退出",value:"bounceOutRight"},{label:"向上弹跳退出",value:"bounceOutUp"}]},{label:"渐显进入",value:"Fading Entrances",children:[{label:"渐显进入",value:"fadeIn"},{label:"向下渐显进入",value:"fadeInDown"},{label:"由屏幕外向下渐显进入",value:"fadeInDownBig"},{label:"向右显进入",value:"fadeInLeft"},{label:"由屏幕外向右渐显进入",value:"fadeInLeftBig"},{label:"向左渐显进入",value:"fadeInRight"},{label:"由屏幕外向左渐显进入",value:"fadeInRightBig"},{label:"向上渐显进入",value:"fadeInUp"},{label:"由屏幕外向上渐显进入",value:"fadeInUpBig"}]},{label:"渐隐退出",value:"Fading Exits",children:[{label:"渐隐退出",value:"fadeOut"},{label:"向下渐隐退出",value:"fadeOutDown"},{label:"向下渐隐退出屏幕外",value:"fadeOutDownBig"},{label:"向左渐隐退出",value:"fadeOutLeft"},{label:"向左渐隐退出屏幕外",value:"fadeOutLeftBig"},{label:"向右渐隐退出",value:"fadeOutRight"},{label:"向右渐隐退出屏幕外",value:"fadeOutRightBig"},{label:"向上渐隐退出",value:"fadeOutUp"},{label:"向上渐隐退出屏幕外",value:"fadeOutUpBig"}]},{label:"翻动",value:"Flippers",children:[{label:"翻动",value:"flip"},{label:"纵向翻动",value:"flipInX"},{label:"横向翻动",value:"flipInY"},{label:"立体纵向翻动",value:"flipOutX"},{label:"立体横向翻动",value:"flipOutY"}]},{label:"加速进出",value:"Lightspeed",children:[{label:"加速进入",value:"lightSpeedIn"},{label:"加速退出",value:"lightSpeedOut"}]},{label:"旋转渐显",value:"Rotating Entrances",children:[{label:"旋转渐显",value:"rotateIn"},{label:"左下角旋转渐显",value:"rotateInDownLeft"},{label:"旋转渐显",value:"右下角rotateInDownRight"},{label:"左上角旋转渐显",value:"rotateInUpLeft"},{label:"右上角旋转渐显",value:"rotateInUpRight"}]},{label:"旋转渐隐",value:"Rotating Exits",children:[{label:"旋转渐隐",value:"rotateOut"},{label:"左下角旋转渐隐",value:"rotateOutDownLeft"},{label:"左下角旋转渐隐",value:"rotateOutDownRight"},{label:"左上角旋转渐隐",value:"rotateOutUpLeft"},{label:"右上角旋转渐隐",value:"rotateOutUpRight"}]},{label:"平移进入",value:"Sliding Entrances",children:[{label:"向上平移进入",value:"slideInUp"},{label:"向下平移进入",value:"slideInDown"},{label:"向右平移进入",value:"slideInLeft"},{label:"向左平移进入",value:"slideInRight"}]},{label:"平移退出",value:"Sliding Exits",children:[{label:"向上平移退出",value:"slideOutUp"},{label:"向下平移退出",value:"slideOutDown"},{label:"向左平移退出",value:"slideOutLeft"},{label:"向右平移退出",value:"slideOutRight"}]},{label:"放大进入",value:"Zoom Entrances",children:[{label:"放大进入",value:"zoomIn"},{label:"向下放大进入",value:"zoomInDown"},{label:"向右放大进入",value:"zoomInLeft"},{label:"向左放大进入",value:"zoomInRight"},{label:"向上放大进入",value:"zoomInUp"}]},{label:"缩小退出",value:"Zoom Exits",children:[{label:"缩小退出",value:"zoomOut"},{label:"向下缩小退出",value:"zoomOutDown"},{label:"向左缩小退出",value:"zoomOutLeft"},{label:"向右缩小退出",value:"zoomOutRight"},{label:"向上缩小退出",value:"zoomOutUp"}]},{label:"特殊效果",value:"Specials",children:[{label:"悬挂",value:"hinge"},{label:"滚动进入",value:"rollIn"},{label:"滚动退出",value:"rollOut"}]}],je={data:function(){return{activeNameTop:Se[0].label,activeNameLeft:"",activePreviewAnimation:""}},methods:{animationValueName:function(e){var t=_e.reduce((function(e,t){var n=t.children;return n.forEach((function(t){e[t.value]=t.label})),e}),{});return t[e]},renderAnimationOptions:function(e){var t=this,n=this.$createElement;return n("el-form",{attrs:{size:"mini"}},[n("el-form-item",{attrs:{label:this.$t("editor.editPanel.animation.type")+"："}},[n("el-button",{attrs:{type:"text"},on:{click:function(){t.drawer=!0}}},[this.$t("editor.editPanel.animation.list")])]),n("el-form-item",{class:"animation_slider",attrs:{label:this.$t("editor.editPanel.animation.duration")+"(s)："}},[n("el-slider",{attrs:{min:0,max:20,inputSize:"mini",showInput:!0},on:{change:function(t){e.duration=t}},model:{value:e.duration,callback:function(n){t.$set(e,"duration",n)}}})]),n("el-form-item",{class:"animation_slider",attrs:{label:this.$t("editor.editPanel.animation.delay")+"(s)："}},[n("el-slider",{attrs:{min:0,max:20,inputSize:"mini",showInput:!0},on:{change:function(t){e.delay=t}},model:{value:e.delay,callback:function(n){t.$set(e,"delay",n)}}})]),n("el-form-item",{class:"animation_slider",attrs:{label:this.$t("editor.editPanel.animation.iteration")+"(s)："}},[n("el-slider",{attrs:{min:0,max:20,inputSize:"mini",showInput:!0},on:{change:function(t){e.iterationCount=t}},model:{value:e.iterationCount,callback:function(n){t.$set(e,"iterationCount",n)}}})]),n("el-form-item",{attrs:{label:this.$t("editor.editPanel.animation.infinite")+"(s)："}},[n("el-switch",{on:{change:function(t){e.infinite=t}},model:{value:e.infinite,callback:function(n){t.$set(e,"infinite",n)}}})])])},renderAnimationstTabs:function(){var e=this,t=this.$createElement;return t("el-tabs",[Se.map((function(n){return t("el-tab-pane",{attrs:{label:n.label},key:n.label},[e.renderSecondAnimationTabs(_e.filter((function(e){return!!e.label.match(n.value)})))])}))])},renderSecondAnimationTabs:function(e){var t=this,n=this.$createElement;return n("el-tabs",{attrs:{tabPosition:"left"}},[e.map((function(e){return n("el-tab-pane",{attrs:{label:e.label},key:e.label},[n("el-row",{attrs:{gutter:20},style:"line-height: 1.5;"},[e.children.map((function(e){return n("el-col",{attrs:{span:12}},[n("div",{class:[t.activePreviewAnimation===e.value&&"animate__"+e.value+" animated","animation_item_card"],on:{mouseenter:function(){t.activePreviewAnimation=e.value},click:function(){t.drawer=!1,t.editingElement.animations[t.activeName].type=e.value}}},[e.label])])}))])])}))])}}},Ce={name:"AnimationEditor",mixins:[je],computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])("editor",["editingElement"])),{},{animationQueue:function(){return this.editingElement&&this.editingElement.animations||[]}}),data:function(){return{activeName:0,drawer:!1}},methods:{addAnimation:function(){this.editingElement.animations.push({type:"",duration:1,delay:0,iterationCount:1,infinite:!1}),this.activeName=this.editingElement.animations.length-1},runAnimate:function(){window.EditorApp.$emit("RUN_ANIMATIONS")}},render:function(){var e=this,t=arguments[0],n=this.editingElement;return n?t("div",[t("el-button-group",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:this.addAnimation}},[t("em",{class:"el-icon-circle-plus-outline"})," ",this.$t("editor.editPanel.animation.add")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:this.runAnimate}},[this.$t("editor.editPanel.animation.run"),t("em",{class:"el-icon-video-play"})])]),t("div",[!!this.editingElement.animations.length&&t("el-collapse",{attrs:{accordion:!0},model:{value:e.activeName,callback:function(t){e.activeName=t}}},[this.editingElement.animations.map((function(n,i){return t("el-collapse-item",{attrs:{name:i}},[t("template",{slot:"title"},["动画".concat(i+1," ").concat(e.animationValueName(n.type))]),e.renderAnimationOptions(n)])}))]),t("el-drawer",{attrs:{visible:this.drawer,direction:"ltr"},on:Object(i["a"])({},{"update:visible":function(t){e.drawer=t}})},[t("div",{style:"padding: 10px;"},[this.renderAnimationstTabs()])])])]):t("span",[this.$t("editor.editPanel.common.empty")])}},$e={name:"PageEditor",computed:Object(i["a"])({},Object(o["c"])("editor",["editingPage"])),render:function(){var e=arguments[0],t=this.editingPage.elements.find((function(e){return"k-background"===e.name}));return e("div",[e(Pe,{attrs:{realEditingElement:t}})])}},De=n("2638"),Me=n.n(De),Ie=(n("a434"),"\nreturn {\n  methods:{\n    clickFn(){\n      console.log('clickFn')\n    }\n  }\n}\n"),Le={name:"ScriptEditor",computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])("editor",["editingElement"])),{},{methodList:function(){return this.editingElement&&this.editingElement.methodList||[]},script:function(){return this.editingElement&&this.editingElement.script||[]}}),data:function(){return{dialog:!1,index:0,triggerList:[{value:"click",label:"点击"},{value:"change",label:"改变"},{value:"mouseover",label:"移入"},{value:"mouseout",label:"移出"},{value:"keydown",label:"按下键盘"},{value:"load",label:"完成加载"}],code:""}},methods:{delScript:function(e,t){this.script.splice(t,1)},addScript:function(e,t){e?(this.code=e,this.index=t):(this.code=Ie,this.index=null),this.dialog=!0},addMethods:function(){this.methodList.push({trigger:"",fnName:""})},submitForm:function(){null===this.index?this.script.push(this.code):this.script.splice(this.index,1,this.code),this.dialog=!1},renderMethodTable:function(){var e=this,t=this.$createElement;return this.methodList.map((function(n){return t("div",[t("span",["事件："]),t("el-select",{style:"width:95px;margin-right: 10px;",attrs:{size:"mini"},model:{value:n.trigger,callback:function(t){e.$set(n,"trigger",t)}}},[e.triggerList.map((function(e){return t("el-option",{attrs:{label:e.label,value:e.value}})}))]),t("span",["执行："]),t("el-input",{attrs:{size:"mini"},style:"width:85px",model:{value:n.fnName,callback:function(t){e.$set(n,"fnName",t)}}})])}))},renderScriptTable:function(){var e=this,t=this.$createElement;return t("div",["脚本",t("el-table",{attrs:{data:this.script}},[t("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),t("el-table-column",Me()([{attrs:{label:"脚本"}},{scopedSlots:{default:function(e){return"脚本".concat(e.$index+1)}}}])),t("el-table-column",Me()([{attrs:{label:"操作",width:"80px"}},{scopedSlots:{default:function(n){return t("div",[t("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"big"},on:{click:function(){return e.delScript(n.row,n.$index)}}}),t("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"big"},on:{click:function(){return e.addScript(n.row,n.$index)}}})])}}}]))])])}},render:function(){var e=this,t=arguments[0];return this.editingElement?t("div",[t("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(){return e.addScript()}}},["新增脚本"]),t("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(){return e.addMethods()}}},["新增事件"]),this.renderScriptTable(),this.renderMethodTable(),t("el-dialog",{attrs:{title:"新增-修改脚本",visible:this.dialog},on:Object(i["a"])({},{"update:visible":function(t){e.dialog=t}})},[t("codemirror",{style:"min-width: 500px;",model:{value:e.code,callback:function(t){e.code=t}}}),t("div",{style:"text-align: right;margin-top: 10px"},[t("el-button",{attrs:{type:"primary"},on:{click:this.submitForm}},["确认"]),t("el-button",{on:{click:function(){return e.dialog=!1}}},["取消"])])])]):t("div",["请选择一个元素"])}},Te={name:"EditorRightPanel",props:{width:{type:Number,default:320}},data:function(){return{activeName:"prop"}},render:function(){var e=this,t=arguments[0];return t("el-aside",{class:"right",attrs:{width:this.width+"px"},style:"background: #fff;padding: 0 12px"},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t}}},[t("el-tab-pane",{attrs:{label:this.$t("editor.editPanel.tab.prop"),name:"prop"}},[t(Pe)]),t("el-tab-pane",{attrs:{label:this.$t("editor.editPanel.tab.animation"),name:"animation"}},[t(Ce)]),t("el-tab-pane",{attrs:{label:this.$t("editor.editPanel.tab.script"),name:"script"}},[t(Le)]),t("el-tab-pane",{attrs:{label:this.$t("editor.editPanel.tab.page"),name:"page"}},[t($e)])])])}},ze=(n("00b4"),n("9653")),Ae=["nw","ne","sw","se","w","e","n","s"],Re={name:"Shape",props:["active","element"],mixins:[ze["a"]],methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])("editor",["setEditingElement","setElementCommonStyle","recordRect"])),{},{getPointStyle:function(e){var t=this.element.commonStyle.height,n=this.element.commonStyle.width,i=/n/.test(e),a=/s/.test(e),l=/w/.test(e),o=/e/.test(e),r=0,s=0;return 2===e.length?(r=l?0:n,s=i?0:t):((i||a)&&(r=n/2,s=i?0:t),(l||o)&&(r=l?0:n,s=t/2)),{left:"".concat(r,"px"),top:"".concat(s,"px"),cursor:e+"-resize"}},pointHandleMouseDown:function(e,t){var n=this;e.stopPropagation(),e.preventDefault();var a=Object(i["a"])({},this.element.commonStyle),l=e.clientX,o=e.clientY,r=function(e){var i=e.clientX,r=e.clientY,s=r-o,c=i-l,u=/n/.test(t),d=/s/.test(t),m=/w/.test(t),h=/e/.test(t),p=+a.height+(u?-s:d?s:0),f=+a.width+(m?-c:h?c:0);a.height=p>0?p:0,a.width=f>0?f:0,a.left=+a.left+(m?c:0),a.top=+a.top+(u?s:0),l=i,o=r,n.setElementCommonStyle(a)},s=function e(){n.recordRect(),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",s)},handleMousedown:function(e){var t=this;e.stopPropagation(),e.preventDefault(),this.setEditingElement(this.element);var n=Object(i["a"])({},this.element.commonStyle),a=e.clientY,l=e.clientX,o=n.top,r=n.left,s=function(e){e.stopPropagation(),e.preventDefault();var i=e.clientX,s=e.clientY;n.top=s-a+o,n.left=i-l+r,t.setElementCommonStyle(n)},c=function e(){t.recordRect(),document.removeEventListener("mousemove",s,!0),document.removeEventListener("mouseup",e,!0)};document.addEventListener("mousemove",s,!0),document.addEventListener("mouseup",c,!0)},divClick:function(e){e.stopPropagation(),e.preventDefault(),this.$emit("clearMenu",e)}}),render:function(){var e=this,t=arguments[0],n=this.element.getStyle({position:"absolute"}),i=n.top,a=n.left,l=n.width,o=n.height,r=n.position,s=this.element.getStyle({position:"absolute"})["z-index"];return t("div",{on:{click:this.divClick,mousedown:this.handleMousedown},style:{top:i,left:a,width:l,height:o,position:r,"z-index":s},class:{shape_active:this.active}},[this.active&&Ae.map((function(n){return t("div",{attrs:{point:n},style:e.getPointStyle(n),on:{mousedown:function(t){return e.pointHandleMouseDown(t,n)}},class:"shape_point"})})),this.$slots.default])}},Fe={name:"ContextMenu",methods:Object(i["a"])({},Object(o["b"])("editor",["copyElement","deleteElement"])),render:function(){var e=arguments[0];return e("el-card",{class:"context_menu"},[e("el-menu",[e("el-menu-item",{on:{click:this.copyElement}},[this.$t("editor.centerPanel.contextMenu.copy")]),e("el-menu-item",{on:{click:this.deleteElement}},[this.$t("editor.centerPanel.contextMenu.delete")])])])}},Ne={name:"edit",data:function(){return{contextmenu:[]}},computed:Object(i["a"])({},Object(o["c"])("editor",{elements:function(e){return e.editingPage.elements},editingElement:function(e){return e.editingElement}})),methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])("editor",["setEditingElement"])),{},{handleClickCanvas:function(e){e.target.classList.contains("shape_active")||this.setEditingElement(null),this.contextmenu=[]},bindContextMenu:function(e){e.preventDefault(),e.stopPropagation();var t=this.$el.getBoundingClientRect(),n=t.x,i=t.y;this.contextmenu=[e.clientX-n,e.clientY-i]},clearMenu:function(e){e.preventDefault(),e.stopPropagation(),this.contextmenu=[]}}),render:function(e){var t=this;return e("div",{style:"width:100%;height:100%;position: relative;overflow: hidden;",on:{contextmenu:this.clearMenu,click:function(e){t.handleClickCanvas(e)}}},[this.elements.map((function(n){if("k-background"===n.name)return e("k-background",{props:Object(i["a"])({},n.getProps({}))});var a=Object(i["a"])(Object(i["a"])({},n.getProps({})),{},{editorMode:"edit"}),l={props:a,style:Object(i["a"])(Object(i["a"])({},n.getStyle({position:"static"})),{},{width:"100%",height:"100%"}),on:{input:function(e){var t=e.value,i=e.pluginName;"k-text"===i&&(n.pluginProps.text=t)}}};return e(Re,{nativeOn:{contextmenu:function(e){t.bindContextMenu(e)}},on:{clearMenu:t.clearMenu},attrs:{element:n,active:t.editingElement===n}},[e(n.uuid,l)])})),this.contextmenu.length?e(Fe,{style:{left:this.contextmenu[0]+"px",top:this.contextmenu[1]+"px"}}):null])}},Be=n("1b39"),Ue={name:"dragLine",props:{type:{required:!0,type:String}},methods:{onMousedown:function(e){var t=this,n=e.clientX,i=e.clientY,a=function(e){e.preventDefault(),e.stopPropagation();var a=n-e.clientX,l=e.clientY-i;"ns"===t.$props.type?t.$emit("lineMove",l):t.$emit("lineMove",a),n-=a,i+=l},l=function e(){document.removeEventListener("mousemove",a,!0),document.removeEventListener("mouseup",e,!0)};document.addEventListener("mousemove",a,!0),document.addEventListener("mouseup",l,!0)}},render:function(){var e=arguments[0];return e("div",{class:"ns"===this.$props.type?"dragLine dragLine_ns":"dragLine dragLine_ew",on:{mousedown:this.onMousedown}},[e("div",{class:"dragLine_button"},[e("div",{class:"dragLine_button_icon"})])])}},Ve={name:"EditorCanvas",data:function(){return{isPreviewMode:!0}},computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])("editor",["work","editingPage","scaleRate"])),Object(o["c"])("editor",{elements:function(e){return e.editingPage.elements}})),methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])("editor",["updateWork","updateEditingPageWidth","updateEditingPageHeight","setEditingElement"])),{},{radioChange:function(e){e||this.setEditingElement()}}),render:function(){var e=this,t=arguments[0];return t("el-container",{style:"background: #f1f3f5"},[t("el-main",{attrs:{id:"canvas_main"},style:"min-width: 400px;"},[t("div",{class:"canvas_group"},[t("el-radio-group",{attrs:{size:"mini"},on:{change:this.radioChange},model:{value:e.isPreviewMode,callback:function(t){e.isPreviewMode=t}}},[t("el-radio-button",{attrs:{label:!0}},[this.$t("editor.centerPanel.mode.edit")]),t("el-radio-button",{attrs:{label:!1}},[this.$t("editor.centerPanel.mode.preview")])])]),t("div",{class:"canvas_wrapper"},[t("div",{style:{transform:"scale(".concat(this.scaleRate,")"),"transform-origin":"center top","padding-top":"50px"}},[t("div",{class:"canvas_wrapper_view",style:{width:"".concat(this.editingPage.width,"px"),height:"".concat(this.editingPage.height,"px")}},[this.isPreviewMode?t(Ne):t(Be["a"],{attrs:{elements:this.elements,height:this.editingPage.height}})]),t("div",{class:"canvas_wrapper_height",style:{top:"".concat(1*this.editingPage.height+50,"px")}},[t("div",{class:"canvas_wrapper_height_drag"},[t(Ue,{attrs:{type:"ns"},on:{lineMove:function(t){e.updateEditingPageHeight({height:e.editingPage.height+t})}}})]),t("div",{class:"canvas_wrapper_height_input"},[t("el-input",{attrs:{type:"number",size:"mini"},style:"width:80px;margin:0 4px;",on:{change:function(t){e.updateEditingPageWidth({width:t})}},model:{value:e.editingPage.width,callback:function(t){e.$set(e.editingPage,"width",t)}}}),t("span",["x"]),t("el-input",{attrs:{type:"number",size:"mini"},style:"width:80px;margin:0 4px;",on:{change:function(t){e.updateEditingPageHeight({height:t})}},model:{value:e.editingPage.height,callback:function(t){e.$set(e.editingPage,"height",t)}}}),t("span",["px"])])])])])])])}},Xe=n("9b6a"),Ye=[{icon:"Kchexiao",i18nTooltip:"editor.fixedTool.undo",hotkeyTooltip:"(ctrl+z)",hotkey:"ctrl&z,⌘&z",disabled:"canUndo",onClick:function(){me["g"].undo()}},{icon:"Kzhongzuo",i18nTooltip:"editor.fixedTool.redo",hotkeyTooltip:"(ctrl+y)",hotkey:"ctrl&y,⌘&y",disabled:"canRedo",onClick:function(){me["g"].redo()}},{icon:"Kfangda",i18nTooltip:"editor.fixedTool.zoomOut",hotkeyTooltip:"(ctrl +)",hotkey:"ctrl&=,⌘&=",onClick:function(){this.updateScaleRate(.25)}},{icon:"Ksuoxiao",i18nTooltip:"editor.fixedTool.zoomIn",hotkeyTooltip:"(ctrl -)",hotkey:"ctrl&-,⌘&-",onClick:function(){this.updateScaleRate(-.25)}}],qe={name:"FixedTools",computed:Object(i["a"])({},Object(o["c"])("editor",{scaleRate:function(e){return e.scaleRate}})),methods:Object(i["a"])({},Object(o["b"])("editor",["updateScaleRate"])),data:function(){return{undoRedoHistory:me["g"]}},mounted:function(){var e=this;Ye.map((function(t){t.hotkey&&Object(Xe["a"])(t.hotkey,{splitKey:"&"},(function(n){n.preventDefault(),n.stopPropagation(),t.onClick&&t.onClick.call(e)}))}))},render:function(){var e=this,t=arguments[0];return t("el-aside",{attrs:{width:"40px"},style:"overflow: hidden;background: #fff; border: 1px solid #eee"},[t("el-button-group",{class:"tools_button_group"},[Ye.map((function(n){return t("el-tooltip",{attrs:{effect:"dark",placement:"top",content:e.$t(n.i18nTooltip,{hotkey:n.hotkeyTooltip})}},[t("el-button",{attrs:{type:"text",disabled:!!n.disabled&&!e.undoRedoHistory[n.disabled]},on:{click:function(){return n.onClick.call(e)}}},[t("em",{class:["iconfont",n.icon]})])])}))]),t("div",{style:"font-size: 14px;text-align: center;"},[100*this.scaleRate,"%"])])}},He={name:"PreviewDialog",props:["visible","work"],computed:{releaseUrl:function(){return"http://localhost:3000/v1/work/preview?id=".concat(this.work.id,"&view_mode=preview")}},render:function(){var e=this,t=arguments[0];return t("div",{class:"k_dialog",directives:[{name:"show",value:this.visible}]},[t("div",{class:"k_dialog__bg"}),t("div",{class:"k_dialog__wrap"},[t("div",{class:"k_dialog__wrap__main"},[t("em",{class:"k_dialog__wrap__close el-icon-circle-close",on:{click:function(){e.$emit("update:visible",!1)}}}),t("div",{class:"iphone"},[t("div",{class:"iphone__top"}),t("div",{class:"iphone__main"},[this.visible&&t("iframe",{attrs:{id:"iframe-for-preview",src:this.releaseUrl,frameBorder:"0"},style:"height: 100%;width: 100%;"})]),t("img",{attrs:{src:n("8407"),alt:"iphone"},class:"iphone__bg"})])])])])}};window.EditorApp=new l.a,l.a.use(s.a);var Ke={name:"CoreEditor",components:{Header:c["a"]},computed:Object(i["a"])({},Object(o["c"])("editor",["work"])),props:{workId:{type:[Number,String]}},data:function(){return{width:320,previewDialogVisible:!1}},created:function(){var e=this;this.workId?Object(_["b"])(this.workId).then((function(t){var n=t.data,i=n.data.work;console.log(i),i.pages=i.pages.map((function(e){return e.elements=e.elements.map((function(e){return new j["a"](e)})),new C["a"](e)})),i.dialog=i.dialog.map((function(e){return e.elements=e.elements.map((function(e){return new j["a"](e)})),new $["a"](e)})),e.updateWork(i),e.setEditingPage()})):this.$message.error("no work id!")},methods:Object(i["a"])(Object(i["a"])({},Object(o["b"])("editor",["updateWork","setEditingPage"])),{},{handlePreview:function(){this.previewDialogVisible=!0},save:function(){var e=this;Object(_["e"])(this.work).then((function(t){var n=t.data;200===n.code&&e.$message({message:"保存成功",type:"success"})}))}}),render:function(){var e=this,t=arguments[0];return t("el-container",{style:{height:"100vh"}},[t("el-header",{style:"background-color: #031529;"},[t(c["a"],[t(u,{slot:"headr_menu",on:{preview:this.handlePreview,save:this.save}})])]),t("el-container",[t(ce),t(Ve),t("el-aside",{attrs:{width:"3px"},style:"overflow: visible;"},[t(Ue,{attrs:{type:"ew"},on:{lineMove:function(t){e.width+=t}}})]),t(qe),t(Te,{attrs:{width:this.width}})]),t(He,{attrs:{visible:this.previewDialogVisible,work:this.work},on:Object(i["a"])({},{"update:visible":function(t){e.previewDialogVisible=t}})})])},install:function(e){e.component(Ke.name,Ke)}};"undefined"!==typeof window&&window.Vue&&Ke.install(window.Vue);var We,Je,Ze=Ke,Ge={components:{CoreEditor:Ze},render:function(){var e=arguments[0];return e(Ze,{attrs:{workId:this.$route.params.workId}})}},Qe=Ge,et=Object(H["a"])(Qe,We,Je,!1,null,null,null);t["default"]=et.exports},fea5:function(e,t,n){}}]);