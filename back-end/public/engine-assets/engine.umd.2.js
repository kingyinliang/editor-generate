((typeof self !== 'undefined' ? self : this)["webpackJsonpengine"] = (typeof self !== 'undefined' ? self : this)["webpackJsonpengine"] || []).push([[2],{

/***/ "0767":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_position_checkbox_vue_vue_type_style_index_0_id_0dbd0170_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("fea5");
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_position_checkbox_vue_vue_type_style_index_0_id_0dbd0170_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_position_checkbox_vue_vue_type_style_index_0_id_0dbd0170_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__);
/* unused harmony reexport * */


/***/ }),

/***/ "7386":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var core_preview__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("1b39");

/* harmony default export */ __webpack_exports__["a"] = ({
  name: 'pageView',
  props: ['page'],
  render: function render() {
    var h = arguments[0];
    return h("div", {
      "class": 'page_view',
      "style": {
        height: this.page.height * 0.5 + 'px'
      }
    }, [h("div", {
      "class": 'page_view_main',
      "style": {
        height: this.page.height + 'px',
        top: -this.page.height * 0.25 + 'px'
      }
    }, [h(core_preview__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"], {
      "attrs": {
        "elements": this.page.elements
      }
    })]), h("div", {
      "class": 'page_view_main',
      "style": {
        height: this.page.height + 'px',
        top: -this.page.height * 0.25 + 'px'
      }
    })]);
  }
});

/***/ }),

/***/ "8407":
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "img/iphone.b989282b.png";

/***/ }),

/***/ "91b7":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_box_model_vue_vue_type_style_index_0_id_6bc05240_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("9d19");
/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_box_model_vue_vue_type_style_index_0_id_6bc05240_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_box_model_vue_vue_type_style_index_0_id_6bc05240_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__);
/* unused harmony reexport * */


/***/ }),

/***/ "9d19":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ "eaaf":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__("5530");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.number.constructor.js
var es_number_constructor = __webpack_require__("a9e3");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js
var es_array_map = __webpack_require__("d81d");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.name.js
var es_function_name = __webpack_require__("b0c0");

// EXTERNAL MODULE: external {"commonjs":"vue","commonjs2":"vue","root":"Vue"}
var external_commonjs_vue_commonjs2_vue_root_Vue_ = __webpack_require__("8bbf");
var external_commonjs_vue_commonjs2_vue_root_Vue_default = /*#__PURE__*/__webpack_require__.n(external_commonjs_vue_commonjs2_vue_root_Vue_);

// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js
var vuex_esm = __webpack_require__("2f62");

// EXTERNAL MODULE: ./node_modules/k-generate-components/lib/k-generate-components.common.js
var k_generate_components_common = __webpack_require__("f05e");
var k_generate_components_common_default = /*#__PURE__*/__webpack_require__.n(k_generate_components_common);

// EXTERNAL MODULE: ./src/components/header/index.vue + 9 modules
var header = __webpack_require__("e725");

// CONCATENATED MODULE: ./src/components/header/headerMenu.js
/* harmony default export */ var headerMenu = ({
  name: 'HeaderMenu',
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("div", [h("el-button", {
      "attrs": {
        "type": "primary",
        "size": "mini"
      },
      "on": {
        "click": function click() {
          _this.$emit('preview');
        }
      }
    }, [this.$t('editor.header.preview')]), h("el-button", {
      "attrs": {
        "size": "mini"
      },
      "on": {
        "click": function click() {
          _this.$emit('save');
        }
      }
    }, [this.$t('editor.header.save')]), h("el-button", {
      "attrs": {
        "size": "mini"
      }
    }, [this.$t('editor.header.publish')])]);
  }
});
// EXTERNAL MODULE: ./src/assets/scss/editor.scss
var scss_editor = __webpack_require__("9e07");

// EXTERNAL MODULE: ./src/assets/scss/plugins.scss
var plugins = __webpack_require__("0b1f");

// EXTERNAL MODULE: ./node_modules/animate.css/animate.css
var animate = __webpack_require__("77ed");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js
var es_regexp_exec = __webpack_require__("ac1f");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.split.js
var es_string_split = __webpack_require__("1276");

// CONCATENATED MODULE: ./src/core/plugins/editor/k-upload-editor.js


/* harmony default export */ var k_upload_editor = ({
  name: 'k-upload-editor',
  props: {
    value: String,
    default: ''
  },
  data: function data() {
    return {
      fileReader: {}
    };
  },
  mounted: function mounted() {
    this.fileReader = new FileReader();
  },
  methods: {
    httpRequest: function httpRequest(options) {
      var _this = this;

      var file = options.file;

      if (file) {
        this.fileReader.readAsDataURL(file);
      }

      this.fileReader.onload = function () {
        var base64Str = _this.fileReader.result;
        options.onSuccess(base64Str.split(',')[1], file);
      };
    },
    success: function success(res) {
      res = 'data:image/gif;base64,' + res;
      this.$emit('change', res);
    },
    removeFile: function removeFile() {
      this.$refs.imgUpload.clearFiles();
      this.$emit('change', '');
    }
  },
  render: function render() {
    var _this2 = this;

    var h = arguments[0];
    return h("div", [h("div", {
      "directives": [{
        name: "show",
        value: this.value
      }],
      "class": 'k-upload',
      "on": {
        "click": this.removeFile
      }
    }, [h("div", {
      "class": 'el-upload'
    }, [h("img", {
      "attrs": {
        "src": this.value,
        "alt": ""
      }
    }), h("div", {
      "class": "k-upload_del"
    }, [h("em", {
      "class": "el-icon-delete"
    })])])]), h("el-upload", {
      "directives": [{
        name: "show",
        value: !this.value
      }],
      "ref": 'imgUpload',
      "class": 'k-upload',
      "attrs": {
        "action": '',
        "limit": 1,
        "showFileList": false,
        "httpRequest": function httpRequest(options) {
          return _this2.httpRequest(options);
        },
        "onSuccess": function onSuccess(res) {
          return _this2.success(res);
        }
      }
    }, [h("em", {
      "class": "el-icon-plus avatar-uploader-icon"
    })])]);
  }
});
// CONCATENATED MODULE: ./src/core/plugins/editor/k-select-editor.js

/* harmony default export */ var k_select_editor = ({
  name: 'k-select-editor',
  props: {
    options: {
      type: Array,
      default: function _default() {
        return [];
      }
    },
    value: {
      type: String,
      default: ''
    }
  },
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("el-select", {
      "attrs": {
        "value": this.value
      },
      "on": {
        "change": function change(e) {
          return _this.$emit('change', e);
        }
      }
    }, [this.options.map(function (item) {
      return h("el-option", {
        "attrs": {
          "label": item.label,
          "value": item.value
        }
      });
    })]);
  }
});
// CONCATENATED MODULE: ./src/core/plugins/editor/k-radio-editor.js

/* harmony default export */ var k_radio_editor = ({
  name: 'k-radio-editor',
  props: {
    options: {
      type: Array,
      default: function _default() {
        return [];
      }
    },
    value: {
      type: String,
      default: ''
    }
  },
  data: function data() {
    return {
      model: ''
    };
  },
  mounted: function mounted() {
    this.model = this.value;
  },
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("el-radio-group", {
      "attrs": {
        "size": "mini"
      },
      "on": {
        "change": function change(e) {
          return _this.$emit('change', e);
        }
      },
      "model": {
        value: _this.model,
        callback: function callback($$v) {
          _this.model = $$v;
        }
      }
    }, [this.options.map(function (item) {
      return h("el-radio-button", {
        "attrs": {
          "label": item.value
        }
      }, [item.label]);
    })]);
  }
});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js
var es_array_slice = __webpack_require__("fb6a");

// CONCATENATED MODULE: ./src/core/plugins/editor/k-colors-panel-editor.js


/* harmony default export */ var k_colors_panel_editor = ({
  name: 'k-colors-panel-editor',
  props: {
    value: {
      type: Array,
      default: function _default() {
        return [];
      }
    }
  },
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("div", [this.value.map(function (colorString, index) {
      return h("el-color-picker", {
        "attrs": {
          "size": "small",
          "value": colorString
        },
        "on": {
          "change": function change(newColorString) {
            var colors = _this.value.slice(0);

            colors[index] = newColorString;

            _this.$emit('change', colors);
          }
        }
      });
    })]);
  }
});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/typeof.js
var esm_typeof = __webpack_require__("53ca");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js
var es_array_filter = __webpack_require__("4de4");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js
var es_object_to_string = __webpack_require__("d3b7");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.values.js
var es_object_values = __webpack_require__("07ac");

// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js
var web_dom_collections_for_each = __webpack_require__("159b");

// EXTERNAL MODULE: ./node_modules/x-data-spreadsheet/src/index.js + 85 modules
var src = __webpack_require__("8d4a");

// EXTERNAL MODULE: ./node_modules/papaparse/papaparse.min.js
var papaparse_min = __webpack_require__("369b");
var papaparse_min_default = /*#__PURE__*/__webpack_require__.n(papaparse_min);

// CONCATENATED MODULE: ./src/core/plugins/editor/k-csv-import-editor.js

var validFileMimeTypes = ['text/csv', 'text/x-csv', 'application/vnd.ms-excel', 'text/plain'];
/* harmony default export */ var k_csv_import_editor = ({
  name: 'k-csv-import-editor',
  methods: {
    checkMimeType: function checkMimeType(type) {
      return validFileMimeTypes.indexOf(type) > -1;
    },
    validFileMimeType: function validFileMimeType(e) {
      e.preventDefault();
      var file = this.$refs.csv.files[0];
      var isValidFileMimeType = this.checkMimeType(file.type);
      if (isValidFileMimeType) this.loadFile();
    },
    loadFile: function loadFile() {
      var _this = this;

      this.readFile(function (output) {
        // const sample = Papa.parse(output, { preview: 2, skipEmptyLines: true })
        var csv = papaparse_min_default.a.parse(output, {
          skipEmptyLines: true
        });

        _this.$emit('parse', csv);

        _this.$refs.input.value = '';
      });
    },
    readFile: function readFile(callback) {
      var file = this.$refs.csv.files[0];

      if (file) {
        var reader = new FileReader();
        reader.readAsText(file, 'UTF-8');

        reader.onload = function (evt) {
          callback(evt.target.result);
        };

        reader.onerror = function () {};
      }
    }
  },
  render: function render() {
    var h = arguments[0];
    var randomId = +new Date();
    return h("div", {
      "style": "height: 24px;"
    }, [h("label", {
      "attrs": {
        "for": randomId
      },
      "class": "el-button el-button--primary el-button--mini"
    }, ["\u9009\u62E9\u5BFC\u5165 csv \u6587\u4EF6"]), h("input", {
      "ref": "csv",
      "attrs": {
        "id": randomId,
        "type": "file",
        "name": "csv"
      },
      "on": {
        "change": this.validFileMimeType
      },
      "style": "visibility:hidden;"
    }, ["xxxx"])]);
  }
});
// CONCATENATED MODULE: ./src/core/plugins/editor/k-excel-editor.js









function excel2BinaryMatrix(excelData) {
  var rowsArray = Object.values(excelData.rows).filter(function (item) {
    return Object(esm_typeof["a" /* default */])(item) === 'object';
  });
  var dataset = rowsArray.map(function (row) {
    var cells = Object.values(row.cells).map(function (item) {
      return item.text;
    });
    return cells;
  });
  console.log('dataset', dataset);
  return dataset;
}

function binaryMatrix2excel(binaryMatrix) {
  var excelData = binaryMatrix.map(function (row) {
    var cells = {};
    row.forEach(function (cellValue, cellIndex) {
      cells[cellIndex] = {
        text: cellValue
      };
    });
    return {
      cells: cells
    };
  });
  return excelData;
}

/* harmony default export */ var k_excel_editor = ({
  name: 'k-excel-editor',
  props: {
    value: {
      type: Array,
      default: function _default() {
        return [];
      }
    },
    formatter: {
      type: Function,
      default: excel2BinaryMatrix
    }
  },
  computed: {
    innerItems: {
      get: function get() {
        return binaryMatrix2excel(this.value);
      },
      set: function set(val) {
        this.$emit('input', val);
      }
    }
  },
  watch: {
    value: function value() {
      this.refreshSheet({
        rows: this.innerItems
      });
    }
  },
  methods: {
    binaryMatrix2excel: function binaryMatrix2excel(binaryMatrix) {
      var excelData = binaryMatrix.map(function (row) {
        var cells = {};
        row.forEach(function (cellValue, cellIndex) {
          cells[cellIndex] = {
            text: cellValue
          };
        });
        return {
          cells: cells
        };
      });
      return excelData;
    },
    parseCSV: function parseCSV(csv) {
      var sheetData = this.binaryMatrix2excel(csv.data);
      this.$emit('change', csv.data);
      this.refreshSheet({
        rows: sheetData
      });
    },
    refreshSheet: function refreshSheet(data) {
      this.sheet.loadData(data);
      this.sheet.reRender();
    },
    initSheet: function initSheet() {
      var _this = this;

      var ele = this.$refs.excel;
      return this.sheet || new src["a" /* default */](ele, {
        showToolbar: false,
        showGrid: true,
        showContextmenu: true
      }).change(function (excelData) {
        _this.$emit('change', _this.formatter(excelData));
      });
    }
  },
  mounted: function mounted() {
    this.sheet = this.initSheet();
    this.refreshSheet({
      rows: this.innerItems
    });
  },
  render: function render() {
    var h = arguments[0];
    return h("div", {
      "style": "max-height: 320px;overflow:scroll;"
    }, [h("div", {
      "style": "line-height:2;"
    }, [h("span", ["\u65B9\u68481: ", h(k_csv_import_editor, {
      "on": {
        "parse": this.parseCSV
      }
    })]), h("span", ["\u65B9\u68482: \u76F4\u63A5\u7F16\u8F91 Excel"]), h("div", {
      "ref": "excel",
      "style": "margin-right: 12px;width: 100%;overflow: scroll"
    })])]);
  }
});
// CONCATENATED MODULE: ./src/core/plugins/editor/k-color-picker.js
/* harmony default export */ var k_color_picker = ({
  name: 'k-color-picker',
  props: {
    value: {
      type: String,
      default: function _default() {
        return '';
      }
    }
  },
  data: function data() {
    return {
      inputVal: ''
    };
  },
  mounted: function mounted() {
    this.inputVal = this.value;
  },
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("div", {
      "style": "display: flex;"
    }, [h("el-color-picker", {
      "attrs": {
        "size": "small",
        "showAlpha": true,
        "value": this.value
      },
      "on": {
        "change": function change(newColorString) {
          _this.inputVal = newColorString;

          _this.$emit('change', newColorString);
        }
      }
    }), h("el-input", {
      "attrs": {
        "type": "text",
        "size": "small"
      },
      "style": "flex: 1; margin-left: 15px;",
      "on": {
        "change": function change(newColorString) {
          _this.$emit('change', newColorString);
        }
      },
      "model": {
        value: _this.inputVal,
        callback: function callback($$v) {
          _this.inputVal = $$v;
        }
      }
    })]);
  }
});
// EXTERNAL MODULE: ./node_modules/vue-codemirror/dist/vue-codemirror.js
var vue_codemirror = __webpack_require__("8f94");
var vue_codemirror_default = /*#__PURE__*/__webpack_require__.n(vue_codemirror);

// EXTERNAL MODULE: ./node_modules/codemirror/mode/javascript/javascript.js
var javascript = __webpack_require__("f9d4");

// EXTERNAL MODULE: ./node_modules/codemirror/theme/base16-dark.css
var base16_dark = __webpack_require__("8c2e");

// EXTERNAL MODULE: ./node_modules/codemirror/lib/codemirror.css
var codemirror = __webpack_require__("a7be");

// CONCATENATED MODULE: ./src/core/plugins/editor/index.js












external_commonjs_vue_commonjs2_vue_root_Vue_default.a.use(vue_codemirror_default.a, {
  options: {
    tabSize: 2,
    mode: 'text/javascript',
    theme: 'base16-dark',
    lineNumbers: true,
    line: true
  },
  events: ['scroll']
});
external_commonjs_vue_commonjs2_vue_root_Vue_default.a.component(k_upload_editor.name, k_upload_editor);
external_commonjs_vue_commonjs2_vue_root_Vue_default.a.component(k_select_editor.name, k_select_editor);
external_commonjs_vue_commonjs2_vue_root_Vue_default.a.component(k_radio_editor.name, k_radio_editor);
external_commonjs_vue_commonjs2_vue_root_Vue_default.a.component(k_colors_panel_editor.name, k_colors_panel_editor);
external_commonjs_vue_commonjs2_vue_root_Vue_default.a.component(k_excel_editor.name, k_excel_editor);
external_commonjs_vue_commonjs2_vue_root_Vue_default.a.component(k_color_picker.name, k_color_picker);
// EXTERNAL MODULE: ./src/assets/icon/iconfont.css
var iconfont = __webpack_require__("ed2c");

// EXTERNAL MODULE: ./src/utils/api.js
var api = __webpack_require__("7c15");

// EXTERNAL MODULE: ./src/core/models/element.js
var models_element = __webpack_require__("a545");

// EXTERNAL MODULE: ./src/core/models/page.js
var models_page = __webpack_require__("a32b");

// EXTERNAL MODULE: ./src/core/models/dialog.js
var models_dialog = __webpack_require__("70c0");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js
var es_array_concat = __webpack_require__("99af");

// EXTERNAL MODULE: ./src/core/plugins/index.js + 7 modules
var core_plugins = __webpack_require__("9481");

// EXTERNAL MODULE: ./src/core/mixins/i18n/index.js
var i18n = __webpack_require__("558a");

// CONCATENATED MODULE: ./src/core/mixins/drag/index.js


/* harmony default export */ var drag = ({
  computed: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', ['work', 'editingPage'])),
  methods: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['addElement'])), {}, {
    handleDragStartFromMixin: function handleDragStartFromMixin(plugin, e) {
      var _this = this;

      var dragDom = e.currentTarget.cloneNode(true);
      document.body.appendChild(dragDom);
      dragDom.classList.add('drag_plugin_button');
      dragDom.style.left = e.clientX - e.layerX + 'px';
      dragDom.style.top = e.clientY - e.layerY + 'px';

      var move = function move(event) {
        dragDom.style.left = event.clientX - e.layerX + 'px';
        dragDom.style.top = event.clientY - e.layerY + 'px';
      };

      var up = function up(event) {
        document.body.removeChild(dragDom);
        document.removeEventListener('mousemove', move, true);
        document.removeEventListener('mouseup', up, true);
        var position = document.querySelector('.canvas_wrapper_view').getBoundingClientRect();

        if (position.left < event.clientX && event.clientX < position.left + _this.editingPage.width && position.top < event.clientY && event.clientY < position.top + _this.work.height) {
          _this.addElement(Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, plugin), {}, {
            dragStyle: {
              left: event.clientX - e.layerX - position.left,
              top: event.clientY - e.layerY - position.top
            }
          }));
        }
      };

      document.addEventListener('mousemove', move, true);
      document.addEventListener('mouseup', up, true);
    }
  })
});
// CONCATENATED MODULE: ./src/core/editor/leftPanel/pluginList/plugin-options.js


/* harmony default export */ var plugin_options = ({
  name: 'plugin-options',
  data: function data() {
    return {
      visible: false,
      isIndeterminate: false,
      checkAll: true,
      checkedData: [],
      pluginArr: [// {
        //   title: '按钮',
        //   i18nTitle: {
        //     'en-US': 'Button',
        //     'zh-CN': '按钮'
        //   },
        //   icon: 'Kbutton',
        //   visible: true,
        //   name: 'k-button'
        // },
        // {
        //   title: '容器',
        //   i18nTitle: {
        //     'en-US': 'div',
        //     'zh-CN': '容器'
        //   },
        //   icon: 'Kdiv',
        //   visible: true,
        //   name: 'k-div'
        // },
      ]
    };
  },
  mounted: function mounted() {
    this.checkedData = this.pluginArr;
    this.$emit('setPlugin', this.checkedData);
  },
  methods: {
    handleCheckAllChange: function handleCheckAllChange(val) {
      this.checkedData = val ? this.pluginArr : [];
      this.isIndeterminate = false;
    },
    handleCheckedChange: function handleCheckedChange(val) {
      this.checkAll = val.length === this.pluginArr.length;
      this.isIndeterminate = val.length > 0 && val.length < this.pluginArr.length;
    },
    setPlugin: function setPlugin() {
      this.$emit('setPlugin', this.checkedData);
      this.visible = false;
    }
  },
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("div", [h("el-button", {
      "class": 'plugin-options_button',
      "attrs": {
        "size": 'mini'
      },
      "on": {
        "click": function click() {
          return _this.visible = true;
        }
      }
    }, ["\u914D\u7F6E\u7EC4\u4EF6\u5217\u8868"]), h("el-dialog", {
      "attrs": {
        "title": "组件列表",
        "visible": this.visible
      },
      "on": Object(objectSpread2["a" /* default */])({}, {
        'update:visible': function updateVisible(val) {
          _this.visible = val;
        }
      })
    }, [h("el-checkbox", {
      "style": "margin-bottom: 20px;",
      "attrs": {
        "indeterminate": this.isIndeterminate
      },
      "on": {
        "change": this.handleCheckAllChange
      },
      "model": {
        value: _this.checkAll,
        callback: function callback($$v) {
          _this.checkAll = $$v;
        }
      }
    }, ["\u5168\u9009"]), h("el-checkbox-group", {
      "on": {
        "change": this.handleCheckedChange
      },
      "model": {
        value: _this.checkedData,
        callback: function callback($$v) {
          _this.checkedData = $$v;
        }
      }
    }, [this.pluginArr.map(function (item) {
      return h("el-checkbox", {
        "attrs": {
          "label": item
        }
      }, [item.title]);
    })]), h("div", {
      "style": "text-align: right;"
    }, [h("el-button", {
      "attrs": {
        "size": "small"
      },
      "on": {
        "click": function click() {
          return _this.visible = false;
        }
      }
    }, ["\u53D6 \u6D88"]), h("el-button", {
      "attrs": {
        "type": "primary",
        "size": "small"
      },
      "on": {
        "click": this.setPlugin
      }
    }, ["\u786E \u5B9A"])])])]);
  }
});
// CONCATENATED MODULE: ./src/core/editor/leftPanel/pluginList/plugin-button.js
/* harmony default export */ var plugin_button = ({
  functional: true,
  name: 'PluginButton',
  props: {
    pluginIcon: {
      required: true,
      type: String
    },
    title: {
      required: true,
      type: String
    },
    clickFn: {
      required: false,
      type: Function,
      default: function _default() {}
    },
    mousedownFn: {
      required: false,
      type: Function,
      default: function _default() {}
    },
    disabled: {
      type: Boolean,
      default: false
    }
  },
  render: function render(h, _ref) {
    var props = _ref.props;
    return h("button", {
      "class": 'pluginButton',
      "on": {
        "click": props.clickFn,
        "mousedown": props.mousedownFn
      },
      "attrs": {
        "disabled": props.disabled
      }
    }, [h("em", {
      "class": ['iconfont', props.pluginIcon]
    }), h("span", [props.title])]);
  }
});
// CONCATENATED MODULE: ./src/core/editor/leftPanel/pluginList/index.js









/* harmony default export */ var pluginList = ({
  mixins: [i18n["a" /* default */], drag, core_plugins["a" /* default */]],
  name: 'PluginList',
  data: function data() {
    return {
      pluginOptionArr: []
    };
  },
  methods: {
    setPlugin: function setPlugin(plugins) {
      this.pluginOptionArr = plugins;
    }
  },
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("div", {
      "style": "position: relative;"
    }, [h("el-row", {
      "attrs": {
        "gutter": 20
      },
      "style": "height: calc(100vh - 120px);overflow-y: scroll;"
    }, [[].concat(this.pluginsList, this.pluginOptionArr).filter(function (item) {
      return item.visible;
    }).map(function (plugin) {
      return h("el-col", {
        "attrs": {
          "span": 12
        },
        "style": 'margin-top: 10px;'
      }, [h(plugin_button, {
        "attrs": {
          "mousedownFn": _this.handleDragStartFromMixin.bind(_this, plugin),
          "title": plugin.i18nTitle[_this.currentLang] || plugin.title,
          "pluginIcon": plugin.icon,
          "disabled": plugin.disabled
        }
      })]);
    })]), h(plugin_options, {
      "on": {
        "setPlugin": this.setPlugin
      }
    })]);
  }
});
// EXTERNAL MODULE: ./src/core/editor/leftPanel/pageView.js
var pageView = __webpack_require__("7386");

// CONCATENATED MODULE: ./src/core/editor/leftPanel/pageList.js




/* harmony default export */ var pageList = ({
  name: 'pageList',
  props: ['name', 'pages', 'addPage', 'setEditingPage'],
  methods: {
    setEditingPageFn: function setEditingPageFn(e, index) {
      e.preventDefault();
      e.stopPropagation();
      this.hoverIndex = index;
      this.setEditingPage(index);
    },
    updatePage: function updatePage() {}
  },
  data: function data() {
    return {
      activeName: 0,
      hoverIndex: 0
    };
  },
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("div", {
      "class": "page_manager"
    }, [h("el-collapse", {
      "model": {
        value: _this.activeName,
        callback: function callback($$v) {
          _this.activeName = $$v;
        }
      }
    }, [this.pages.map(function (page, index) {
      return h("el-collapse-item", {
        "attrs": {
          "name": index
        }
      }, [h("template", {
        "slot": "title"
      }, [h("div", {
        "class": ['page_card_title', _this.hoverIndex === index && 'activeTitle'],
        "on": {
          "click": function click(e) {
            return _this.setEditingPageFn(e, index);
          }
        }
      }, [h("div", {
        "class": "page_card_title_text"
      }, ["".concat(_this.name).concat(index + 1)]), h("el-button", {
        "attrs": {
          "type": "text",
          "icon": "el-icon-edit"
        },
        "on": {
          "click": function click(e) {
            return _this.updatePage(e, index);
          }
        }
      })])]), h("div", [h(pageView["a" /* default */], {
        "attrs": {
          "page": page
        }
      })])]);
    })]), h("el-button", {
      "class": "addPage",
      "attrs": {
        "type": "primary",
        "icon": "el-icon-plus",
        "size": 'mini'
      },
      "on": {
        "click": function click() {
          return _this.addPage();
        }
      }
    }, ["\u6DFB\u52A0", this.name])]);
  }
});
// CONCATENATED MODULE: ./src/core/editor/leftPanel/pageManager/index.js



/* harmony default export */ var pageManager = ({
  name: 'page-manager',
  computed: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', {
    pages: function pages(state) {
      return state.work.pages;
    }
  })),
  methods: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['setEditingPage', 'addPage'])),
  render: function render() {
    var h = arguments[0];
    return h(pageList, {
      "attrs": {
        "name": '页面',
        "pages": this.pages,
        "addPage": this.addPage,
        "setEditingPage": this.setEditingPage
      }
    });
  }
});
// CONCATENATED MODULE: ./src/core/editor/leftPanel/dialogManager/index.js



/* harmony default export */ var dialogManager = ({
  name: 'dialogManager',
  computed: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', {
    dialog: function dialog(state) {
      return state.work.dialog;
    }
  })),
  methods: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['setEditingDialog', 'addDialog'])),
  render: function render() {
    var h = arguments[0];
    return h(pageList, {
      "attrs": {
        "name": '弹窗',
        "pages": this.dialog,
        "addPage": this.addDialog,
        "setEditingPage": this.setEditingDialog
      }
    });
  }
});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.json.stringify.js
var es_json_stringify = __webpack_require__("e9c4");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js
var es_string_replace = __webpack_require__("5319");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.find.js
var es_array_find = __webpack_require__("7db0");

// EXTERNAL MODULE: ./src/store/modules/editor/data-source.js
var data_source = __webpack_require__("890e");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"38c5e69e-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/core/editor/leftPanel/dataSourceManager/http.vue?vue&type=template&id=14167fc0&scoped=true&
var httpvue_type_template_id_14167fc0_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:"ruleForm",attrs:{"model":_vm.form,"rules":_vm.rules,"label-width":"100px"}},[_c('el-form-item',{attrs:{"label":"名称","prop":"name"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, "name", $$v)},expression:"form.name"}})],1),_c('el-form-item',{attrs:{"label":"数据地址","prop":"url"}},[_c('el-input',{attrs:{"type":"textarea"},model:{value:(_vm.form.url),callback:function ($$v) {_vm.$set(_vm.form, "url", $$v)},expression:"form.url"}})],1),_c('el-form-item',{attrs:{"label":"触发方式"}},[_c('el-radio-group',{model:{value:(_vm.form.refreshType),callback:function ($$v) {_vm.$set(_vm.form, "refreshType", $$v)},expression:"form.refreshType"}},_vm._l((_vm.refreshType),function(item,index){return _c('el-radio',{key:index,attrs:{"label":item.value}},[_vm._v(_vm._s(item.label))])}),1),_c('el-input-number',{staticStyle:{"margin-left":"20px"},attrs:{"disabled":_vm.form.refreshType !== 'fixed'},model:{value:(_vm.form.refreshInterval),callback:function ($$v) {_vm.$set(_vm.form, "refreshInterval", $$v)},expression:"form.refreshInterval"}})],1),_c('el-collapse',{attrs:{"accordion":""}},[_c('el-collapse-item',{attrs:{"title":"更多配置","name":"0"}},[_c('el-form-item',{attrs:{"label":"数据处理"}},[_c('codemirror',{ref:"codeEditor",model:{value:(_vm.form.handler),callback:function ($$v) {_vm.$set(_vm.form, "handler", $$v)},expression:"form.handler"}})],1)],1)],1)],1)}
var staticRenderFns = []


// CONCATENATED MODULE: ./src/core/editor/leftPanel/dataSourceManager/http.vue?vue&type=template&id=14167fc0&scoped=true&

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.trim.js
var es_string_trim = __webpack_require__("498a");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.js
var es_promise = __webpack_require__("e6cf");

// EXTERNAL MODULE: ./src/core/editor/leftPanel/dataSourceManager/config.js
var config = __webpack_require__("7aeb");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/core/editor/leftPanel/dataSourceManager/http.vue?vue&type=script&lang=js&




//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

/* harmony default export */ var httpvue_type_script_lang_js_ = ({
  name: 'http',
  props: {
    dataSource: {
      type: Object,
      default: function _default() {
        return {};
      }
    }
  },
  data: function data() {
    return {
      form: Object(objectSpread2["a" /* default */])({
        name: '',
        url: '',
        refreshType: 'once',
        refreshInterval: '',
        handler: "function handler(deps) {\nreturn deps.data\n}"
      }, this.dataSource),
      refreshType: config["b" /* REFRESH_ENUM */].options,
      rules: {
        name: [{
          required: true,
          message: '请输入名称',
          trigger: 'blur'
        }],
        url: [{
          required: true,
          message: '请输入地址',
          trigger: 'blur'
        }]
      }
    };
  },
  methods: {
    getForm: function getForm() {
      return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, this.form), {}, {
        url: this.form.url.trim(),
        // 移除\n\r 空格等
        handler: this.$refs.codeEditor.codemirror.getValue()
      });
    },
    checkForm: function checkForm() {
      var _this = this;

      return new Promise(function (resolve, reject) {
        _this.$refs.ruleForm.validate(function (valid) {
          if (valid) {
            resolve(_this.getForm());
          } else {
            console.log('error submit!!');
            reject(valid);
          }
        });
      });
    }
  }
});
// CONCATENATED MODULE: ./src/core/editor/leftPanel/dataSourceManager/http.vue?vue&type=script&lang=js&
 /* harmony default export */ var dataSourceManager_httpvue_type_script_lang_js_ = (httpvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__("2877");

// CONCATENATED MODULE: ./src/core/editor/leftPanel/dataSourceManager/http.vue





/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  dataSourceManager_httpvue_type_script_lang_js_,
  httpvue_type_template_id_14167fc0_scoped_true_render,
  staticRenderFns,
  false,
  null,
  "14167fc0",
  null
  
)

/* harmony default export */ var http = (component.exports);
// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"38c5e69e-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/core/editor/leftPanel/dataSourceManager/static.vue?vue&type=template&id=4fb29339&scoped=true&
var staticvue_type_template_id_4fb29339_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:"ruleForm",attrs:{"model":_vm.form,"rules":_vm.rules,"label-width":"100px"}},[_c('el-form-item',{attrs:{"label":"名称","prop":"name"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, "name", $$v)},expression:"form.name"}})],1),_c('el-collapse',{attrs:{"accordion":""}},[_c('el-collapse-item',{attrs:{"title":"更多配置","name":"0"}},[_c('el-form-item',{attrs:{"label":"数据处理"}},[_c('codemirror',{ref:"codeEditor",model:{value:(_vm.form.handler),callback:function ($$v) {_vm.$set(_vm.form, "handler", $$v)},expression:"form.handler"}})],1)],1)],1),_c('div',[_vm._v(_vm._s(_vm.form.name))])],1)}
var staticvue_type_template_id_4fb29339_scoped_true_staticRenderFns = []


// CONCATENATED MODULE: ./src/core/editor/leftPanel/dataSourceManager/static.vue?vue&type=template&id=4fb29339&scoped=true&

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/core/editor/leftPanel/dataSourceManager/static.vue?vue&type=script&lang=js&



//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
/* harmony default export */ var staticvue_type_script_lang_js_ = ({
  name: 'static',
  props: {
    dataSource: {
      type: Object,
      default: function _default() {
        return {};
      }
    }
  },
  data: function data() {
    return {
      form: Object(objectSpread2["a" /* default */])({
        name: '',
        handler: "function handler(deps) {\nreturn deps.data\n}"
      }, this.dataSource),
      rules: {
        name: [{
          required: true,
          message: '请输入名称',
          trigger: 'blur'
        }]
      }
    };
  },
  methods: {
    getForm: function getForm() {
      return Object(objectSpread2["a" /* default */])({}, this.form);
    },
    checkForm: function checkForm() {
      var _this = this;

      return new Promise(function (resolve, reject) {
        _this.$refs.ruleForm.validate(function (valid) {
          if (valid) {
            resolve(_this.getForm());
          } else {
            console.log('error submit!!');
            reject(valid);
          }
        });
      });
    }
  }
});
// CONCATENATED MODULE: ./src/core/editor/leftPanel/dataSourceManager/static.vue?vue&type=script&lang=js&
 /* harmony default export */ var dataSourceManager_staticvue_type_script_lang_js_ = (staticvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./src/core/editor/leftPanel/dataSourceManager/static.vue





/* normalize component */

var static_component = Object(componentNormalizer["a" /* default */])(
  dataSourceManager_staticvue_type_script_lang_js_,
  staticvue_type_template_id_4fb29339_scoped_true_render,
  staticvue_type_template_id_4fb29339_scoped_true_staticRenderFns,
  false,
  null,
  "4fb29339",
  null
  
)

/* harmony default export */ var dataSourceManager_static = (static_component.exports);
// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"38c5e69e-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/core/editor/leftPanel/dataSourceManager/csv.vue?vue&type=template&id=4171e414&scoped=true&
var csvvue_type_template_id_4171e414_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}
var csvvue_type_template_id_4171e414_scoped_true_staticRenderFns = []


// CONCATENATED MODULE: ./src/core/editor/leftPanel/dataSourceManager/csv.vue?vue&type=template&id=4171e414&scoped=true&

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/core/editor/leftPanel/dataSourceManager/csv.vue?vue&type=script&lang=js&
//
//
//
//
/* harmony default export */ var csvvue_type_script_lang_js_ = ({
  name: 'csv'
});
// CONCATENATED MODULE: ./src/core/editor/leftPanel/dataSourceManager/csv.vue?vue&type=script&lang=js&
 /* harmony default export */ var dataSourceManager_csvvue_type_script_lang_js_ = (csvvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./src/core/editor/leftPanel/dataSourceManager/csv.vue





/* normalize component */

var csv_component = Object(componentNormalizer["a" /* default */])(
  dataSourceManager_csvvue_type_script_lang_js_,
  csvvue_type_template_id_4171e414_scoped_true_render,
  csvvue_type_template_id_4171e414_scoped_true_staticRenderFns,
  false,
  null,
  "4171e414",
  null
  
)

/* harmony default export */ var dataSourceManager_csv = (csv_component.exports);
// CONCATENATED MODULE: ./src/core/editor/leftPanel/dataSourceManager/index.js















/* harmony default export */ var dataSourceManager = ({
  name: 'dataSourceManager',
  data: function data() {
    return {
      activeName: 0,
      dialog: false,
      activeDataSource: {
        type: config["c" /* default */].code2value.HTTP_API
      }
    };
  },
  computed: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', ['work'])),
  methods: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['dataSourceManager'])), {}, {
    // 显示弹窗
    handleSelectDataSourceType: function handleSelectDataSourceType(menu) {
      this.activeDataSource = {};
      this.activeDataSource.type = menu.value;
      this.dialog = !this.dialog;
    },
    // 新增
    renderAddAction: function renderAddAction() {
      var h = this.$createElement;
      return h("el-dropdown", {
        "attrs": {
          "trigger": "click"
        },
        "style": "right: 25px; position: absolute;",
        "on": {
          "command": this.handleSelectDataSourceType
        }
      }, [h("el-button", {
        "attrs": {
          "type": "text",
          "icon": "el-icon-plus"
        },
        "on": {
          "click": function click(e) {
            return e.stopPropagation();
          }
        }
      }), h("el-dropdown-menu", {
        "slot": "dropdown"
      }, [config["c" /* default */].options.map(function (type) {
        return h("el-dropdown-item", {
          "attrs": {
            "command": type
          }
        }, [type.label]);
      })])]);
    },
    renderDataSourceList: function renderDataSourceList() {
      var _this = this;

      var h = this.$createElement;

      if (this.work.datasources.length) {
        return this.work.datasources.map(function (ds) {
          return h("el-card", {
            "class": "dataSource__card"
          }, [h("div", {
            "slot": "header",
            "style": "display: flex"
          }, [h("div", {
            "style": "flex: 1"
          }), h("div", [h("el-button", {
            "style": "padding: 3px 0",
            "attrs": {
              "type": "text",
              "icon": "el-icon-delete"
            },
            "on": {
              "click": function click() {
                return _this.manageDataSource('delete', ds);
              }
            }
          }), h("el-button", {
            "style": "padding: 3px 0",
            "attrs": {
              "type": "text",
              "icon": "el-icon-setting"
            },
            "on": {
              "click": function click() {
                return _this.manageDataSource('edit', ds);
              }
            }
          }), h("el-button", {
            "style": "padding: 3px 0",
            "attrs": {
              "type": "text",
              "icon": "el-icon-refresh",
              "disabled": ds.type !== config["c" /* default */].code2value.HTTP_API
            },
            "on": {
              "click": function click() {
                return _this.updateDs(ds);
              }
            }
          })])]), ds.name ? h("div", ["\u540D\u79F0\uFF1A", ds.name]) : '', ds.type === config["c" /* default */].code2value.HTTP_API ? h("div", [ds.url ? h("div", ["\u5730\u5740\uFF1A", ds.url]) : '', ds.refreshType ? h("div", ["\u89E6\u53D1\u65B9\u5F0F\uFF1A", ds.refreshType === 'once' ? '单次触发' : '定时更新']) : '']) : h("div")]);
        });
      } else {
        return h("el-empty", {
          "attrs": {
            "description": "无数据源"
          }
        });
      }
    },
    updateDs: function updateDs(ds) {
      var _this2 = this;

      ds.request().then(function () {
        _this2.$message.success("\u6570\u636E\u6E90: ".concat(ds.name, " \u66F4\u65B0\u6210\u529F"));
      });
    },
    viewDataCenter: function viewDataCenter() {
      var h = this.$createElement;
      return h("el-popover", {
        "attrs": {
          "trigger": "click",
          "title": "数据中心预览"
        }
      }, [h("el-button", {
        "slot": "reference",
        "attrs": {
          "icon": "el-icon-view",
          "type": "text"
        },
        "style": "float: right"
      }), h("codemirror", {
        "attrs": {
          "value": JSON.stringify(data_source["a" /* DS */], null, 2)
        },
        "on": {
          "blur": function blur(cm) {
            data_source["a" /* DS */].DS = JSON.parse(cm.getValue().replace(/[\r\n\s+]/g, '')).DS;
          }
        },
        "style": "min-width: 500px;"
      })]);
    },
    // 弹窗
    renderDialog: function renderDialog() {
      var _this3 = this;

      var h = this.$createElement;
      return h("el-dialog", {
        "attrs": {
          "title": "".concat(this.$t('editor.sidebar.dataSource'), " - ").concat(this.activeDataSource.type ? config["c" /* default */].options.find(function (it) {
            return it.value === _this3.activeDataSource.type;
          }).label : ''),
          "visible": this.dialog,
          "width": "600"
        },
        "on": Object(objectSpread2["a" /* default */])({}, {
          'update:visible': function updateVisible(val) {
            _this3.dialog = val;
          }
        })
      }, [this.renderForm(), h("div", {
        "style": "text-align: right;margin-top: 10px"
      }, [h("el-button", {
        "attrs": {
          "type": "primary"
        },
        "on": {
          "click": this.submitForm
        }
      }, ["\u786E\u8BA4"]), h("el-button", {
        "on": {
          "click": function click() {
            return _this3.dialog = false;
          }
        }
      }, ["\u53D6\u6D88"])])]);
    },
    // 表单
    renderForm: function renderForm() {
      var h = this.$createElement;

      if (this.dialog) {
        switch (this.activeDataSource.type) {
          case config["c" /* default */].code2value.HTTP_API:
            return h(http, {
              "ref": "form",
              "attrs": {
                "dataSource": this.activeDataSource,
                "type": this.activeDataSource.type
              }
            });

          case config["c" /* default */].code2value.STATIC:
            return h(dataSourceManager_static, {
              "ref": "form",
              "attrs": {
                "dataSource": this.activeDataSource,
                "type": this.activeDataSource.type
              }
            });

          case config["c" /* default */].code2value.CSV:
            return h(dataSourceManager_csv, {
              "ref": "form",
              "attrs": {
                "dataSource": this.activeDataSource,
                "type": this.activeDataSource.type
              }
            });
        }
      } else {
        return '';
      }
    },
    submitForm: function submitForm() {
      var _this4 = this;

      this.$refs.form.checkForm().then(function (dataSourceForm) {
        var actionType = dataSourceForm.id ? 'edit' : 'add';

        _this4.manageDataSource(actionType, dataSourceForm);

        _this4.activeDataSource = {};
      });
    },
    manageDataSource: function manageDataSource(actionType, ds) {
      this.dataSourceManager({
        type: actionType,
        value: Object(objectSpread2["a" /* default */])({}, ds)
      });

      if (actionType === 'add' || actionType === 'edit') {
        this.activeDataSource = Object(objectSpread2["a" /* default */])({}, ds);
        this.dialog = !this.dialog;
      }
    }
  }),
  render: function render() {
    var _this5 = this;

    var h = arguments[0];
    return h("div", [h("el-collapse", {
      "attrs": {
        "accordion": true
      },
      "model": {
        value: _this5.activeName,
        callback: function callback($$v) {
          _this5.activeName = $$v;
        }
      }
    }, [h("el-collapse-item", {
      "attrs": {
        "name": 0
      }
    }, [h("template", {
      "slot": "title"
    }, [h("span", [this.$t('editor.sidebar.dataSource')]), this.renderAddAction()]), this.renderDataSourceList(), this.viewDataCenter()])]), this.renderDialog()]);
  }
});
// CONCATENATED MODULE: ./src/core/editor/leftPanel/index.js




/* harmony default export */ var leftPanel = ({
  name: 'EditorLeftPanel',
  data: function data() {
    return {
      activeName: 'plugin-list'
    };
  },
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("el-aside", {
      "attrs": {
        "width": "260px"
      },
      "style": "background: #fff;padding: 10px;"
    }, [h("el-tabs", {
      "attrs": {
        "tabPosition": "left"
      },
      "class": "left_tab",
      "model": {
        value: _this.activeName,
        callback: function callback($$v) {
          _this.activeName = $$v;
        }
      }
    }, [h("el-tab-pane", {
      "attrs": {
        "label": this.$t('editor.sidebar.components'),
        "name": "plugin-list"
      }
    }, [h(pluginList)]), h("el-tab-pane", {
      "attrs": {
        "label": this.$t('editor.sidebar.pages'),
        "name": "page-manager"
      }
    }, [this.activeName === 'page-manager' ? h(pageManager) : '']), h("el-tab-pane", {
      "attrs": {
        "label": this.$t('editor.sidebar.dialog'),
        "name": "page-dialog"
      }
    }, [h(dialogManager)]), h("el-tab-pane", {
      "attrs": {
        "label": this.$t('editor.sidebar.dataSource'),
        "name": "data-source"
      }
    }, [h(dataSourceManager)])])]);
  }
});
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules
var slicedToArray = __webpack_require__("3835");

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__("ade3");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.entries.js
var es_object_entries = __webpack_require__("4fad");

// EXTERNAL MODULE: ./src/utils/index.js
var utils = __webpack_require__("ed08");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"38c5e69e-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/core/editor/rightPanel/box-model.vue?vue&type=template&id=6bc05240&scoped=true&
var box_modelvue_type_template_id_6bc05240_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.editingElement)?_c('div',{staticClass:"box-model"},[(_vm.boxModelPart)?_c('div',{staticClass:"prompt"},[_vm._v("设置 "+_vm._s(_vm.boxModelPart))]):_c('div',[_vm._v("选择 margin/border/padding 进行设置")]),_c('PositionCheckbox',{attrs:{"label":"上","label-key":"top"}}),_c('div',{staticClass:"middle"},[_c('PositionCheckbox',{attrs:{"label":"左","label-key":"left"}}),_c('div',{ref:"margin",staticClass:"margin",class:{'margin-select':_vm.boxModelPart === 'margin'},attrs:{"data-type":"margin"},on:{"click":_vm.onBoxModelClick}},[_vm._v(" margin "),_c('div',{ref:"border",staticClass:"border",class:{'border-select':_vm.boxModelPart === 'border'},attrs:{"data-type":"border"}},[_vm._v(" border "),_c('div',{ref:"padding",staticClass:"padding",class:{'padding-select':_vm.boxModelPart === 'padding'},attrs:{"data-type":"padding"}},[_vm._v(" padding "),_c('div',{staticClass:"content",attrs:{"data-type":"padding"}},[_vm._v(" "+_vm._s(_vm._f("digit")(_vm.commonStyle.width))+" x "+_vm._s(_vm._f("digit")(_vm.commonStyle.height))+" ")])])])]),_c('PositionCheckbox',{attrs:{"label":"右","label-key":"right"}})],1),_c('PositionCheckbox',{attrs:{"label":"下","label-key":"bottom"}}),(_vm.isEditingBorder)?_c('div',{staticStyle:{"display":"flex"}},[_c('div',{staticStyle:{"line-height":"32px","display":"flex","margin-right":"4px"}},[_c('span',[_vm._v("边框颜色：")]),_c('el-color-picker',{attrs:{"size":"mini","value":_vm.borderColor},on:{"change":_vm.onColorChange}})],1),_c('div',{staticStyle:{"line-height":"32px","display":"flex","flex":"1"}},[_c('span',[_vm._v("边框样式：")]),_c('el-select',{staticStyle:{"flex":"1"},attrs:{"value":_vm.borderStyle,"size":"mini"},on:{"change":_vm.onStyleChange}},_vm._l((_vm.borderStyleOptions),function(item,index){return _c('el-option',{key:index,attrs:{"value":item.value}},[_vm._v(" "+_vm._s(item.label)+" ")])}),1)],1)]):_vm._e(),(_vm.isEditingBorder)?_c('div',{staticStyle:{"display":"flex","line-height":"32px"}},[_c('span',[_vm._v("圆角：")]),_vm._l((_vm.borderRadius),function(item,index){return _c('el-input',{key:index,staticStyle:{"width":"60px"},attrs:{"value":item,"type":"number","size":"mini","min":0},on:{"input":function (e) { _vm.onRadiusChange(e, index) }}})})],2):_vm._e()],1):_vm._e()}
var box_modelvue_type_template_id_6bc05240_scoped_true_staticRenderFns = []


// CONCATENATED MODULE: ./src/core/editor/rightPanel/box-model.vue?vue&type=template&id=6bc05240&scoped=true&

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.number.to-fixed.js
var es_number_to_fixed = __webpack_require__("b680");

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.assign.js
var es_object_assign = __webpack_require__("cca6");

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"38c5e69e-vue-loader-template"}!./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/core/editor/rightPanel/position-checkbox.vue?vue&type=template&id=0dbd0170&scoped=true&
var position_checkboxvue_type_template_id_0dbd0170_scoped_true_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"position-checkbox"},[(_vm.boxModelPart)?[_c('div',{staticClass:"flex"},[_c('el-checkbox',{attrs:{"checked":_vm.isChecked,"size":"small"},on:{"change":_vm.onCheckboxChange}}),_c('div',{staticClass:"label"},[_vm._v(_vm._s(_vm.label))])],1)]:_vm._e(),(_vm.boxModelPart && _vm.isChecked)?[_c('el-input',{staticStyle:{"width":"60px"},attrs:{"type":"number","value":_vm.value,"min":0,"size":"mini"},on:{"input":_vm.onInputNumberChange}}),_c('el-select',{staticStyle:{"width":"60px"},attrs:{"value":_vm.unit,"size":"mini"},on:{"change":_vm.onUnitChange}},_vm._l((_vm.unitList),function(item,index){return _c('el-option',{key:index,attrs:{"value":item}},[_vm._v(" "+_vm._s(item)+" ")])}),1)]:_vm._e()],2)}
var position_checkboxvue_type_template_id_0dbd0170_scoped_true_staticRenderFns = []


// CONCATENATED MODULE: ./src/core/editor/rightPanel/position-checkbox.vue?vue&type=template&id=0dbd0170&scoped=true&

// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/core/editor/rightPanel/position-checkbox.vue?vue&type=script&lang=js&



//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//

/* harmony default export */ var position_checkboxvue_type_script_lang_js_ = ({
  name: 'PositionCheckbox',
  props: {
    label: {
      type: String,
      default: ''
    },
    labelKey: {
      type: String,
      default: ''
    }
  },
  data: function data() {
    return {
      isChecked: false
    };
  },
  computed: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', {
    editingElement: function editingElement(state) {
      return state.editingElement;
    }
  })), {}, {
    boxModelPart: function boxModelPart() {
      return this.editingElement && this.editingElement.commonStyle.boxModelPart;
    },
    value: function value() {
      var editingElement = this.editingElement,
          labelKey = this.labelKey,
          boxModelPart = this.boxModelPart;
      return this.boxModelPart ? editingElement.commonStyle[boxModelPart][labelKey].value : '';
    },
    unit: function unit() {
      var editingElement = this.editingElement,
          labelKey = this.labelKey,
          boxModelPart = this.boxModelPart;
      return this.boxModelPart ? editingElement.commonStyle[boxModelPart][labelKey].unit : '';
    },
    unitList: function unitList() {
      return this.boxModelPart === 'border' ? ['px', 'em'] : ['px', '%', 'em'];
    }
  }),
  methods: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['setElementPosition'])), {}, {
    onUnitChange: function onUnitChange(unit) {
      this.changeCommonStyle(unit, 'unit');
    },
    onCheckboxChange: function onCheckboxChange(e) {
      this.isChecked = e;
    },
    onInputNumberChange: function onInputNumberChange(value) {
      this.changeCommonStyle(value);
    },
    changeCommonStyle: function changeCommonStyle(changeValue) {
      var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'value';
      var boxModelPart = this.boxModelPart; // 例如 boxModelPart 为 margin 时候

      var boxModelPartStyle = this.editingElement.commonStyle[boxModelPart]; // 更新值例如: padding-top

      Object.assign(boxModelPartStyle[this.labelKey], Object(defineProperty["a" /* default */])({}, key, changeValue));
      this.setElementPosition(Object(defineProperty["a" /* default */])({}, boxModelPart, boxModelPartStyle));
    }
  }),
  watch: {
    value: {
      immediate: true,
      handler: function handler(val) {
        if (val) {
          this.isChecked = true;
        }
      }
    }
  }
});
// CONCATENATED MODULE: ./src/core/editor/rightPanel/position-checkbox.vue?vue&type=script&lang=js&
 /* harmony default export */ var rightPanel_position_checkboxvue_type_script_lang_js_ = (position_checkboxvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./src/core/editor/rightPanel/position-checkbox.vue?vue&type=style&index=0&id=0dbd0170&lang=less&scoped=true&
var position_checkboxvue_type_style_index_0_id_0dbd0170_lang_less_scoped_true_ = __webpack_require__("0767");

// CONCATENATED MODULE: ./src/core/editor/rightPanel/position-checkbox.vue






/* normalize component */

var position_checkbox_component = Object(componentNormalizer["a" /* default */])(
  rightPanel_position_checkboxvue_type_script_lang_js_,
  position_checkboxvue_type_template_id_0dbd0170_scoped_true_render,
  position_checkboxvue_type_template_id_0dbd0170_scoped_true_staticRenderFns,
  false,
  null,
  "0dbd0170",
  null
  
)

/* harmony default export */ var position_checkbox = (position_checkbox_component.exports);
// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/core/editor/rightPanel/box-model.vue?vue&type=script&lang=js&




//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//


/* harmony default export */ var box_modelvue_type_script_lang_js_ = ({
  name: 'BoxModelEditor',
  components: {
    PositionCheckbox: position_checkbox
  },
  data: function data() {
    return {
      borderStyleOptions: [{
        label: '无',
        value: 'none'
      }, {
        label: '实线',
        value: 'solid'
      }, {
        label: '双线',
        value: 'double'
      }, {
        label: '虚线',
        value: 'dashed'
      }, {
        label: '点状边框',
        value: 'dotted'
      }, {
        label: '3D 凹槽边框',
        value: 'groove'
      }]
    };
  },
  computed: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', {
    editingElement: function editingElement(state) {
      return state.editingElement;
    }
  })), {}, {
    // margin/padding/border
    boxModelPart: function boxModelPart() {
      var _this$editingElement;

      return (_this$editingElement = this.editingElement) === null || _this$editingElement === void 0 ? void 0 : _this$editingElement.commonStyle.boxModelPart;
    },
    commonStyle: function commonStyle() {
      var _this$editingElement2;

      return ((_this$editingElement2 = this.editingElement) === null || _this$editingElement2 === void 0 ? void 0 : _this$editingElement2.commonStyle) || {};
    },
    borderColor: function borderColor() {
      var _this$commonStyle;

      return ((_this$commonStyle = this.commonStyle) === null || _this$commonStyle === void 0 ? void 0 : _this$commonStyle.border.color.value) || '';
    },
    borderStyle: function borderStyle() {
      var _this$commonStyle2;

      return ((_this$commonStyle2 = this.commonStyle) === null || _this$commonStyle2 === void 0 ? void 0 : _this$commonStyle2.border.style.value) || '';
    },
    borderRadius: function borderRadius() {
      var _this$commonStyle3;

      return ((_this$commonStyle3 = this.commonStyle) === null || _this$commonStyle3 === void 0 ? void 0 : _this$commonStyle3.border.radius) || [];
    },
    isEditingBorder: function isEditingBorder() {
      return this.boxModelPart === 'border';
    }
  }),
  filters: {
    digit: function digit(val) {
      return val.toFixed(0);
    }
  },
  methods: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['setElementPosition'])), {}, {
    onBoxModelClick: function onBoxModelClick(e) {
      var type = e.target.dataset.type;
      this.setElementPosition({
        boxModelPart: type
      });
    },
    onStyleChange: function onStyleChange(style) {
      var boxModelPart = this.boxModelPart;
      var boxModelPartStyle = this.editingElement.commonStyle[boxModelPart];
      Object.assign(boxModelPartStyle.style, {
        value: style
      });
      this.setElementPosition(Object(defineProperty["a" /* default */])({}, boxModelPart, boxModelPartStyle));
    },
    onRadiusChange: function onRadiusChange(radius, index) {
      console.log(radius);
      var boxModelPart = this.boxModelPart;
      var boxModelPartStyle = this.editingElement.commonStyle[boxModelPart];
      boxModelPartStyle.radius[index] = radius;
      this.setElementPosition(Object(defineProperty["a" /* default */])({}, boxModelPart, boxModelPartStyle));
    },
    onColorChange: function onColorChange(color) {
      var boxModelPart = this.boxModelPart;
      var boxModelPartStyle = this.editingElement.commonStyle[boxModelPart];
      Object.assign(boxModelPartStyle.color, {
        value: color
      });

      if (boxModelPart === 'border') {
        this.editingElement.pluginProps.borderColor = color;
      }

      this.setElementPosition(Object(defineProperty["a" /* default */])({}, boxModelPart, boxModelPartStyle));
    }
  })
});
// CONCATENATED MODULE: ./src/core/editor/rightPanel/box-model.vue?vue&type=script&lang=js&
 /* harmony default export */ var rightPanel_box_modelvue_type_script_lang_js_ = (box_modelvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./src/core/editor/rightPanel/box-model.vue?vue&type=style&index=0&id=6bc05240&lang=less&scoped=true&
var box_modelvue_type_style_index_0_id_6bc05240_lang_less_scoped_true_ = __webpack_require__("91b7");

// CONCATENATED MODULE: ./src/core/editor/rightPanel/box-model.vue






/* normalize component */

var box_model_component = Object(componentNormalizer["a" /* default */])(
  rightPanel_box_modelvue_type_script_lang_js_,
  box_modelvue_type_template_id_6bc05240_scoped_true_render,
  box_modelvue_type_template_id_6bc05240_scoped_true_staticRenderFns,
  false,
  null,
  "6bc05240",
  null
  
)

/* harmony default export */ var box_model = (box_model_component.exports);
// CONCATENATED MODULE: ./src/core/editor/rightPanel/prop.js













/* harmony default export */ var prop = ({
  name: 'PropEditor',
  props: {
    realEditingElement: {
      type: Object,
      default: function _default() {
        return null;
      }
    }
  },
  data: function data() {
    return {
      collapseActive: [1],
      loadCustomEditorFlag: false,
      editorPositionConfig: [{
        type: 'el-input',
        label: '上',
        key: 'top'
      }, {
        type: 'el-input',
        label: '左',
        key: 'left'
      }, {
        type: 'el-input',
        label: '宽',
        key: 'width'
      }, {
        type: 'el-input',
        label: '高',
        key: 'height'
      }]
    };
  },
  components: {
    BoxModelEditor: box_model
  },
  computed: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', {
    stateEditingElement: function stateEditingElement(state) {
      return state.editingElement;
    }
  })), {}, {
    editingElement: function editingElement() {
      return this.realEditingElement || this.stateEditingElement;
    }
  }),
  methods: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['setEditingElement', 'setElementPosition'])), {}, {
    renderEditorPositionConfig: function renderEditorPositionConfig(h) {
      var _this = this;

      var commonStyle = this.editingElement.commonStyle;
      return h("el-form", {
        "attrs": {
          "inline": true,
          "size": 'mini'
        }
      }, [this.editorPositionConfig.map(function (item) {
        var type = item.type,
            label = item.label,
            key = item.key;
        var data = {
          style: {
            width: '100px'
          },
          props: {
            type: 'number',
            value: commonStyle[key],
            placeholder: "\u8BF7\u8F93\u5165".concat(key),
            formatter: function formatter(value) {
              return "".concat(label, " ").concat(value);
            }
          },
          on: {
            input: function input(e) {
              var value = e;

              _this.onPositionChange(key, value);
            }
          }
        };
        return h("el-form-item", {
          "attrs": {
            "label": label
          }
        }, [h(type, data)]);
      })]);
    },
    onPositionChange: function onPositionChange(key, value) {
      this.setElementPosition(Object(defineProperty["a" /* default */])({}, key, Number(value)));
    }
  }),
  render: function render(h) {
    var _this2 = this;

    if (!this.editingElement) return h("div", ["\u8BF7\u9009\u62E9\u4E00\u4E2A\u5143\u7D20"]);
    var vm = Object(utils["d" /* getVM */])(this.editingElement.name);
    var props = vm.$options.props;
    return h("el-collapse", {
      "class": "right_prop_collapse",
      "model": {
        value: _this2.collapseActive,
        callback: function callback($$v) {
          _this2.collapseActive = $$v;
        }
      }
    }, [h("el-collapse-item", {
      "attrs": {
        "name": 0,
        "title": "通用样式"
      }
    }, [this.stateEditingElement ? this.renderEditorPositionConfig(h) : '', h(box_model)]), h("el-collapse-item", {
      "attrs": {
        "name": 1,
        "title": "属性设置"
      }
    }, [h("el-form", {
      "attrs": {
        "className": "right_prop_form",
        "size": "mini",
        "inline": false
      }
    }, [// eslint-disable-next-line
    Object.entries(props).filter(function (_ref) {
      var _ref2 = Object(slicedToArray["a" /* default */])(_ref, 2),
          propKey = _ref2[0],
          propConfig = _ref2[1];

      var isVisible = Object.prototype.hasOwnProperty.call(propConfig, 'visible') ? propConfig.visible : true;
      return isVisible && propConfig.editor && !propConfig.editor.custom;
    }).map(function (_ref3) {
      var _ref4 = Object(slicedToArray["a" /* default */])(_ref3, 2),
          key = _ref4[0],
          value = _ref4[1];

      var editor = value.editor;
      var data = {
        props: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, editor.props), {}, {
          value: _this2.editingElement.pluginProps[key]
        }),
        on: {
          input: function input(val) {
            _this2.editingElement.pluginProps[key] = val.target ? val.target.value : val;
          },
          change: function change(e) {
            _this2.editingElement.pluginProps[key] = e.target ? e.target.value : e;
          }
        }
      };
      return h("el-form-item", {
        "attrs": {
          "label": editor.label + ':'
        }
      }, [h(editor.type, data)]);
    })])])]);
  }
});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.match.js
var es_string_match = __webpack_require__("466d");

// CONCATENATED MODULE: ./src/core/mixins/animation/animation_view.js






var firstLevelAnimationOptions = [{
  label: '进入',
  value: /进/
}, {
  label: '退出',
  value: /退/
}, {
  label: '强调',
  value: /强调|特殊/
}];
var animationOptions = [{
  label: '',
  value: '空',
  children: [{
    label: '无',
    value: ''
  }]
}, {
  label: '强调',
  value: 'Attention Seekers',
  children: [{
    label: '旋转',
    value: 'justRotate'
  }, {
    label: '弹跳',
    value: 'bounce'
  }, {
    label: '闪烁',
    value: 'flash'
  }, {
    label: '跳动',
    value: 'pulse'
  }, {
    label: '抖动',
    value: 'shake'
  }, {
    label: '摇摆',
    value: 'swing'
  }, {
    label: '橡皮圈',
    value: 'rubberBand'
  }, {
    label: '果冻',
    value: 'jello'
  }, {
    label: '',
    value: 'tada'
  }, {
    label: '',
    value: 'wobble'
  }]
}, {
  label: '弹跳进入',
  value: 'Bouncing Entrances',
  children: [{
    label: '弹跳进入',
    value: 'bounceIn'
  }, {
    label: '向下弹跳进入',
    value: 'bounceInDown'
  }, {
    label: '向右弹跳进入',
    value: 'bounceInLeft'
  }, {
    label: '向左弹跳进入',
    value: 'bounceInRight'
  }, {
    label: '向上弹跳进入',
    value: 'bounceInUp'
  }]
}, {
  label: '弹跳退出',
  value: 'Bouncing Exits',
  children: [{
    label: '弹跳退出',
    value: 'bounceOut'
  }, {
    label: '向下弹跳退出',
    value: 'bounceOutDown'
  }, {
    label: '向左弹跳退出',
    value: 'bounceOutLeft'
  }, {
    label: '向右弹跳退出',
    value: 'bounceOutRight'
  }, {
    label: '向上弹跳退出',
    value: 'bounceOutUp'
  }]
}, {
  label: '渐显进入',
  value: 'Fading Entrances',
  children: [{
    label: '渐显进入',
    value: 'fadeIn'
  }, {
    label: '向下渐显进入',
    value: 'fadeInDown'
  }, {
    label: '由屏幕外向下渐显进入',
    value: 'fadeInDownBig'
  }, {
    label: '向右显进入',
    value: 'fadeInLeft'
  }, {
    label: '由屏幕外向右渐显进入',
    value: 'fadeInLeftBig'
  }, {
    label: '向左渐显进入',
    value: 'fadeInRight'
  }, {
    label: '由屏幕外向左渐显进入',
    value: 'fadeInRightBig'
  }, {
    label: '向上渐显进入',
    value: 'fadeInUp'
  }, {
    label: '由屏幕外向上渐显进入',
    value: 'fadeInUpBig'
  }]
}, {
  label: '渐隐退出',
  value: 'Fading Exits',
  children: [{
    label: '渐隐退出',
    value: 'fadeOut'
  }, {
    label: '向下渐隐退出',
    value: 'fadeOutDown'
  }, {
    label: '向下渐隐退出屏幕外',
    value: 'fadeOutDownBig'
  }, {
    label: '向左渐隐退出',
    value: 'fadeOutLeft'
  }, {
    label: '向左渐隐退出屏幕外',
    value: 'fadeOutLeftBig'
  }, {
    label: '向右渐隐退出',
    value: 'fadeOutRight'
  }, {
    label: '向右渐隐退出屏幕外',
    value: 'fadeOutRightBig'
  }, {
    label: '向上渐隐退出',
    value: 'fadeOutUp'
  }, {
    label: '向上渐隐退出屏幕外',
    value: 'fadeOutUpBig'
  }]
}, {
  label: '翻动',
  value: 'Flippers',
  children: [{
    label: '翻动',
    value: 'flip'
  }, {
    label: '纵向翻动',
    value: 'flipInX'
  }, {
    label: '横向翻动',
    value: 'flipInY'
  }, {
    label: '立体纵向翻动',
    value: 'flipOutX'
  }, {
    label: '立体横向翻动',
    value: 'flipOutY'
  }]
}, {
  label: '加速进出',
  value: 'Lightspeed',
  children: [{
    label: '加速进入',
    value: 'lightSpeedIn'
  }, {
    label: '加速退出',
    value: 'lightSpeedOut'
  }]
}, {
  label: '旋转渐显',
  value: 'Rotating Entrances',
  children: [{
    label: '旋转渐显',
    value: 'rotateIn'
  }, {
    label: '左下角旋转渐显',
    value: 'rotateInDownLeft'
  }, {
    label: '旋转渐显',
    value: '右下角rotateInDownRight'
  }, {
    label: '左上角旋转渐显',
    value: 'rotateInUpLeft'
  }, {
    label: '右上角旋转渐显',
    value: 'rotateInUpRight'
  }]
}, {
  label: '旋转渐隐',
  value: 'Rotating Exits',
  children: [{
    label: '旋转渐隐',
    value: 'rotateOut'
  }, {
    label: '左下角旋转渐隐',
    value: 'rotateOutDownLeft'
  }, {
    label: '左下角旋转渐隐',
    value: 'rotateOutDownRight'
  }, {
    label: '左上角旋转渐隐',
    value: 'rotateOutUpLeft'
  }, {
    label: '右上角旋转渐隐',
    value: 'rotateOutUpRight'
  }]
}, {
  label: '平移进入',
  value: 'Sliding Entrances',
  children: [{
    label: '向上平移进入',
    value: 'slideInUp'
  }, {
    label: '向下平移进入',
    value: 'slideInDown'
  }, {
    label: '向右平移进入',
    value: 'slideInLeft'
  }, {
    label: '向左平移进入',
    value: 'slideInRight'
  }]
}, {
  label: '平移退出',
  value: 'Sliding Exits',
  children: [{
    label: '向上平移退出',
    value: 'slideOutUp'
  }, {
    label: '向下平移退出',
    value: 'slideOutDown'
  }, {
    label: '向左平移退出',
    value: 'slideOutLeft'
  }, {
    label: '向右平移退出',
    value: 'slideOutRight'
  }]
}, {
  label: '放大进入',
  value: 'Zoom Entrances',
  children: [{
    label: '放大进入',
    value: 'zoomIn'
  }, {
    label: '向下放大进入',
    value: 'zoomInDown'
  }, {
    label: '向右放大进入',
    value: 'zoomInLeft'
  }, {
    label: '向左放大进入',
    value: 'zoomInRight'
  }, {
    label: '向上放大进入',
    value: 'zoomInUp'
  }]
}, {
  label: '缩小退出',
  value: 'Zoom Exits',
  children: [{
    label: '缩小退出',
    value: 'zoomOut'
  }, {
    label: '向下缩小退出',
    value: 'zoomOutDown'
  }, {
    label: '向左缩小退出',
    value: 'zoomOutLeft'
  }, {
    label: '向右缩小退出',
    value: 'zoomOutRight'
  }, {
    label: '向上缩小退出',
    value: 'zoomOutUp'
  }]
}, {
  label: '特殊效果',
  value: 'Specials',
  children: [{
    label: '悬挂',
    value: 'hinge'
  }, {
    label: '滚动进入',
    value: 'rollIn'
  }, {
    label: '滚动退出',
    value: 'rollOut'
  }]
}];
/* harmony default export */ var animation_view = ({
  data: function data() {
    return {
      activeNameTop: firstLevelAnimationOptions[0].label,
      activeNameLeft: '',
      activePreviewAnimation: ''
    };
  },
  methods: {
    animationValueName: function animationValueName(type) {
      var arr = animationOptions.reduce(function (obj, curr) {
        var items = curr.children;
        items.forEach(function (item) {
          obj[item.value] = item.label;
        });
        return obj;
      }, {});
      return arr[type];
    },
    renderAnimationOptions: function renderAnimationOptions(animation) {
      var _this = this;

      var h = this.$createElement;
      return h("el-form", {
        "attrs": {
          "size": "mini"
        }
      }, [h("el-form-item", {
        "attrs": {
          "label": this.$t('editor.editPanel.animation.type') + '：'
        }
      }, [h("el-button", {
        "attrs": {
          "type": 'text'
        },
        "on": {
          "click": function click() {
            _this.drawer = true;
          }
        }
      }, [this.$t('editor.editPanel.animation.list')])]), h("el-form-item", {
        "class": "animation_slider",
        "attrs": {
          "label": this.$t('editor.editPanel.animation.duration') + '(s)：'
        }
      }, [h("el-slider", {
        "attrs": {
          "min": 0,
          "max": 20,
          "inputSize": 'mini',
          "showInput": true
        },
        "on": {
          "change": function change(value) {
            animation.duration = value;
          }
        },
        "model": {
          value: animation.duration,
          callback: function callback($$v) {
            _this.$set(animation, "duration", $$v);
          }
        }
      })]), h("el-form-item", {
        "class": "animation_slider",
        "attrs": {
          "label": this.$t('editor.editPanel.animation.delay') + '(s)：'
        }
      }, [h("el-slider", {
        "attrs": {
          "min": 0,
          "max": 20,
          "inputSize": 'mini',
          "showInput": true
        },
        "on": {
          "change": function change(value) {
            animation.delay = value;
          }
        },
        "model": {
          value: animation.delay,
          callback: function callback($$v) {
            _this.$set(animation, "delay", $$v);
          }
        }
      })]), h("el-form-item", {
        "class": "animation_slider",
        "attrs": {
          "label": this.$t('editor.editPanel.animation.iteration') + '(s)：'
        }
      }, [h("el-slider", {
        "attrs": {
          "min": 0,
          "max": 20,
          "inputSize": 'mini',
          "showInput": true
        },
        "on": {
          "change": function change(value) {
            animation.iterationCount = value;
          }
        },
        "model": {
          value: animation.iterationCount,
          callback: function callback($$v) {
            _this.$set(animation, "iterationCount", $$v);
          }
        }
      })]), h("el-form-item", {
        "attrs": {
          "label": this.$t('editor.editPanel.animation.infinite') + '(s)：'
        }
      }, [h("el-switch", {
        "on": {
          "change": function change(value) {
            animation.infinite = value;
          }
        },
        "model": {
          value: animation.infinite,
          callback: function callback($$v) {
            _this.$set(animation, "infinite", $$v);
          }
        }
      })])]);
    },
    renderAnimationstTabs: function renderAnimationstTabs() {
      var _this2 = this;

      var h = this.$createElement;
      return h("el-tabs", [firstLevelAnimationOptions.map(function (firstGroup) {
        return h("el-tab-pane", {
          "attrs": {
            "label": firstGroup.label
          },
          "key": firstGroup.label
        }, [_this2.renderSecondAnimationTabs(animationOptions.filter(function (group) {
          return !!group.label.match(firstGroup.value);
        }))]);
      })]);
    },
    renderSecondAnimationTabs: function renderSecondAnimationTabs(animations) {
      var _this3 = this;

      var h = this.$createElement;
      return h("el-tabs", {
        "attrs": {
          "tabPosition": 'left'
        }
      }, [animations.map(function (secondGroup) {
        return h("el-tab-pane", {
          "attrs": {
            "label": secondGroup.label
          },
          "key": secondGroup.label
        }, [h("el-row", {
          "attrs": {
            "gutter": 20
          },
          "style": "line-height: 1.5;"
        }, [secondGroup.children.map(function (group) {
          return h("el-col", {
            "attrs": {
              "span": 12
            }
          }, [h("div", {
            "class": [_this3.activePreviewAnimation === group.value && 'animate__' + group.value + ' animated', 'animation_item_card'],
            "on": {
              "mouseenter": function mouseenter() {
                _this3.activePreviewAnimation = group.value;
              },
              "click": function click() {
                _this3.drawer = false;
                _this3.editingElement.animations[_this3.activeName].type = group.value;
              }
            }
          }, [group.label])]);
        })])]);
      })]);
    }
  }
});
// CONCATENATED MODULE: ./src/core/editor/rightPanel/animation.js





/* harmony default export */ var animation = ({
  name: 'AnimationEditor',
  mixins: [animation_view],
  computed: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', ['editingElement'])), {}, {
    animationQueue: function animationQueue() {
      return this.editingElement && this.editingElement.animations || [];
    }
  }),
  data: function data() {
    return {
      activeName: 0,
      drawer: false
    };
  },
  methods: {
    addAnimation: function addAnimation() {
      this.editingElement.animations.push({
        type: '',
        duration: 1,
        delay: 0,
        iterationCount: 1,
        infinite: false
      });
      this.activeName = this.editingElement.animations.length - 1;
    },
    runAnimate: function runAnimate() {
      window.EditorApp.$emit('RUN_ANIMATIONS');
    }
  },
  render: function render() {
    var _this = this;

    var h = arguments[0];
    var ele = this.editingElement;
    if (!ele) return h("span", [this.$t('editor.editPanel.common.empty')]);
    return h("div", [h("el-button-group", [h("el-button", {
      "attrs": {
        "type": "primary",
        "size": 'small'
      },
      "on": {
        "click": this.addAnimation
      }
    }, [h("em", {
      "class": 'el-icon-circle-plus-outline'
    }), " ", this.$t('editor.editPanel.animation.add')]), h("el-button", {
      "attrs": {
        "type": "primary",
        "size": 'small'
      },
      "on": {
        "click": this.runAnimate
      }
    }, [this.$t('editor.editPanel.animation.run'), h("em", {
      "class": 'el-icon-video-play'
    })])]), h("div", [!!this.editingElement.animations.length && h("el-collapse", {
      "attrs": {
        "accordion": true
      },
      "model": {
        value: _this.activeName,
        callback: function callback($$v) {
          _this.activeName = $$v;
        }
      }
    }, [this.editingElement.animations.map(function (animation, index) {
      return h("el-collapse-item", {
        "attrs": {
          "name": index
        }
      }, [h("template", {
        "slot": "title"
      }, ["\u52A8\u753B".concat(index + 1, " ").concat(_this.animationValueName(animation.type))]), _this.renderAnimationOptions(animation)]);
    })]), h("el-drawer", {
      "attrs": {
        "visible": this.drawer,
        "direction": 'ltr'
      },
      "on": Object(objectSpread2["a" /* default */])({}, {
        'update:visible': function updateVisible(val) {
          _this.drawer = val;
        }
      })
    }, [h("div", {
      "style": 'padding: 10px;'
    }, [this.renderAnimationstTabs()])])])]);
  }
});
// CONCATENATED MODULE: ./src/core/editor/rightPanel/page.js






/* harmony default export */ var rightPanel_page = ({
  name: 'PageEditor',
  computed: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', ['editingPage'])),
  render: function render() {
    var h = arguments[0];
    var bgEle = this.editingPage.elements.find(function (e) {
      return e.name === 'k-background';
    });
    return h("div", [h(prop, {
      "attrs": {
        "realEditingElement": bgEle
      }
    })]);
  }
});
// EXTERNAL MODULE: ./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js
var helper = __webpack_require__("2638");
var helper_default = /*#__PURE__*/__webpack_require__.n(helper);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.splice.js
var es_array_splice = __webpack_require__("a434");

// CONCATENATED MODULE: ./src/core/editor/rightPanel/script/defaultScript.js
/* harmony default export */ var defaultScript = ("\nreturn {\n  methods:{\n    clickFn(){\n      console.log('clickFn')\n    }\n  }\n}\n");
// CONCATENATED MODULE: ./src/core/editor/rightPanel/script/index.js







/* harmony default export */ var script = ({
  name: 'ScriptEditor',
  computed: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', ['editingElement'])), {}, {
    methodList: function methodList() {
      return this.editingElement && this.editingElement.methodList || [];
    },
    script: function script() {
      return this.editingElement && this.editingElement.script || [];
    }
  }),
  data: function data() {
    return {
      dialog: false,
      index: 0,
      triggerList: [{
        value: 'click',
        label: '点击'
      }, {
        value: 'change',
        label: '改变'
      }, {
        value: 'mouseover',
        label: '移入'
      }, {
        value: 'mouseout',
        label: '移出'
      }, {
        value: 'keydown',
        label: '按下键盘'
      }, {
        value: 'load',
        label: '完成加载'
      }],
      code: ''
    };
  },
  methods: {
    delScript: function delScript(row, index) {
      this.script.splice(index, 1);
    },
    addScript: function addScript(row, index) {
      if (row) {
        this.code = row;
        this.index = index;
      } else {
        this.code = defaultScript;
        this.index = null;
      }

      this.dialog = true;
    },
    addMethods: function addMethods() {
      this.methodList.push({
        trigger: '',
        fnName: ''
      });
    },
    submitForm: function submitForm() {
      if (this.index === null) {
        this.script.push(this.code);
      } else {
        this.script.splice(this.index, 1, this.code);
      }

      this.dialog = false;
    },
    renderMethodTable: function renderMethodTable() {
      var _this = this;

      var h = this.$createElement;
      return this.methodList.map(function (item) {
        return h("div", [h("span", ["\u4E8B\u4EF6\uFF1A"]), h("el-select", {
          "style": "width:95px;margin-right: 10px;",
          "attrs": {
            "size": "mini"
          },
          "model": {
            value: item.trigger,
            callback: function callback($$v) {
              _this.$set(item, "trigger", $$v);
            }
          }
        }, [_this.triggerList.map(function (item) {
          return h("el-option", {
            "attrs": {
              "label": item.label,
              "value": item.value
            }
          });
        })]), h("span", ["\u6267\u884C\uFF1A"]), h("el-input", {
          "attrs": {
            "size": "mini"
          },
          "style": "width:85px",
          "model": {
            value: item.fnName,
            callback: function callback($$v) {
              _this.$set(item, "fnName", $$v);
            }
          }
        })]);
      });
    },
    renderScriptTable: function renderScriptTable() {
      var _this2 = this;

      var h = this.$createElement;
      return h("div", ["\u811A\u672C", h("el-table", {
        "attrs": {
          "data": this.script
        }
      }, [h("el-table-column", {
        "attrs": {
          "label": "序号",
          "type": "index",
          "width": "50"
        }
      }), h("el-table-column", helper_default()([{
        "attrs": {
          "label": "脚本"
        }
      }, {
        scopedSlots: {
          default: function _default(scope) {
            return "\u811A\u672C".concat(scope.$index + 1);
          }
        }
      }])), h("el-table-column", helper_default()([{
        "attrs": {
          "label": "操作",
          "width": "80px"
        }
      }, {
        scopedSlots: {
          default: function _default(scope) {
            return h("div", [h("el-button", {
              "attrs": {
                "type": "text",
                "icon": "el-icon-delete",
                "size": "big"
              },
              "on": {
                "click": function click() {
                  return _this2.delScript(scope.row, scope.$index);
                }
              }
            }), h("el-button", {
              "attrs": {
                "type": "text",
                "icon": "el-icon-edit",
                "size": "big"
              },
              "on": {
                "click": function click() {
                  return _this2.addScript(scope.row, scope.$index);
                }
              }
            })]);
          }
        }
      }]))])]);
    }
  },
  render: function render() {
    var _this3 = this;

    var h = arguments[0];
    if (!this.editingElement) return h("div", ["\u8BF7\u9009\u62E9\u4E00\u4E2A\u5143\u7D20"]);
    return h("div", [h("el-button", {
      "attrs": {
        "type": "text",
        "icon": "el-icon-plus"
      },
      "on": {
        "click": function click() {
          return _this3.addScript();
        }
      }
    }, ["\u65B0\u589E\u811A\u672C"]), h("el-button", {
      "attrs": {
        "type": "text",
        "icon": "el-icon-plus"
      },
      "on": {
        "click": function click() {
          return _this3.addMethods();
        }
      }
    }, ["\u65B0\u589E\u4E8B\u4EF6"]), this.renderScriptTable(), this.renderMethodTable(), h("el-dialog", {
      "attrs": {
        "title": "新增-修改脚本",
        "visible": this.dialog
      },
      "on": Object(objectSpread2["a" /* default */])({}, {
        'update:visible': function updateVisible(val) {
          _this3.dialog = val;
        }
      })
    }, [h("codemirror", {
      "style": "min-width: 500px;",
      "model": {
        value: _this3.code,
        callback: function callback($$v) {
          _this3.code = $$v;
        }
      }
    }), h("div", {
      "style": "text-align: right;margin-top: 10px"
    }, [h("el-button", {
      "attrs": {
        "type": "primary"
      },
      "on": {
        "click": this.submitForm
      }
    }, ["\u786E\u8BA4"]), h("el-button", {
      "on": {
        "click": function click() {
          return _this3.dialog = false;
        }
      }
    }, ["\u53D6\u6D88"])])])]);
  }
});
// CONCATENATED MODULE: ./src/core/editor/rightPanel/index.js





/* harmony default export */ var rightPanel = ({
  name: 'EditorRightPanel',
  props: {
    width: {
      type: Number,
      default: 320
    }
  },
  data: function data() {
    return {
      activeName: 'prop'
    };
  },
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("el-aside", {
      "class": "right",
      "attrs": {
        "width": this.width + 'px'
      },
      "style": "background: #fff;padding: 0 12px"
    }, [h("el-tabs", {
      "model": {
        value: _this.activeName,
        callback: function callback($$v) {
          _this.activeName = $$v;
        }
      }
    }, [h("el-tab-pane", {
      "attrs": {
        "label": this.$t('editor.editPanel.tab.prop'),
        "name": "prop"
      }
    }, [h(prop)]), h("el-tab-pane", {
      "attrs": {
        "label": this.$t('editor.editPanel.tab.animation'),
        "name": "animation"
      }
    }, [h(animation)]), h("el-tab-pane", {
      "attrs": {
        "label": this.$t('editor.editPanel.tab.script'),
        "name": "script"
      }
    }, [h(script)]), h("el-tab-pane", {
      "attrs": {
        "label": this.$t('editor.editPanel.tab.page'),
        "name": "page"
      }
    }, [h(rightPanel_page)])])]);
  }
});
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.test.js
var es_regexp_test = __webpack_require__("00b4");

// EXTERNAL MODULE: ./src/core/mixins/animation/index.js
var mixins_animation = __webpack_require__("9653");

// CONCATENATED MODULE: ./src/core/editor/canvas/shape.js






var points = ['nw', 'ne', 'sw', 'se', 'w', 'e', 'n', 's'];
/* harmony default export */ var shape = ({
  name: 'Shape',
  props: ['active', 'element'],
  mixins: [mixins_animation["a" /* default */]],
  methods: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['setEditingElement', 'setElementCommonStyle', 'recordRect'])), {}, {
    getPointStyle: function getPointStyle(point) {
      var height = this.element.commonStyle.height;
      var width = this.element.commonStyle.width;
      var hasT = /n/.test(point);
      var hasB = /s/.test(point);
      var hasL = /w/.test(point);
      var hasR = /e/.test(point);
      var newLeft = 0;
      var newTop = 0;

      if (point.length === 2) {
        newLeft = hasL ? 0 : width;
        newTop = hasT ? 0 : height;
      } else {
        if (hasT || hasB) {
          newLeft = width / 2;
          newTop = hasT ? 0 : height;
        }

        if (hasL || hasR) {
          newLeft = hasL ? 0 : width;
          newTop = height / 2;
        }
      }

      return {
        left: "".concat(newLeft, "px"),
        top: "".concat(newTop, "px"),
        cursor: point + '-resize'
      };
    },
    pointHandleMouseDown: function pointHandleMouseDown(e, point) {
      var _this = this;

      e.stopPropagation();
      e.preventDefault();

      var style = Object(objectSpread2["a" /* default */])({}, this.element.commonStyle);

      var startX = e.clientX;
      var startY = e.clientY;

      var move = function move(moveEvent) {
        var currX = moveEvent.clientX;
        var currY = moveEvent.clientY;
        var disY = currY - startY;
        var disX = currX - startX;
        var hasT = /n/.test(point);
        var hasB = /s/.test(point);
        var hasL = /w/.test(point);
        var hasR = /e/.test(point);
        var newHeight = +style.height + (hasT ? -disY : hasB ? disY : 0);
        var newWidth = +style.width + (hasL ? -disX : hasR ? disX : 0);
        style.height = newHeight > 0 ? newHeight : 0;
        style.width = newWidth > 0 ? newWidth : 0;
        style.left = +style.left + (hasL ? disX : 0);
        style.top = +style.top + (hasT ? disY : 0);
        startX = currX;
        startY = currY;

        _this.setElementCommonStyle(style);
      };

      var up = function up() {
        _this.recordRect();

        document.removeEventListener('mousemove', move);
        document.removeEventListener('mouseup', up);
      };

      document.addEventListener('mousemove', move);
      document.addEventListener('mouseup', up);
    },
    handleMousedown: function handleMousedown(e) {
      var _this2 = this;

      e.stopPropagation();
      e.preventDefault();
      this.setEditingElement(this.element);

      var pos = Object(objectSpread2["a" /* default */])({}, this.element.commonStyle);

      var startY = e.clientY;
      var startX = e.clientX;
      var startTop = pos.top;
      var startLeft = pos.left;

      var move = function move(moveEvent) {
        moveEvent.stopPropagation();
        moveEvent.preventDefault();
        var currX = moveEvent.clientX;
        var currY = moveEvent.clientY;
        pos.top = currY - startY + startTop;
        pos.left = currX - startX + startLeft;

        _this2.setElementCommonStyle(pos);
      };

      var up = function up() {
        _this2.recordRect();

        document.removeEventListener('mousemove', move, true);
        document.removeEventListener('mouseup', up, true);
      };

      document.addEventListener('mousemove', move, true);
      document.addEventListener('mouseup', up, true);
    },
    divClick: function divClick(e) {
      e.stopPropagation();
      e.preventDefault();
      this.$emit('clearMenu', e);
    }
  }),
  render: function render() {
    var _this3 = this;

    var h = arguments[0];

    var _this$element$getStyl = this.element.getStyle({
      position: 'absolute'
    }),
        top = _this$element$getStyl.top,
        left = _this$element$getStyl.left,
        width = _this$element$getStyl.width,
        height = _this$element$getStyl.height,
        position = _this$element$getStyl.position;

    var zIndex = this.element.getStyle({
      position: 'absolute'
    })['z-index'];
    return h("div", {
      "on": {
        "click": this.divClick,
        "mousedown": this.handleMousedown
      },
      "style": {
        top: top,
        left: left,
        width: width,
        height: height,
        position: position,
        'z-index': zIndex
      },
      "class": {
        'shape_active': this.active
      }
    }, [this.active && points.map(function (item) {
      return h("div", {
        "attrs": {
          "point": item
        },
        "style": _this3.getPointStyle(item),
        "on": {
          "mousedown": function mousedown(e) {
            return _this3.pointHandleMouseDown(e, item);
          }
        },
        "class": 'shape_point'
      });
    }), this.$slots.default]);
  }
});
// CONCATENATED MODULE: ./src/core/editor/canvas/context_menu.js


/* harmony default export */ var context_menu = ({
  name: 'ContextMenu',
  methods: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['copyElement', 'deleteElement'])),
  render: function render() {
    var h = arguments[0];
    return h("el-card", {
      "class": 'context_menu'
    }, [h("el-menu", [h("el-menu-item", {
      "on": {
        "click": this.copyElement
      }
    }, [this.$t('editor.centerPanel.contextMenu.copy')]), h("el-menu-item", {
      "on": {
        "click": this.deleteElement
      }
    }, [this.$t('editor.centerPanel.contextMenu.delete')])])]);
  }
});
// CONCATENATED MODULE: ./src/core/editor/canvas/edit.js






/* harmony default export */ var edit = ({
  name: 'edit',
  data: function data() {
    return {
      contextmenu: []
    };
  },
  computed: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', {
    elements: function elements(state) {
      return state.editingPage.elements;
    },
    editingElement: function editingElement(state) {
      return state.editingElement;
    }
  })),
  methods: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['setEditingElement'])), {}, {
    handleClickCanvas: function handleClickCanvas(e) {
      if (!e.target.classList.contains('shape_active')) {
        this.setEditingElement(null);
      }

      this.contextmenu = [];
    },
    bindContextMenu: function bindContextMenu(e) {
      e.preventDefault();
      e.stopPropagation();

      var _this$$el$getBounding = this.$el.getBoundingClientRect(),
          x = _this$$el$getBounding.x,
          y = _this$$el$getBounding.y;

      this.contextmenu = [e.clientX - x, e.clientY - y];
    },
    clearMenu: function clearMenu(e) {
      e.preventDefault();
      e.stopPropagation();
      this.contextmenu = [];
    }
  }),
  render: function render(h) {
    var _this = this;

    return h("div", {
      "style": 'width:100%;height:100%;position: relative;overflow: hidden;',
      "on": {
        "contextmenu": this.clearMenu,
        "click": function click(e) {
          _this.handleClickCanvas(e);
        }
      }
    }, [this.elements.map(function (element) {
      if (element.name === 'k-background') {
        return h('k-background', {
          props: Object(objectSpread2["a" /* default */])({}, element.getProps({}))
        });
      }

      var props = Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, element.getProps({})), {}, {
        editorMode: 'edit'
      });

      var data = {
        props: props,
        style: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, element.getStyle({
          position: 'static'
        })), {}, {
          width: '100%',
          height: '100%'
        }),
        on: {
          input: function input(_ref) {
            var value = _ref.value,
                pluginName = _ref.pluginName;

            if (pluginName === 'k-text') {
              element.pluginProps.text = value;
            }
          }
        }
      };
      return h(shape, {
        "nativeOn": {
          "contextmenu": function contextmenu(e) {
            _this.bindContextMenu(e);
          }
        },
        "on": {
          "clearMenu": _this.clearMenu
        },
        "attrs": {
          "element": element,
          "active": _this.editingElement === element
        }
      }, [h(element.uuid, data)]);
    }), this.contextmenu.length ? h(context_menu, {
      "style": {
        left: this.contextmenu[0] + 'px',
        top: this.contextmenu[1] + 'px'
      }
    }) : null]);
  }
});
// EXTERNAL MODULE: ./src/core/preview/index.js
var preview = __webpack_require__("1b39");

// CONCATENATED MODULE: ./src/core/mixins/drag/drag_line.js
/* harmony default export */ var drag_line = ({
  name: 'dragLine',
  props: {
    type: {
      required: true,
      type: String
    }
  },
  methods: {
    onMousedown: function onMousedown(e) {
      var _this = this;

      var startX = e.clientX;
      var startY = e.clientY;

      var move = function move(moveEvent) {
        moveEvent.preventDefault();
        moveEvent.stopPropagation();
        var offsetX = startX - moveEvent.clientX;
        var offsetY = moveEvent.clientY - startY;

        if (_this.$props.type === 'ns') {
          _this.$emit('lineMove', offsetY);
        } else {
          _this.$emit('lineMove', offsetX);
        }

        startX -= offsetX;
        startY += offsetY;
      };

      var up = function up() {
        document.removeEventListener('mousemove', move, true);
        document.removeEventListener('mouseup', up, true);
      };

      document.addEventListener('mousemove', move, true);
      document.addEventListener('mouseup', up, true);
    }
  },
  render: function render() {
    var h = arguments[0];
    return h("div", {
      "class": this.$props.type === 'ns' ? 'dragLine dragLine_ns' : 'dragLine dragLine_ew',
      "on": {
        "mousedown": this.onMousedown
      }
    }, [h("div", {
      "class": 'dragLine_button'
    }, [h("div", {
      "class": 'dragLine_button_icon'
    })])]);
  }
});
// CONCATENATED MODULE: ./src/core/editor/canvas/index.js





/* harmony default export */ var canvas = ({
  name: 'EditorCanvas',
  data: function data() {
    return {
      isPreviewMode: true
    };
  },
  computed: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', ['work', 'editingPage', 'scaleRate'])), Object(vuex_esm["c" /* mapState */])('editor', {
    elements: function elements(state) {
      return state.editingPage.elements;
    }
  })),
  methods: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['updateWork', 'updateEditingPageWidth', 'updateEditingPageHeight', 'setEditingElement'])), {}, {
    radioChange: function radioChange(e) {
      if (!e) {
        this.setEditingElement();
      }
    }
  }),
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("el-container", {
      "style": "background: #f1f3f5"
    }, [h("el-main", {
      "attrs": {
        "id": 'canvas_main'
      },
      "style": 'min-width: 400px;'
    }, [h("div", {
      "class": 'canvas_group'
    }, [h("el-radio-group", {
      "attrs": {
        "size": "mini"
      },
      "on": {
        "change": this.radioChange
      },
      "model": {
        value: _this.isPreviewMode,
        callback: function callback($$v) {
          _this.isPreviewMode = $$v;
        }
      }
    }, [h("el-radio-button", {
      "attrs": {
        "label": true
      }
    }, [this.$t('editor.centerPanel.mode.edit')]), h("el-radio-button", {
      "attrs": {
        "label": false
      }
    }, [this.$t('editor.centerPanel.mode.preview')])])]), h("div", {
      "class": 'canvas_wrapper'
    }, [h("div", {
      "style": {
        transform: "scale(".concat(this.scaleRate, ")"),
        'transform-origin': 'center top',
        'padding-top': '50px'
      }
    }, [h("div", {
      "class": 'canvas_wrapper_view',
      "style": {
        width: "".concat(this.editingPage.width, "px"),
        height: "".concat(this.editingPage.height, "px")
      }
    }, [this.isPreviewMode ? h(edit) : h(preview["a" /* default */], {
      "attrs": {
        "elements": this.elements,
        "height": this.editingPage.height
      }
    })]), h("div", {
      "class": 'canvas_wrapper_height',
      "style": {
        top: "".concat(this.editingPage.height * 1 + 50, "px")
      }
    }, [h("div", {
      "class": "canvas_wrapper_height_drag"
    }, [h(drag_line, {
      "attrs": {
        "type": 'ns'
      },
      "on": {
        "lineMove": function lineMove(offset) {
          _this.updateEditingPageHeight({
            height: _this.editingPage.height + offset
          });
        }
      }
    })]), h("div", {
      "class": "canvas_wrapper_height_input"
    }, [h("el-input", {
      "attrs": {
        "type": 'number',
        "size": "mini"
      },
      "style": 'width:80px;margin:0 4px;',
      "on": {
        "change": function change(width) {
          _this.updateEditingPageWidth({
            width: width
          });
        }
      },
      "model": {
        value: _this.editingPage.width,
        callback: function callback($$v) {
          _this.$set(_this.editingPage, "width", $$v);
        }
      }
    }), h("span", ["x"]), h("el-input", {
      "attrs": {
        "type": 'number',
        "size": "mini"
      },
      "style": 'width:80px;margin:0 4px;',
      "on": {
        "change": function change(height) {
          _this.updateEditingPageHeight({
            height: height
          });
        }
      },
      "model": {
        value: _this.editingPage.height,
        callback: function callback($$v) {
          _this.$set(_this.editingPage, "height", $$v);
        }
      }
    }), h("span", ["px"])])])])])])]);
  }
});
// EXTERNAL MODULE: ./node_modules/hotkeys-js/dist/hotkeys.esm.js
var hotkeys_esm = __webpack_require__("9b6a");

// CONCATENATED MODULE: ./src/core/editor/tools/index.js





var toolsOption = [{
  icon: 'Kchexiao',
  i18nTooltip: 'editor.fixedTool.undo',
  hotkeyTooltip: '(ctrl+z)',
  hotkey: 'ctrl&z,⌘&z',
  disabled: 'canUndo',
  onClick: function onClick() {
    utils["g" /* undoRedoHistory */].undo();
  }
}, {
  icon: 'Kzhongzuo',
  i18nTooltip: 'editor.fixedTool.redo',
  hotkeyTooltip: '(ctrl+y)',
  hotkey: 'ctrl&y,⌘&y',
  disabled: 'canRedo',
  onClick: function onClick() {
    utils["g" /* undoRedoHistory */].redo();
  }
}, {
  icon: 'Kfangda',
  i18nTooltip: 'editor.fixedTool.zoomOut',
  hotkeyTooltip: '(ctrl +)',
  hotkey: 'ctrl&=,⌘&=',
  onClick: function onClick() {
    this.updateScaleRate(0.25);
  }
}, {
  icon: 'Ksuoxiao',
  i18nTooltip: 'editor.fixedTool.zoomIn',
  hotkeyTooltip: '(ctrl -)',
  hotkey: 'ctrl&-,⌘&-',
  onClick: function onClick() {
    this.updateScaleRate(-0.25);
  }
}];
/* harmony default export */ var tools = ({
  name: 'FixedTools',
  computed: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', {
    scaleRate: function scaleRate(state) {
      return state.scaleRate;
    }
  })),
  methods: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['updateScaleRate'])),
  data: function data() {
    return {
      undoRedoHistory: utils["g" /* undoRedoHistory */]
    };
  },
  mounted: function mounted() {
    var _this = this;

    toolsOption.map(function (tool) {
      tool.hotkey && Object(hotkeys_esm["a" /* default */])(tool.hotkey, {
        splitKey: '&'
      }, function (event) {
        event.preventDefault();
        event.stopPropagation();
        tool.onClick && tool.onClick.call(_this);
      });
    });
  },
  render: function render() {
    var _this2 = this;

    var h = arguments[0];
    return h("el-aside", {
      "attrs": {
        "width": "40px"
      },
      "style": "overflow: hidden;background: #fff; border: 1px solid #eee"
    }, [h("el-button-group", {
      "class": 'tools_button_group'
    }, [toolsOption.map(function (tool) {
      return h("el-tooltip", {
        "attrs": {
          "effect": "dark",
          "placement": "top",
          "content": _this2.$t(tool.i18nTooltip, {
            hotkey: tool.hotkeyTooltip
          })
        }
      }, [h("el-button", {
        "attrs": {
          "type": "text",
          "disabled": tool.disabled ? !_this2.undoRedoHistory[tool.disabled] : false
        },
        "on": {
          "click": function click() {
            return tool.onClick.call(_this2);
          }
        }
      }, [h("em", {
        "class": ['iconfont', tool.icon]
      })])]);
    })]), h("div", {
      "style": "font-size: 14px;text-align: center;"
    }, [this.scaleRate * 100, "%"])]);
  }
});
// CONCATENATED MODULE: ./src/core/preview/preview_dialog.js
/* harmony default export */ var preview_dialog = ({
  name: 'PreviewDialog',
  props: ['visible', 'work'],
  computed: {
    releaseUrl: function releaseUrl() {
      return "http://localhost:3000/v1/work/preview?id=".concat(this.work.id, "&view_mode=preview");
    }
  },
  render: function render() {
    var _this = this;

    var h = arguments[0];
    return h("div", {
      "class": "k_dialog",
      "directives": [{
        name: "show",
        value: this.visible
      }]
    }, [h("div", {
      "class": "k_dialog__bg"
    }), h("div", {
      "class": "k_dialog__wrap"
    }, [h("div", {
      "class": "k_dialog__wrap__main"
    }, [h("em", {
      "class": "k_dialog__wrap__close el-icon-circle-close",
      "on": {
        "click": function click() {
          _this.$emit('update:visible', false);
        }
      }
    }), h("div", {
      "class": "iphone"
    }, [h("div", {
      "class": "iphone__top"
    }), h("div", {
      "class": "iphone__main"
    }, [this.visible && h("iframe", {
      "attrs": {
        "id": "iframe-for-preview",
        "src": this.releaseUrl,
        "frameBorder": "0"
      },
      "style": "height: 100%;width: 100%;"
    })]), h("img", {
      "attrs": {
        "src": __webpack_require__("8407"),
        "alt": "iphone"
      },
      "class": "iphone__bg"
    })])])])]);
  }
});
// CONCATENATED MODULE: ./src/core/editor.js
























window.EditorApp = new external_commonjs_vue_commonjs2_vue_root_Vue_default.a(); // event bus

external_commonjs_vue_commonjs2_vue_root_Vue_default.a.use(k_generate_components_common_default.a);
var CoreEditor = {
  name: 'CoreEditor',
  components: {
    Header: header["a" /* default */]
  },
  computed: Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["c" /* mapState */])('editor', ['work'])),
  props: {
    workId: {
      type: [Number, String]
    }
  },
  data: function data() {
    return {
      width: 320,
      previewDialogVisible: false
    };
  },
  created: function created() {
    var _this = this;

    if (this.workId) {
      Object(api["b" /* getWork */])(this.workId).then(function (_ref) {
        var data = _ref.data;
        var work = data.data.work;
        console.log(work);
        work.pages = work.pages.map(function (page) {
          page.elements = page.elements.map(function (element) {
            return new models_element["a" /* default */](element);
          });
          return new models_page["a" /* default */](page);
        });
        work.dialog = work.dialog.map(function (dialog) {
          dialog.elements = dialog.elements.map(function (element) {
            return new models_element["a" /* default */](element);
          });
          return new models_dialog["a" /* default */](dialog);
        });

        _this.updateWork(work);

        _this.setEditingPage();
      });
    } else {
      this.$message.error('no work id!');
    }
  },
  methods: Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({}, Object(vuex_esm["b" /* mapActions */])('editor', ['updateWork', 'setEditingPage'])), {}, {
    handlePreview: function handlePreview() {
      this.previewDialogVisible = true;
    },
    save: function save() {
      var _this2 = this;

      Object(api["e" /* updateWorks */])(this.work).then(function (_ref2) {
        var data = _ref2.data;

        if (data.code === 200) {
          _this2.$message({
            message: '保存成功',
            type: 'success'
          });
        }
      });
    }
  }),
  render: function render() {
    var _this3 = this;

    var h = arguments[0];
    return h("el-container", {
      "style": {
        height: '100vh'
      }
    }, [h("el-header", {
      "style": "background-color: #031529;"
    }, [h(header["a" /* default */], [h(headerMenu, {
      "slot": "headr_menu",
      "on": {
        "preview": this.handlePreview,
        "save": this.save
      }
    })])]), h("el-container", [h(leftPanel), h(canvas), h("el-aside", {
      "attrs": {
        "width": "3px"
      },
      "style": 'overflow: visible;'
    }, [h(drag_line, {
      "attrs": {
        "type": 'ew'
      },
      "on": {
        "lineMove": function lineMove(offset) {
          _this3.width += offset;
        }
      }
    })]), h(tools), h(rightPanel, {
      "attrs": {
        "width": this.width
      }
    })]), h(preview_dialog, {
      "attrs": {
        "visible": this.previewDialogVisible,
        "work": this.work
      },
      "on": Object(objectSpread2["a" /* default */])({}, {
        'update:visible': function updateVisible(val) {
          _this3.previewDialogVisible = val;
        }
      })
    })]);
  }
};

CoreEditor.install = function (Vue) {
  Vue.component(CoreEditor.name, CoreEditor);
}; // 通过script标签引入Vue的环境


if (typeof window !== 'undefined' && window.Vue) {
  CoreEditor.install(window.Vue);
}

/* harmony default export */ var core_editor = (CoreEditor);
// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/Editor/Editor.vue?vue&type=script&lang=js&

/* harmony default export */ var Editorvue_type_script_lang_js_ = ({
  components: {
    CoreEditor: core_editor
  },
  render: function render() {
    var h = arguments[0];
    return h(core_editor, {
      "attrs": {
        "workId": this.$route.params.workId
      }
    });
  }
});
// CONCATENATED MODULE: ./src/pages/Editor/Editor.vue?vue&type=script&lang=js&
 /* harmony default export */ var Editor_Editorvue_type_script_lang_js_ = (Editorvue_type_script_lang_js_); 
// CONCATENATED MODULE: ./src/pages/Editor/Editor.vue
var Editor_render, Editor_staticRenderFns




/* normalize component */

var Editor_component = Object(componentNormalizer["a" /* default */])(
  Editor_Editorvue_type_script_lang_js_,
  Editor_render,
  Editor_staticRenderFns,
  false,
  null,
  null,
  null
  
)

/* harmony default export */ var Editor = __webpack_exports__["default"] = (Editor_component.exports);

/***/ }),

/***/ "fea5":
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ })

}]);